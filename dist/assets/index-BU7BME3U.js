import{_ as z}from"./imageInput-Ccdzaa0R.js";import{s as E,n as L,f as O,d as A}from"./apiService-B5u5nzJQ.js";import{F as b,r as m,H as V,I as w,v as e,L as a,O as S,M as l,P as f,q as J,S as D,J as P,K as H,R as M,Q as q}from"./index-BoEzT4Gr.js";import{v}from"./VBtn-v23qFlAA.js";import{e as k,V as N,d as K}from"./VRow-BzxPQaSZ.js";import{V as Q}from"./VForm-Bq2qMyP-.js";import{V as C}from"./VTextField-DyXI34cL.js";import{V as R}from"./VDialog-DEKFdcKk.js";import{_ as W}from"./ShowImages-Cn07KJ3R.js";import{_ as G}from"./ThemeSettings-DFviMYQn.js";import{V as X}from"./VTable-MJdOgoLV.js";import{V as Y}from"./VContainer-DzqoZwHa.js";import"./VInput-CBf0q4nF.js";import"./forwardRefs-DlZBHvxw.js";import"./VChip-BSc66w3k.js";import"./VOverlay-BjGOG3U4.js";import"./VSwitch-BGb02ebQ.js";const Z={class:"ma-5"},ee={__name:"ProjectForm",emits:["runItems"],setup(j,{expose:x,emit:y}){const _=b(),g=y,c=m(!1),s=m({}),r=m({}),d=m({});function F(){r.value={ar:"",en:""},d.value={ar:"",en:""},s.value.id="",c.value=!1,g("runItems")}function h(o){return o.startsWith("https://")?o:"https://"+o}function T(o){const t=new FormData;t.append("title",JSON.stringify(r.value)),t.append("description",JSON.stringify(d.value)),t.append("url",h(s.value.url)),t.append("user_id",_.user.id),o.length&&o.forEach(p=>{t.append("photos[]",p,p.name)}),s.value.id&&t.append("_method","put"),E("projects",t,s.value.id).then(p=>{s.value=p.data,g("runItems"),F()})}const I=m(null),U=()=>{if(!r.value.ar&&!r.value.en){L("حقل العنوان مطلوب عربي او انجليزي");return}I.value&&I.value.compressImages()},i=(o={})=>{Object.keys(o).length!==0&&(r.value=o.title,d.value=o.description),c.value=!0,s.value=o};return x({addNew:i}),(o,t)=>{const p=z;return V(),w("div",null,[e(k,{cols:"auto"},{default:a(()=>[e(v,{onClick:t[0]||(t[0]=n=>i()),icon:"mdi-plus",color:"success",size:"small",to:""})]),_:1}),e(R,{class:"text-center",modelValue:c.value,"onUpdate:modelValue":t[6]||(t[6]=n=>c.value=n),"max-width":"900",persistent:""},{default:a(()=>[e(N,{class:"pa-5"},{actions:a(()=>[e(v,{onClick:F},{default:a(()=>[S(" اغلاق ")]),_:1}),e(v,{onClick:U},{default:a(()=>[S(" موافق ")]),_:1})]),default:a(()=>[l("h2",Z,f(s.value.id?"تعديل ":" اضافة "),1),e(Q,null,{default:a(()=>[e(K,null,{default:a(()=>[e(k,{cols:"12",md:"6"},{default:a(()=>[e(C,{modelValue:r.value.ar,"onUpdate:modelValue":t[1]||(t[1]=n=>r.value.ar=n),label:"العنوان"},null,8,["modelValue"])]),_:1}),e(k,{cols:"12",md:"6"},{default:a(()=>[e(C,{modelValue:r.value.en,"onUpdate:modelValue":t[2]||(t[2]=n=>r.value.en=n),label:"title"},null,8,["modelValue"])]),_:1}),e(k,{cols:"12",md:"6"},{default:a(()=>[e(C,{modelValue:d.value.ar,"onUpdate:modelValue":t[3]||(t[3]=n=>d.value.ar=n),label:"الوصف"},null,8,["modelValue"])]),_:1}),e(k,{cols:"12",md:"6"},{default:a(()=>[e(C,{modelValue:d.value.en,"onUpdate:modelValue":t[4]||(t[4]=n=>d.value.en=n),label:"description"},null,8,["modelValue"])]),_:1}),e(k,{cols:"12",md:"6"},{default:a(()=>[e(C,{modelValue:s.value.url,"onUpdate:modelValue":t[5]||(t[5]=n=>s.value.url=n),label:"URL"},null,8,["modelValue"])]),_:1}),e(p,{ref_key:"imageInputRef",ref:I,onSaveCompressedImages:T},null,512)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},te=l("h2",{class:"ma-5"},"هل تريد حذف العنصر بالفعل",-1),le=l("thead",null,[l("tr",null,[l("th",{class:"text-center"},"#"),l("th",{class:"text-center"},"العنوان"),l("th",{class:"text-center"},"title"),l("th",{class:"text-center"},"الوصف"),l("th",{class:"text-center"},"description"),l("th",{class:"text-center"},"URL"),l("th",{class:"text-center"},"تاريخ الانشاء"),l("th",{class:"text-center sticky-column"},". . .")])],-1),oe={class:"sticky-column"},ae={key:2,class:"text-alert"},Ie={__name:"index",setup(j){const x=b(),y=m(null),_=m(!1),g=m([]),c=m(""),s=m(null);function r(){s.value?s.value.opendialogThemeForm():console.error("opendialogThemeForm is not a function")}J(()=>{h()});const d=m(null),F=i=>{d.value.opaenDialog(i)};function h(){x.loadengApi=!0,O("projects").then(i=>{g.value=i.data,c.value=""})}function T(i){_.value=!0,c.value=i}function I(){x.loadengApi=!0,A("projects/delete",{id:[c.value.id]}).then(()=>{h(),_.value=!1})}const U=i=>{var o;(o=y.value)==null||o.addNew(i)};return(i,o)=>{const t=G,p=W,n=ee;return V(),D(Y,null,{default:a(()=>[e(R,{class:"text-center",modelValue:_.value,"onUpdate:modelValue":o[1]||(o[1]=u=>_.value=u),"max-width":"400",persistent:""},{default:a(()=>[e(N,{class:"pa-5"},{default:a(()=>[te,e(v,{class:"ma-1",onClick:I},{default:a(()=>[S(" موافق ")]),_:1}),e(v,{class:"ma-1",onClick:o[0]||(o[0]=u=>_.value=!1)},{default:a(()=>[S(" اغلاق ")]),_:1})]),_:1})]),_:1},8,["modelValue"]),P(x).user?(V(),D(t,{key:0,ref_key:"dialogThemeForm",ref:s,detTheme:{nameEn:"projects",nameAr:"المشاريع"},onClick:r},null,512)):H("",!0),e(p,{ref_key:"isShowImage",ref:d,onRunItems:h},null,512),e(n,{ref_key:"itemForm",ref:y,onRunItems:h},null,512),g.value.length>0?(V(),D(X,{key:1,style:{"white-space":"nowrap"},dir:"rtl",class:"h"},{default:a(()=>[le,l("tbody",null,[(V(!0),w(q,null,M(g.value,(u,B)=>(V(),w("tr",{key:u.id},[l("td",null,f(B+1),1),l("td",null,f(u.title.ar),1),l("td",null,f(u.title.en),1),l("td",null,f(u.description.ar),1),l("td",null,f(u.description.en),1),l("td",null,f(u.url),1),l("td",null,f(u.created_at),1),l("td",oe,[e(v,{onClick:$=>F(u.photos),icon:"mdi-image-edit-outline",color:"info",size:"small"},null,8,["onClick"]),e(v,{onClick:$=>T(u),class:"mx-3",icon:"mdi-delete",color:"red",size:"small"},null,8,["onClick"]),e(v,{onClick:$=>U(u),icon:"mdi-pencil",color:"info",size:"small"},null,8,["onClick"])])]))),128))])]),_:1})):(V(),w("p",ae,"لا توجد اي بيانات"))]),_:1})}}};export{Ie as default};
