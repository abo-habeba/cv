import{F as B,r as d,q as R,I as u,v as l,L as n,H as r,O as m,an as U,Q as v,R as g,K as y,M as x,U as F,S as V,P as b}from"./index-DzjEeuTt.js";import{V as I}from"./VContainer-BDZxjhI4.js";import{d as N,e as $,V as L}from"./VRow-BAVtBjwu.js";import{V as f}from"./VAlert-fDkdmwqx.js";import{V as z}from"./VForm-Dw2r1Kqq.js";import{V as p}from"./VTextField-BuNN6gNv.js";import{v as M}from"./VBtn-CVODcAi2.js";import"./VInput-zU58qXlR.js";import"./forwardRefs-DJ7-8hGF.js";const T={id:"register"},q={key:0},D={key:1},E={key:2},O=x("div",{class:"text-subtitle-1 text-medium-emphasis d-flex align-center justify-space-between"},[x("a",{class:"text-caption text-decoration-none text-blue",href:"/login",rel:"noopener noreferrer"}," اذا كان لديك حساب ادخل من هنا")],-1),Y={__name:"register",setup(Z){const c=B(),s=d(!1),o=d({}),k=d(!1),w=d(`${window.location.hostname}/`),i=d({}),_=[e=>!!e||"يرجى إدخال اسم المستخدم",e=>!e.includes(" ")||"يجب ألا يحتوي اسم المستخدم على مسافات ",e=>e===e.toLowerCase()||"يجب أن تكون جميع الحروف صغيرة ",e=>!/[{}|\\^[\]`"<>#/?]/.test(e)||'يجب ألا يحتوي اسم المستخدم على العلامات التالية: { } | \\ ^ [ ] ` " < > # / ؟',e=>/^[a-zA-Z]+$/.test(e)||"يجب أن يحتوي اسم المستخدم على أحرف انجليزية فقط"];function C(e){return!(!e.includes(" ")&&e===e.toLowerCase()&&!/[{}|\\^[\]`"<>#/?]/.test(e)&&/^[a-zA-Z]+$/.test(e))}const S=[e=>!!e||"يرجى إدخال الايميل"],h=[e=>!!e||"يرجى إدخال كلمة السر",e=>e.length>=8||"يجب أن تكون كلمة المرور مكونة من 8 أحرف على الأقل"];R(()=>{c.loadengApi=!1});function A(){if(C(o.value.username)){const e=document.querySelector(".v-messages__message"),a=window.getComputedStyle(e).backgroundColor;e.style.backgroundColor="#fb564d",setTimeout(()=>{e.style.backgroundColor=a},500);return}k.value=!1,c.loadengApi=!0,F.post("register",o.value).then(e=>{console.log(e),localStorage.setItem("token",e.data.token),localStorage.setItem("user",JSON.stringify(e.data.user)),c.loadengApi=!1,location.reload()}).catch(e=>{i.value=e.response.data.errors,c.loadengApi=!1,console.log(e.response.data)})}return(e,a)=>(r(),u("div",T,[l(I,null,{default:n(()=>[l(N,null,{default:n(()=>[l($,{cols:"12",xs:"12",sm:"11",md:"8",lg:"6",xl:"6",class:"mx-auto"},{default:n(()=>[l(L,{class:"register-box mx-auto pa-1 pb-8","max-width":"448",rounded:"sm"},{default:n(()=>[l(f,{class:"mb-3",type:"warning",variant:"outlined"},{default:n(()=>[m(" هذا الاسم يستخدم في رابط المتصفح ")]),_:1}),l(z,{"fast-fail":"",onSubmit:a[6]||(a[6]=U(()=>{},["prevent"]))},{default:n(()=>[l(p,{density:"compact",label:" اسم المستخدم ",prefix:w.value,"prepend-inner-icon":"mdi-web",variant:"outlined",modelValue:o.value.username,"onUpdate:modelValue":a[0]||(a[0]=t=>o.value.username=t),rules:_},null,8,["prefix","modelValue"]),i.value.username?(r(),u("div",q,[(r(!0),u(v,null,g(i.value.username,t=>(r(),V(f,{key:t,class:"mb-3",type:"error",variant:"outlined"},{default:n(()=>[m(b(t),1)]),_:2},1024))),128))])):y("",!0),l(p,{density:"compact",placeholder:"ادخل الايميل","prepend-inner-icon":"mdi-email-outline",variant:"outlined",modelValue:o.value.email,"onUpdate:modelValue":a[1]||(a[1]=t=>o.value.email=t),rules:S},null,8,["modelValue"]),i.value.email?(r(),u("div",D,[(r(!0),u(v,null,g(i.value.email,t=>(r(),V(f,{key:t,class:"mb-3",type:"error",variant:"outlined"},{default:n(()=>[m(b(t),1)]),_:2},1024))),128))])):y("",!0),l(p,{"append-inner-icon":s.value?"mdi-eye-off":"mdi-eye",type:s.value?"text":"password",density:"compact",placeholder:"ادخل كلمة المرور","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":a[2]||(a[2]=t=>s.value=!s.value),modelValue:o.value.password,"onUpdate:modelValue":a[3]||(a[3]=t=>o.value.password=t),rules:h},null,8,["append-inner-icon","type","modelValue"]),l(p,{"append-inner-icon":s.value?"mdi-eye-off":"mdi-eye",type:s.value?"text":"password",density:"compact",placeholder:" اعد كتابة كلمة المرور","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":a[4]||(a[4]=t=>s.value=!s.value),rules:[t=>t===o.value.password||"كلمة المرور غير متطابقتان"]},null,8,["append-inner-icon","type","rules"]),l(p,{density:"compact",label:" رقم الهاتف ",type:"number","prepend-inner-icon":"mdi-phone-outline",variant:"outlined",modelValue:o.value.phone,"onUpdate:modelValue":a[5]||(a[5]=t=>o.value.phone=t)},null,8,["modelValue"]),i.value.phone?(r(),u("div",E,[(r(!0),u(v,null,g(i.value.phone,t=>(r(),V(f,{key:t,class:"mb-3",type:"error",variant:"outlined"},{default:n(()=>[m(b(t),1)]),_:2},1024))),128))])):y("",!0),l(M,{type:"submit",onClick:A,class:"mb-8",color:"blue",size:"large",variant:"tonal",block:""},{default:n(()=>[m(" انشاء حساب ")]),_:1})]),_:1}),O]),_:1})]),_:1})]),_:1})]),_:1})]))}};export{Y as default};
