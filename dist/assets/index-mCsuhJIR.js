import{_ as R}from"./imageInput-CnZecyl4.js";import{n as T,s as E,f as J,d as O}from"./apiService-DJhwrnjc.js";import{J as $,r as d,L as g,M as C,v as e,P as o,S as w,Q as t,T as v,q as A,V as D,U as L,F as M}from"./index-BMIPE2aT.js";import{z as _}from"./forwardRefs-b5Bbg4e-.js";import{a as k,V as j}from"./VRow-CPMn7zse.js";import{V as N}from"./VGrid-sGql2Pfr.js";import{V as q}from"./VForm-B4fBCeMx.js";import{V as F}from"./VTextField-CWNyIJf5.js";import{V as U}from"./VTextarea-WjSnYygB.js";import{V as z}from"./VDialog-BTQm1QC_.js";import{_ as P}from"./ShowImages-TIre7iu3.js";import{V as Q}from"./VTable-8HK_GobL.js";import{V as G}from"./VContainer-C3HaojmF.js";import"./VInput-BM8s1tyJ.js";import"./index-CT7Bpyv8.js";import"./VChip-BSvqXooa.js";import"./VOverlay-C4u9Ip57.js";const H={class:"ma-5"},K={__name:"SkillsForm",emits:["runItems"],setup(B,{expose:h,emit:I}){const p=$(),f=d(!1),s=d({}),u=d({}),c=d({}),V=I;function y(){u.value={ar:"",en:""},c.value={ar:"",en:""},s.value.level="",s.value.id="",f.value=!1,V("runItems")}function S(r){const l=new FormData;l.append("name",JSON.stringify(u.value)),l.append("description",JSON.stringify(c.value)),s.value.level&&l.append("level",s.value.level),console.log("item.value.level",s.value.level||null),l.append("user_id",p.user.id),console.log("userStore.user.id",p.user.id),r.length&&r.forEach(a=>{l.append("photos[]",a,a.name)}),s.value.id&&l.append("_method","put"),E("skills",l,s.value.id).then(a=>{s.value=a.data,V("runItems"),y()})}const x=d(null),i=()=>{if(!u.value.ar&&!u.value.en){T("حقل الاسم مطلوب عربي او انجليزي");return}x.value&&x.value.compressImages().then(r=>{S(r)})},m=(r={})=>{Object.keys(r).length!==0&&(u.value=r.name,c.value=r.description),f.value=!0,s.value=r};return h({addNew:m}),(r,l)=>{const a=R;return g(),C("div",null,[e(k,{cols:"auto"},{default:o(()=>[e(_,{onClick:l[0]||(l[0]=n=>m()),icon:"mdi-plus",color:"success",size:"small",to:""})]),_:1}),e(z,{class:"text-center",modelValue:f.value,"onUpdate:modelValue":l[6]||(l[6]=n=>f.value=n),"max-width":"900",persistent:""},{default:o(()=>[e(N,{class:"pa-5"},{actions:o(()=>[e(_,{onClick:y},{default:o(()=>[w(" اغلاق ")]),_:1}),e(_,{onClick:i},{default:o(()=>[w(" موافق ")]),_:1})]),default:o(()=>[t("h2",H,v(s.value.id?"تعديل ":" اضافة "),1),e(q,null,{default:o(()=>[e(j,null,{default:o(()=>[e(k,{cols:"12",md:"6"},{default:o(()=>[e(F,{modelValue:u.value.ar,"onUpdate:modelValue":l[1]||(l[1]=n=>u.value.ar=n),label:"الاسم"},null,8,["modelValue"])]),_:1}),e(k,{cols:"12",md:"6"},{default:o(()=>[e(F,{modelValue:u.value.en,"onUpdate:modelValue":l[2]||(l[2]=n=>u.value.en=n),label:"name"},null,8,["modelValue"])]),_:1}),e(k,{cols:"12",md:"6"},{default:o(()=>[e(U,{modelValue:c.value.ar,"onUpdate:modelValue":l[3]||(l[3]=n=>c.value.ar=n),label:"الوصف"},null,8,["modelValue"])]),_:1}),e(k,{cols:"12",md:"6"},{default:o(()=>[e(U,{modelValue:c.value.en,"onUpdate:modelValue":l[4]||(l[4]=n=>c.value.en=n),label:"description"},null,8,["modelValue"])]),_:1}),e(k,{cols:"12",md:"6"},{default:o(()=>[e(F,{modelValue:s.value.level,"onUpdate:modelValue":l[5]||(l[5]=n=>s.value.level=n),type:"number",label:"المستوي",rules:[n=>n>=1&&n<=100||"يجب أن يكون الرقم بين 1 الي 100"]},null,8,["modelValue","rules"])]),_:1}),e(a,{ref_key:"imageInputRef",ref:x},null,512)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},W=t("h2",{class:"ma-5"},"هل تريد حذف العنصر بالفعل",-1),X=t("thead",null,[t("tr",null,[t("th",{class:"text-center"},"#"),t("th",{class:"text-center"},"الاسم"),t("th",{class:"text-center"},"name"),t("th",{class:"text-center"},"الوصف"),t("th",{class:"text-center"},"description"),t("th",{class:"text-center"},"المستوي"),t("th",{class:"text-center"},"تاريخ الانشا"),t("th",{class:"text-center sticky-column"},". . .")])],-1),Y={class:"sticky-column"},Z={key:1,class:"text-alert"},Ve={__name:"index",setup(B){const h=$(),I=d(null),p=d(!1),f=d([]),s=d(""),u=d(null),c=i=>{u.value.opaenDialog(i)};A(()=>{V()});function V(){h.loadengApi=!0,J("skills").then(i=>{f.value=i.data,s.value=""})}function y(i){p.value=!0,s.value=i}function S(){h.loadengApi=!0,O("skills/delete",{id:[s.value.id]}).then(()=>{V(),p.value=!1})}const x=i=>{var m;(m=I.value)==null||m.addNew(i)};return(i,m)=>{const r=P,l=K;return g(),D(G,null,{default:o(()=>[e(z,{class:"text-center",modelValue:p.value,"onUpdate:modelValue":m[1]||(m[1]=a=>p.value=a),"max-width":"400",persistent:""},{default:o(()=>[e(N,{class:"pa-5"},{default:o(()=>[W,e(_,{class:"ma-1",onClick:S},{default:o(()=>[w(" موافق ")]),_:1}),e(_,{class:"ma-1",onClick:m[0]||(m[0]=a=>p.value=!1)},{default:o(()=>[w(" اغلاق ")]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(r,{ref_key:"isShowImage",ref:u,onRunItems:V},null,512),e(l,{ref_key:"itemForm",ref:I,onRunItems:V},null,512),f.value.length>0?(g(),D(Q,{key:0,style:{"white-space":"nowrap"},dir:"rtl",class:"h"},{default:o(()=>[X,t("tbody",null,[(g(!0),C(M,null,L(f.value,(a,n)=>(g(),C("tr",{key:n},[t("td",null,v(n+1),1),t("td",null,v(a.name.ar),1),t("td",null,v(a.name.en),1),t("td",null,v(a.description.ar),1),t("td",null,v(a.description.en),1),t("td",null,v(a.level),1),t("td",null,v(a.created_at),1),t("td",Y,[e(_,{onClick:b=>c(a.photos),icon:"mdi-image-edit-outline",color:"info",size:"small"},null,8,["onClick"]),e(_,{onClick:b=>y(a),class:"mx-3",icon:"mdi-delete",color:"red",size:"small"},null,8,["onClick"]),e(_,{onClick:b=>x(a),icon:"mdi-pencil",color:"info",size:"small"},null,8,["onClick"])])]))),128))])]),_:1})):(g(),C("p",Z,"لا توجد اي بيانات"))]),_:1})}}};export{Ve as default};
