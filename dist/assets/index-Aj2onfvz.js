import{_ as J}from"./imageInput-C7eY035c.js";import{s as A,n as U,f as L,d as M}from"./apiService-Q18LkiAH.js";import{W as j,F as $,r,H as k,I as S,v as l,L as n,O as b,M as a,P as o,J as R,q,S as N,K as H,R as K,Q as P}from"./index-DoUa79Mj.js";import{k as g}from"./VBtn-ByDIVYCH.js";import{e as f,V as B,d as Q}from"./VRow-DZDJQVib.js";import{V as W}from"./VForm-B_Ufe_Z7.js";import{V as v}from"./VTextField-DwDypr5x.js";import{V as O}from"./VDialog-D8YprR3A.js";import{_ as G}from"./ShowImages-i6Ak1e-R.js";import{_ as X}from"./ThemeSettings-LYEVB81B.js";import{V as Y}from"./VTable-B0P-F9Du.js";import{V as Z}from"./VContainer-D3lAfPRy.js";import"./VInput-BG1HDC-H.js";import"./index-CPodMjtC.js";import"./forwardRefs-ByVqR1CM.js";import"./VChip-mQXjCYxY.js";import"./VOverlay-DALfeHwa.js";import"./VSwitch-B4XaDZ4X.js";const ee={class:"ma-5"},le={__name:"CredentialForm",emits:["runItems"],setup(z,{expose:h,emit:F}){const{xs:x}=j(),I=$(),y=F,_=r(!1),s=r({}),u=r({}),i=r({}),d=r({});function w(){u.value={ar:"",en:""},i.value={ar:"",en:""},d.value={ar:"",en:""},s.value={credential_id:"",issue_date:"",expiry_date:!1,id:null},_.value=!1,y("runItems")}function D(m){const t=new FormData;t.append("name",JSON.stringify(u.value)),t.append("issuer",JSON.stringify(i.value)),t.append("description",JSON.stringify(d.value)),t.append("credential_id",s.value.credential_id),t.append("issue_date",s.value.issue_date),t.append("expiry_date",s.value.expiry_date||""),t.append("user_id",I.user.id),m.length&&m.forEach(V=>{t.append("photos[]",V,V.name)}),s.value.id&&t.append("_method","put"),A("credentials",t,s.value.id).then(V=>{s.value=V.data,y("runItems"),w()})}const C=r(null),c=()=>{if(!u.value.ar&&!u.value.en){U("حقل الاسم مطلوب عربي او انجليزي");return}if(!i.value.ar&&!i.value.en){U("حقل اسم المنظمة مطلوب عربي او انجليزي");return}if(!s.value.issue_date){U("حقل تاريخ الاصدار مطلوب ");return}C.value&&C.value.compressImages()},p=(m={})=>{Object.keys(m).length!==0&&(u.value=m.name,i.value=m.issuer,d.value=m.description),_.value=!0,s.value=m};return h({addNew:p}),(m,t)=>{const V=J;return k(),S("div",null,[l(f,{cols:"auto"},{default:n(()=>[l(g,{onClick:t[0]||(t[0]=e=>p()),icon:"mdi-plus",color:"success",size:"small",to:""})]),_:1}),l(O,{class:"text-center",modelValue:_.value,"onUpdate:modelValue":t[10]||(t[10]=e=>_.value=e),"max-width":"900",fullscreen:R(x)},{default:n(()=>[l(B,{class:"pa-5"},{actions:n(()=>[l(g,{onClick:w},{default:n(()=>[b(" اغلاق ")]),_:1}),l(g,{onClick:c},{default:n(()=>[b(" موافق ")]),_:1})]),default:n(()=>[a("h2",ee,o(s.value.id?"تعديل ":" اضافة "),1),l(W,null,{default:n(()=>[l(Q,null,{default:n(()=>[l(f,{cols:"12",md:"6"},{default:n(()=>[l(v,{modelValue:u.value.ar,"onUpdate:modelValue":t[1]||(t[1]=e=>u.value.ar=e),label:" الاسم "},null,8,["modelValue"])]),_:1}),l(f,{cols:"12",md:"6"},{default:n(()=>[l(v,{modelValue:u.value.en,"onUpdate:modelValue":t[2]||(t[2]=e=>u.value.en=e),label:"Name"},null,8,["modelValue"])]),_:1}),l(f,{cols:"12",md:"6"},{default:n(()=>[l(v,{modelValue:i.value.ar,"onUpdate:modelValue":t[3]||(t[3]=e=>i.value.ar=e),label:" اسم المنظمة "},null,8,["modelValue"])]),_:1}),l(f,{cols:"12",md:"6"},{default:n(()=>[l(v,{modelValue:i.value.en,"onUpdate:modelValue":t[4]||(t[4]=e=>i.value.en=e),label:"Issuer"},null,8,["modelValue"])]),_:1}),l(f,{cols:"12",md:"6"},{default:n(()=>[l(v,{modelValue:d.value.ar,"onUpdate:modelValue":t[5]||(t[5]=e=>d.value.ar=e),label:" الوصف "},null,8,["modelValue"])]),_:1}),l(f,{cols:"12",md:"6"},{default:n(()=>[l(v,{modelValue:d.value.en,"onUpdate:modelValue":t[6]||(t[6]=e=>d.value.en=e),label:"Description"},null,8,["modelValue"])]),_:1}),l(f,{cols:"12",md:"6"},{default:n(()=>[l(v,{modelValue:s.value.credential_id,"onUpdate:modelValue":t[7]||(t[7]=e=>s.value.credential_id=e),label:"الرقم التعريفي"},null,8,["modelValue"])]),_:1}),l(f,{cols:"12",md:"6"},{default:n(()=>[l(v,{type:"date",modelValue:s.value.issue_date,"onUpdate:modelValue":t[8]||(t[8]=e=>s.value.issue_date=e),label:"تاريخ الإصدار  "},null,8,["modelValue"])]),_:1}),l(f,{cols:"12",md:"6"},{default:n(()=>[l(v,{type:"date",modelValue:s.value.expiry_date,"onUpdate:modelValue":t[9]||(t[9]=e=>s.value.expiry_date=e),label:"تاريخ الانتهاء"},null,8,["modelValue"])]),_:1}),l(V,{ref_key:"imageInputRef",ref:C,onSaveCompressedImages:D},null,512)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"])])}}},te=a("h2",{class:"ma-5"},"هل تريد حذف العنصر بالفعل",-1),ae=a("thead",null,[a("tr",null,[a("th",{class:"text-center"},"#"),a("th",{class:"text-center"},"الاسم"),a("th",{class:"text-center"},"name"),a("th",{class:"text-center"},"اسم المنظمة"),a("th",{class:"text-center"},"issuer"),a("th",{class:"text-center"},"الوصف"),a("th",{class:"text-center"},"Description"),a("th",{class:"text-center"},"تاريخ الإصدار"),a("th",{class:"text-center"},"تاريخ انتهاء"),a("th",{class:"text-center"},"الرقم التعريفي للشهادة"),a("th",{class:"text-center"},"صورة"),a("th",{class:"text-center"},"تاريخ الإنشاء"),a("th",{class:"text-center sticky-column"},". . .")])],-1),ne={class:"sticky-column"},se={key:2,class:"text-alert"},Ce={__name:"index",setup(z){const h=$(),F=r(null),x=r(!1),I=r([]),y=r(""),_=r(null);function s(){_.value?_.value.opendialogThemeForm():console.error("opendialogThemeForm is not a function")}const u=r(null),i=c=>{u.value.opaenDialog(c)};q(()=>{d()});function d(){h.loadengApi=!0,L("credentials").then(c=>{I.value=c.data,y.value=""})}function w(c){x.value=!0,y.value=c}function D(){h.loadengApi=!0,M("credentials/delete",{id:[y.value.id]}).then(()=>{d(),x.value=!1})}const C=c=>{var p;(p=F.value)==null||p.addNew(c)};return(c,p)=>{const m=X,t=G,V=le;return k(),N(Z,null,{default:n(()=>[l(O,{class:"text-center",modelValue:x.value,"onUpdate:modelValue":p[1]||(p[1]=e=>x.value=e),"max-width":"400",persistent:""},{default:n(()=>[l(B,{class:"pa-5"},{default:n(()=>[te,l(g,{class:"ma-1",onClick:D},{default:n(()=>[b(" موافق ")]),_:1}),l(g,{class:"ma-1",onClick:p[0]||(p[0]=e=>x.value=!1)},{default:n(()=>[b(" اغلاق ")]),_:1})]),_:1})]),_:1},8,["modelValue"]),R(h).user?(k(),N(m,{key:0,ref_key:"dialogThemeForm",ref:_,detTheme:{nameEn:"credentials",nameAr:"الشهادات"},onClick:s},null,512)):H("",!0),l(t,{ref_key:"isShowImage",ref:u,onRunItems:d},null,512),l(V,{ref_key:"itemForm",ref:F,onRunItems:d},null,512),I.value.length>0?(k(),N(Y,{key:1,style:{"white-space":"nowrap"},dir:"rtl",class:"h"},{default:n(()=>[ae,a("tbody",null,[(k(!0),S(P,null,K(I.value,(e,E)=>(k(),S("tr",{key:e.id},[a("td",null,o(E+1),1),a("td",null,o(e.name.ar),1),a("td",null,o(e.name.en),1),a("td",null,o(e.issuer.ar),1),a("td",null,o(e.issuer.en),1),a("td",null,o(e.description.ar),1),a("td",null,o(e.description.en),1),a("td",null,o(e.issue_date),1),a("td",null,o(e.expiry_date),1),a("td",null,o(e.credential_id),1),a("td",null,o(e.image),1),a("td",null,o(e.created_at),1),a("td",ne,[l(g,{onClick:T=>i(e.photos),icon:"mdi-image-edit-outline",color:"info",size:"small"},null,8,["onClick"]),l(g,{onClick:T=>w(e),class:"mx-3",icon:"mdi-delete",color:"red",size:"small"},null,8,["onClick"]),l(g,{onClick:T=>C(e),icon:"mdi-pencil",color:"info",size:"small"},null,8,["onClick"])])]))),128))])]),_:1})):(k(),S("p",se,"لا توجد اي بيانات"))]),_:1})}}};export{Ce as default};
