import{_ as Y}from"./ThemeSettings-B0CJeFKE.js";import{_ as Z}from"./Breadcrumbs-ChurXzur.js";import{U as q,r as p,c as G,z as H,a4 as b,W as o,a1 as m,Y as a,m as s,Z as c,_ as r,a6 as u,$ as n,a0 as F,X as f,a3 as J,O as K,ak as A,a7 as Q}from"./index-C8Eiwxo8.js";import{b as U,g as ee,c as O,e as S,d as B,a as j}from"./VRow-MeymytPm.js";import{A as v}from"./VGrid-DwROuQKg.js";import{V as D}from"./VDialog-DX5GdEP7.js";import{V as ae}from"./VTable-BYmhpZHr.js";import{V as te}from"./VContainer-BQ31c_MB.js";import"./apiService-D1ZfLmBJ.js";import"./notifyService-CX9qO8sj.js";import"./VTextField-D62vwq5h.js";import"./VInput-C1VPyu_K.js";import"./VLabel-DFvOx4Z2.js";import"./VForm-BfSbur1M.js";import"./VSwitch-Dwge6PYe.js";import"./VSelectionControl-z3OfWIix.js";const le=["href"],oe=n("br",null,null,-1),se=["href"],ne=n("hr",{class:"ma-2"},null,-1),re=n("h2",{class:"ma-5"},"هل تريد حذف العنصر بالفعل",-1),ue=n("thead",null,[n("tr",null,[n("th",{class:"text-center"},"#"),n("th",{class:"text-center"},"الاسم"),n("th",{class:"text-center"},"الموضوع"),n("th",{class:"text-center"},"تاريخ الإنشاء"),n("th",{class:"text-center"})])],-1),ce=["onClick"],de=["onClick"],ie=["onClick"],me=["onClick"],_e=["onClick"],fe={key:1,class:"text-alert mt-10"},pe={key:2,class:"text-alert mt-10"},Ue={__name:"index",setup(ve){const _=q(),N=l=>{A.success(l,{theme:"colored",position:A.POSITION.TOP_LEFT})},T=l=>{A.error(l,{theme:"colored",position:A.POSITION.TOP_LEFT})},k=p(!1),g=p(!1),i=p({}),y=p([]),C=G(()=>y.value.filter(l=>l.read==="0")),t=p(""),h=p(!0);function E(l){k.value=!0,t.value=l}H(()=>{$()});function z(){h.value=!1,i.value=y.value}function w(){h.value=!0,console.log(C.value),i.value=C.value}function V(l){if(t.value=l,console.log(t.value),console.log(typeof l.read),l.read==="0"){console.log("run updateItems"),b.put(`contacts/${l.id}`,{read:"1"}).then(()=>{y.value=y.value.map(d=>d.id===l.id?{...d,read:"1"}:d),i.value=C.value,_.user.unread_contacts_count-=1,g.value=!0}).catch(()=>{T("هناك خطا ما حاول مره اخري")});return}g.value=!0}function $(){_.loadengApi=!0,b.get("contacts",i.value).then(l=>{i.value=l.data.data,y.value=l.data.data,w(),_.loadengApi=!1,t.value=""}).catch(()=>{T("هناك خطا ما حاول مره اخري")})}function P(){_.loadengApi=!0,b.get("contacts-mark-all-read").then(()=>{_.user.unread_contacts_count=0,$()}).catch(()=>{T("هناك خطا ما حاول مره اخري")})}const I=p(null);function L(){I.value?I.value.opendialogThemeForm():console.error("opendialogThemeForm is not a function")}function M(){_.loadengApi=!0,b.post("contacts/delete",{id:[t.value.id]}).then(()=>{$(),k.value=!1,_.loadengApi=!1,N(" تم الحذف")}).catch(l=>{T(l.response.data.message)})}return(l,d)=>{const R=Z,W=Y;return o(),m(te,null,{default:a(()=>[s(R),s(D,{class:"text-center",modelValue:g.value,"onUpdate:modelValue":d[1]||(d[1]=e=>g.value=e),"max-width":"600",persistent:""},{default:a(()=>[s(U,{class:"pa-5"},{default:a(()=>[s(ee,{class:"pa-1"},{default:a(()=>[t.value.name.ar?(o(),m(O,{key:0},{default:a(()=>[c(r(t.value.name.ar),1)]),_:1})):u("",!0),t.value.name.en?(o(),m(O,{key:1},{default:a(()=>[c(r(t.value.name.en),1)]),_:1})):u("",!0),t.value.subject.ar?(o(),m(S,{key:2},{default:a(()=>[c(r(t.value.subject.ar),1)]),_:1})):u("",!0),t.value.subject.en?(o(),m(S,{key:3},{default:a(()=>[c(r(t.value.subject.en),1)]),_:1})):u("",!0),n("a",{href:"mailto:"+t.value.email},r(t.value.email),9,le),oe,n("a",{href:"tel:"+t.value.phone},r(t.value.phone),9,se)]),_:1}),t.value.message.ar?(o(),m(B,{key:0,class:"pa-2"},{default:a(()=>[c(r(t.value.message.ar),1)]),_:1})):u("",!0),t.value.message.en?(o(),m(B,{key:1,class:"pa-2"},{default:a(()=>[c(r(t.value.message.en),1)]),_:1})):u("",!0),s(S,null,{default:a(()=>[c(r(t.value.created_at),1)]),_:1}),ne,s(v,{class:"ma-1",onClick:d[0]||(d[0]=e=>g.value=!1)},{default:a(()=>[c(" موافق ")]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(D,{class:"text-center",modelValue:k.value,"onUpdate:modelValue":d[3]||(d[3]=e=>k.value=e),"max-width":"400",persistent:""},{default:a(()=>[s(U,{class:"pa-5"},{default:a(()=>[re,s(v,{class:"ma-1",onClick:M},{default:a(()=>[c(" موافق ")]),_:1}),s(v,{class:"ma-1",onClick:d[2]||(d[2]=e=>k.value=!1)},{default:a(()=>[c(" اغلاق ")]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(j,{col:"12"},{default:a(()=>[F(_).user?(o(),m(W,{key:0,ref_key:"dialogThemeForm",ref:I,detTheme:{nameEn:"contacts",nameAr:"الرسائل"},onClick:L},null,512)):u("",!0)]),_:1}),s(j,{col:"12"},{default:a(()=>[s(v,{onClick:P,disabled:F(C).length<=0,color:F(C).length>0?"primary":"grey"},{default:a(()=>[c(" تعين الكل ك مقروء ")]),_:1},8,["disabled","color"])]),_:1}),s(j,null,{default:a(()=>[s(v,{class:"ma-1",onClick:z,color:h.value?"primary":"grey"},{default:a(()=>[c(" عرض الكل ")]),_:1},8,["color"]),s(v,{class:"ma-1",onClick:w,color:h.value?"grey":"primary"},{default:a(()=>[c(" عرض الغير مقروء ")]),_:1},8,["color"])]),_:1}),i.value.length>0?(o(),m(ae,{key:0,style:{"white-space":"nowrap"},dir:"rtl",class:"h mt-10"},{default:a(()=>[ue,n("tbody",null,[(o(!0),f(K,null,J(i.value,(e,X)=>(o(),f("tr",{key:e.id,style:Q({color:e.read==="0"?"#2196F3":"",cursor:"pointer"})},[n("td",{onClick:x=>V(e)},r(X+1),9,ce),e.name.ar?(o(),f("td",{key:0,onClick:x=>V(e)},r(e.name.ar),9,de)):u("",!0),e.name.en?(o(),f("td",{key:1,onClick:x=>V(e)},r(e.name.en),9,ie)):u("",!0),e.subject.ar?(o(),f("td",{key:2,onClick:x=>V(e)},r(e.subject.ar),9,me)):u("",!0),e.subject.en?(o(),f("td",{key:3,onClick:x=>V(e)},r(e.subject.en),9,_e)):u("",!0),n("td",null,r(e.created_at),1),n("td",null,[s(v,{style:{"z-index":"100"},onClick:x=>E(e),class:"ml-3",icon:"mdi-delete",color:"red",size:"small"},null,8,["onClick"])])],4))),128))])]),_:1})):u("",!0),!h.value&&i.value.length<=0?(o(),f("p",fe,"لا توجد اي رسائل")):u("",!0),h.value&&i.value.length<=0?(o(),f("p",pe,"لا توجد أي رسائل غير مقروءة")):u("",!0)]),_:1})}}};export{Ue as default};
