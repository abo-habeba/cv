import{p as ye,h as we,u as Fe,c as M,r as _,s as Ne,w as Ce,q as ie,l as A,aj as Ie,A as ke,v as e,x as Q,F as O,_ as ne,a4 as De,ak as Ue,n as X,al as Se,b as Pe,a9 as Re,J as Y,L as I,M as $,P as o,S as k,V as z,O as L,Q as Z,T as re,X as Ae,a7 as ue,N as r,U as Ee,am as Be}from"./index-DlKBL2qu.js";import{I as He,i as Me,y as P,n as K,x as de}from"./VImg-DcZmsifI.js";import{c as Te,f as Oe,d as $e,e as ze,V as c,a as W,b as x}from"./VTextField-CxEEKvu9.js";import{V as ee,b as Le,a as Ge}from"./VCard-m6C5-n4u.js";import{V as me}from"./VForm-CJOChMRh.js";import{m as Je,u as je,V as se}from"./VInput-C6SAx-_Q.js";import{f as qe}from"./forwardRefs-CMpIl6yz.js";import{V as Qe,_ as Xe}from"./imageInput-B4Nf-p4H.js";import{V as ce}from"./VDialog-C0YE1RM1.js";import{a as Ke,s as We}from"./apiService-KVDbwELV.js";import{V as Ye,a as V}from"./VList-yuOfYqVA.js";import"./VChip-BufQQoh-.js";import"./VOverlay-5eQ9lqSx.js";import"./lazy-D9OsUp99.js";import"./ssrBoot-r_KuuS2j.js";const Ze=ye({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:l=>!isNaN(parseFloat(l))},maxRows:{type:[Number,String],validator:l=>!isNaN(parseFloat(l))},suffix:String,modelModifiers:Object,...Je(),...Te()},"VTextarea"),T=we()({name:"VTextarea",directives:{Intersect:He},inheritAttrs:!1,props:Ze(),emits:{"click:control":l=>!0,"mousedown:control":l=>!0,"update:focused":l=>!0,"update:modelValue":l=>!0},setup(l,w){let{attrs:F,emit:u,slots:d}=w;const m=Fe(l,"modelValue"),{isFocused:a,focus:g,blur:h}=je(l),R=M(()=>typeof l.counterValue=="function"?l.counterValue(m.value):(m.value||"").toString().length),D=M(()=>{if(F.maxlength)return F.maxlength;if(!(!l.counter||typeof l.counter!="number"&&typeof l.counter!="string"))return l.counter});function v(i,b){var p,y;!l.autofocus||!i||(y=(p=b[0].target)==null?void 0:p.focus)==null||y.call(p)}const f=_(),s=_(),t=Ne(""),n=_(),fe=M(()=>l.persistentPlaceholder||a.value||l.active);function G(){var i;n.value!==document.activeElement&&((i=n.value)==null||i.focus()),a.value||g()}function ve(i){G(),u("click:control",i)}function pe(i){u("mousedown:control",i)}function Ve(i){i.stopPropagation(),G(),X(()=>{m.value="",Se(l["onClick:clear"],i)})}function _e(i){var p;const b=i.target;if(m.value=b.value,(p=l.modelModifiers)!=null&&p.trim){const y=[b.selectionStart,b.selectionEnd];X(()=>{b.selectionStart=y[0],b.selectionEnd=y[1]})}}const U=_(),E=_(+l.rows),J=M(()=>["plain","underlined"].includes(l.variant));Ce(()=>{l.autoGrow||(E.value=+l.rows)});function S(){l.autoGrow&&X(()=>{if(!U.value||!s.value)return;const i=getComputedStyle(U.value),b=getComputedStyle(s.value.$el),p=parseFloat(i.getPropertyValue("--v-field-padding-top"))+parseFloat(i.getPropertyValue("--v-input-padding-top"))+parseFloat(i.getPropertyValue("--v-field-padding-bottom")),y=U.value.scrollHeight,B=parseFloat(i.lineHeight),j=Math.max(parseFloat(l.rows)*B+p,parseFloat(b.getPropertyValue("--v-input-control-height"))),q=parseFloat(l.maxRows)*B+p||1/0,C=Re(y??0,j,q);E.value=Math.floor((C-p)/B),t.value=Pe(C)})}ie(S),A(m,S),A(()=>l.rows,S),A(()=>l.maxRows,S),A(()=>l.density,S);let N;return A(U,i=>{i?(N=new ResizeObserver(S),N.observe(U.value)):N==null||N.disconnect()}),Ie(()=>{N==null||N.disconnect()}),Me(()=>{const i=!!(d.counter||l.counter||l.counterValue),b=!!(i||d.details),[p,y]=ke(F),{modelValue:B,...j}=se.filterProps(l),q=Oe(l);return e(se,Q({ref:f,modelValue:m.value,"onUpdate:modelValue":C=>m.value=C,class:["v-textarea v-text-field",{"v-textarea--prefixed":l.prefix,"v-textarea--suffixed":l.suffix,"v-text-field--prefixed":l.prefix,"v-text-field--suffixed":l.suffix,"v-textarea--auto-grow":l.autoGrow,"v-textarea--no-resize":l.noResize||l.autoGrow,"v-input--plain-underlined":J.value},l.class],style:l.style},p,j,{centerAffix:E.value===1&&!J.value,focused:a.value}),{...d,default:C=>{let{id:H,isDisabled:le,isDirty:ae,isReadonly:ge,isValid:be}=C;return e($e,Q({ref:s,style:{"--v-textarea-control-height":t.value},onClick:ve,onMousedown:pe,"onClick:clear":Ve,"onClick:prependInner":l["onClick:prependInner"],"onClick:appendInner":l["onClick:appendInner"]},q,{id:H.value,active:fe.value||ae.value,centerAffix:E.value===1&&!J.value,dirty:ae.value||l.dirty,disabled:le.value,focused:a.value,error:be.value===!1}),{...d,default:xe=>{let{props:{class:te,...oe}}=xe;return e(O,null,[l.prefix&&e("span",{class:"v-text-field__prefix"},[l.prefix]),ne(e("textarea",Q({ref:n,class:te,value:m.value,onInput:_e,autofocus:l.autofocus,readonly:ge.value,disabled:le.value,placeholder:l.placeholder,rows:l.rows,name:l.name,onFocus:G,onBlur:h},oe,y),null),[[De("intersect"),{handler:v},null,{once:!0}]]),l.autoGrow&&ne(e("textarea",{class:[te,"v-textarea__sizer"],id:`${oe.id}-sizer`,"onUpdate:modelValue":he=>m.value=he,ref:U,readonly:!0,"aria-hidden":"true"},null),[[Ue,m.value]]),l.suffix&&e("span",{class:"v-text-field__suffix"},[l.suffix])])}})},details:b?C=>{var H;return e(O,null,[(H=d.details)==null?void 0:H.call(d,C),i&&e(O,null,[e("span",null,null),e(ze,{active:l.persistentCounter||a.value,value:R.value,max:D.value,disabled:l.disabled},d.counter)])])}:void 0})}),qe({},f,s,n)}}),el=Z("h2",{class:"ma-5"},re("تعديل "),-1),ll={__name:"UserForm",emits:["runItems"],setup(l,{expose:w,emit:F}){const u=Y(),d=_(!1),m=_(null),a=_({}),g=_(null);ie(()=>{a.value=u.user,g.value=u.user.profile_image});const h=s=>{ue.error(s,{theme:"colored",position:ue.POSITION.TOP_LEFT})};function R(){d.value=!1}const D=()=>{const s=m.value;if(s){const t=new FileReader;t.onload=n=>{g.value=n.target.result},t.readAsDataURL(s)}else g.value=null};function v(){u.loadengApi=!0;const s=new FormData;s.append("first_name",JSON.stringify(a.value.first_name)),s.append("last_name",JSON.stringify(a.value.last_name)),s.append("address",JSON.stringify(a.value.address)),s.append("bio_ar",a.value.bio_ar),s.append("bio_en",a.value.bio_en),s.append("about_ar",a.value.about_ar),s.append("about_en",a.value.about_en),s.append("position",JSON.stringify(a.value.position)),s.append("email",a.value.email),s.append("phone",a.value.phone),m.value&&s.append("profile_image",m.value),s.append("_method","put"),Ae.post(`users/${a.value.id}`,s).then(t=>{u.fetchUser().then(()=>{u.loadengApi=!1})}).catch(t=>{u.loadengApi=!1,h("هناك خطا ما حاول مره اخري")})}return w({dialogForm:()=>{d.value=!0}}),(s,t)=>(I(),$("div",null,[e(c,{cols:"auto"},{default:o(()=>[e(P,{class:"ma-1",color:"success"},{default:o(()=>[k(" تعديل البيانات "),e(K,{icon:"mdi-square-edit-outline",end:""})]),_:1})]),_:1}),e(ce,{class:"text-center",modelValue:d.value,"onUpdate:modelValue":t[15]||(t[15]=n=>d.value=n),"max-width":"900",persistent:""},{default:o(()=>[e(ee,{class:"pa-5"},{actions:o(()=>[e(P,{onClick:R},{default:o(()=>[k(" اغلاق ")]),_:1}),e(P,{onClick:v},{default:o(()=>[k(" موافق ")]),_:1})]),default:o(()=>[el,e(me,null,{default:o(()=>[e(W,null,{default:o(()=>[e(c,{cols:"12",md:"6"},{default:o(()=>[e(x,{modelValue:a.value.first_name.ar,"onUpdate:modelValue":t[0]||(t[0]=n=>a.value.first_name.ar=n),label:" الاسم الاول "},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",md:"6"},{default:o(()=>[e(x,{modelValue:a.value.first_name.en,"onUpdate:modelValue":t[1]||(t[1]=n=>a.value.first_name.en=n),label:"First Name"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",md:"6"},{default:o(()=>[e(x,{modelValue:a.value.last_name.ar,"onUpdate:modelValue":t[2]||(t[2]=n=>a.value.last_name.ar=n),label:" الاسم الاخير "},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",md:"6"},{default:o(()=>[e(x,{modelValue:a.value.last_name.en,"onUpdate:modelValue":t[3]||(t[3]=n=>a.value.last_name.en=n),label:" Last Name"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",md:"6"},{default:o(()=>[e(x,{modelValue:a.value.address.ar,"onUpdate:modelValue":t[4]||(t[4]=n=>a.value.address.ar=n),label:" العنوان "},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",md:"6"},{default:o(()=>[e(x,{modelValue:a.value.address.en,"onUpdate:modelValue":t[5]||(t[5]=n=>a.value.address.en=n),label:" Address"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",md:"6"},{default:o(()=>[e(x,{modelValue:a.value.position.ar,"onUpdate:modelValue":t[6]||(t[6]=n=>a.value.position.ar=n),label:" الوظيفة "},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",md:"6"},{default:o(()=>[e(x,{modelValue:a.value.position.en,"onUpdate:modelValue":t[7]||(t[7]=n=>a.value.position.en=n),label:" Position"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",md:"6"},{default:o(()=>[e(T,{dir:"rtl",style:{direction:"rtl","text-align":"right","unicode-bidi":"bidi-override"},modelValue:a.value.bio_ar,"onUpdate:modelValue":t[8]||(t[8]=n=>a.value.bio_ar=n),label:" نبذه عنك "},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",md:"6"},{default:o(()=>[e(T,{modelValue:a.value.bio_en,"onUpdate:modelValue":t[9]||(t[9]=n=>a.value.bio_en=n),label:" Bio"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",md:"6"},{default:o(()=>[e(T,{dir:"rtl",style:{direction:"rtl","text-align":"right","unicode-bidi":"bidi-override"},modelValue:a.value.about_ar,"onUpdate:modelValue":t[10]||(t[10]=n=>a.value.about_ar=n),label:"  عني "},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",md:"6"},{default:o(()=>[e(T,{modelValue:a.value.about_en,"onUpdate:modelValue":t[11]||(t[11]=n=>a.value.about_en=n),label:" About Me"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",md:"6"},{default:o(()=>[e(x,{modelValue:a.value.email,"onUpdate:modelValue":t[12]||(t[12]=n=>a.value.email=n),label:" Email"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",md:"6"},{default:o(()=>[e(x,{modelValue:a.value.phone,"onUpdate:modelValue":t[13]||(t[13]=n=>a.value.phone=n),label:" Phone"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",md:"6"},{default:o(()=>[e(Qe,{modelValue:m.value,"onUpdate:modelValue":t[14]||(t[14]=n=>m.value=n),label:" الصورة الشخصيه ",accept:"image/*","prepend-icon":"mdi-camera",onChange:D},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",md:"6"},{default:o(()=>[g.value?(I(),z(de,{key:0,style:{margin:"auto"},src:g.value,"max-width":"200"},null,8,["src"])):L("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}},al=Z("h2",{class:"ma-5"},"صور الرئيسية",-1),tl={key:1,class:"text-alert"},ol=Z("h3",null,"يمكنك تحميل صوره او اكثر",-1),nl={__name:"HeroForm",emits:["runItems"],setup(l,{expose:w,emit:F}){const u=Y(),d=_(!1),m=v=>{Ke("photo",v).then(()=>{u.user.hero=u.user.hero.filter(f=>f.id!==v)})};function a(){d.value=!1}function g(v){const f=new FormData;f.append("user_id",u.user.id),v.length&&v.forEach(s=>{f.append("hero[]",s,s.name)}),f.append("_method","put"),We("users",f,u.user.id).then(s=>{u.user.hero=s.data.hero})}const h=_(null),R=()=>{h.value&&h.value.compressImages(5).then(v=>{g(v)}).catch(v=>{console.log("error ",v)})},D=()=>{d.value=!0};return w({openDialogShowHero:D}),(v,f)=>{const s=Xe;return I(),$("div",null,[e(c,{cols:"auto"},{default:o(()=>[e(P,{class:"ma-1",color:"info",onClick:f[0]||(f[0]=t=>D())},{default:o(()=>[k(" تعديل صور الرئيسية "),e(K,{icon:"mdi-image-outline",end:""})]),_:1})]),_:1}),e(ce,{style:{"z-index":"50"},class:"text-center",modelValue:d.value,"onUpdate:modelValue":f[1]||(f[1]=t=>d.value=t),"max-width":"900",persistent:""},{default:o(()=>[e(ee,{class:"pa-5"},{actions:o(()=>[e(P,{onClick:a},{default:o(()=>[k(" اغلاق ")]),_:1}),e(P,{onClick:R},{default:o(()=>[k(" موافق ")]),_:1})]),default:o(()=>[al,r(u).user.hero.length?(I(),z(W,{key:0,style:{"background-color":"#ada7a0","text-align":"center","overflow-x":"auto"}},{default:o(()=>[(I(!0),$(O,null,Ee(r(u).user.hero,t=>(I(),z(c,{key:t,class:"d-flex child-flex"},{default:o(()=>[e(de,{"min-width":"150px","max-width":"300px",src:t.path,"aspect-ratio":"1",class:"bg-grey-lighten-2",cover:""},{default:o(()=>[e(K,{onClick:Be(n=>m(t.id),["stop"]),class:"icon-delete-image",icon:"mdi-delete-outline"},null,8,["onClick"])]),_:2},1032,["src"])]),_:2},1024))),128))]),_:1})):L("",!0),r(u).user.hero.length?L("",!0):(I(),$("p",tl,"لا توجد صور")),e(me,null,{default:o(()=>[e(W,{class:"my-10"},{default:o(()=>[ol,e(s,{ref_key:"imageInputRef",ref:h,onSaveCompressedImages:g},null,512)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},hl={__name:"index",setup(l){const w=_(null),F=_(null),u=Y(),d=()=>{w.value.dialogForm()},m=()=>{F.value.openDialogShowHero()};return(a,g)=>{const h=ll;return r(u).loadengApi?L("",!0):(I(),z(Ge,{key:0,class:"user-info"},{default:o(()=>[e(h,{ref_key:"dialogItemForm",ref:w,onClick:d},null,512),e(nl,{ref_key:"dialogHeroForm",ref:F,onClick:m},null,512),e(ee,{title:(r(u).user.first_name.en||"N D")+" - "+(r(u).user.first_name.ar||"N D"),subtitle:r(u).user.email||"N D",class:"mt-1"},{default:o(()=>[e(Le,null,{default:o(()=>[k(re(r(u).user.phone),1)]),_:1}),e(Ye,null,{default:o(()=>[e(V,{class:"ma-2 pa-2",subtitle:r(u).user.first_name.en||"N D",title:"First Name (EN)"},null,8,["subtitle"]),e(V,{class:"ma-2 pa-2",subtitle:r(u).user.first_name.ar||"N D",title:"الاسم الاول (AR)"},null,8,["subtitle"]),e(V,{class:"ma-2 pa-2",subtitle:r(u).user.last_name.en||"N D",title:"Last Name (EN)"},null,8,["subtitle"]),e(V,{class:"ma-2 pa-2",subtitle:r(u).user.last_name.ar||"N D",title:"الاسم الاخير (AR)"},null,8,["subtitle"]),e(V,{class:"ma-2 pa-2",subtitle:r(u).user.address.en||"N D",title:"Address (EN)"},null,8,["subtitle"]),e(V,{class:"ma-2 pa-2",subtitle:r(u).user.address.ar||"N D",title:"العنوان (AR)"},null,8,["subtitle"]),e(V,{class:"ma-2 pa-2",subtitle:r(u).user.bio_en||"N D",title:"Bio (EN)"},null,8,["subtitle"]),e(V,{class:"ma-2 pa-2",subtitle:r(u).user.bio_ar||"N D",title:"نبذه عنك (AR)"},null,8,["subtitle"]),e(V,{class:"ma-2 pa-2",subtitle:r(u).user.about_en||"N D",title:"About Me (EN)"},null,8,["subtitle"]),e(V,{class:"ma-2 pa-2",subtitle:r(u).user.about_ar||"N D",title:" عني (AR)"},null,8,["subtitle"]),e(V,{class:"ma-2 pa-2",subtitle:r(u).user.position.en||"N D",title:"Position (EN)"},null,8,["subtitle"]),e(V,{class:"ma-2 pa-2",subtitle:r(u).user.position.ar||"N D",title:"الوظيفة (AR)"},null,8,["subtitle"]),e(V,{class:"ma-2 pa-2",subtitle:r(u).user.username||"N D",title:"User Name"},null,8,["subtitle"])]),_:1})]),_:1},8,["title","subtitle"])]),_:1}))}}};export{hl as default};
