import{_ as O}from"./ShowImages-CmSV2t2n.js";import{_ as A}from"./imageInput-BAGPHBaD.js";import{n as J,s as M,f as P,d as q}from"./apiService-B3runN_o.js";import{W as H,F as j,r as m,H as V,I as F,v as e,L as n,O as S,M as o,P as f,J as b,E as W,q as K,S as $,K as Q,R as G,Q as X}from"./index-DtQcfx8t.js";import{x as Y,w as g}from"./VLabel-CkSFNWB7.js";import{V as R,d as Z,e as y}from"./VRow-C2DIhZLJ.js";import{V as ee}from"./VForm-BtTEtaZn.js";import{V as C}from"./VTextField-Dci2uKgt.js";import{V as B}from"./VDialog-D50NuiFB.js";import{_ as te}from"./ThemeSettings-1gkEvBRP.js";import{_ as le}from"./Breadcrumbs-SXngTK1H.js";import{V as oe}from"./VTable-X8gfVJJS.js";import{V as ne}from"./VContainer-Ck0WAG_V.js";import"./VInput-BmQlCnqx.js";import"./index-bnlhJkJd.js";import"./VChip-Cl7VGUL9.js";import"./VSelectionControl-Fxt8wUfd.js";import"./VSwitch-CZDtR7Mt.js";const ae={class:"ma-5"},se={__name:"ProjectForm",emits:["runItems"],setup(E,{expose:w,emit:k}){const{xs:_}=H(),I=j(),h=k,c=m(!1),r=m({}),u=m({}),d=m({});function v(){u.value={ar:"",en:""},d.value={ar:"",en:""},r.value.id="",c.value=!1,h("runItems")}function D(l){return l.startsWith("https://")?l:"https://"+l}function T(l){const t=new FormData;t.append("title",JSON.stringify(u.value)),t.append("description",JSON.stringify(d.value)),t.append("url",D(r.value.url)),t.append("user_id",I.user.id),l.length&&l.forEach(p=>{t.append("photos[]",p,p.name)}),r.value.id&&t.append("_method","put"),M("projects",t,r.value.id).then(p=>{r.value=p.data,h("runItems"),v()})}const x=m(null),U=()=>{if(!u.value.ar&&!u.value.en){J("حقل العنوان مطلوب عربي او انجليزي");return}x.value&&x.value.compressImages().then(l=>{console.log(l),T(l)})},i=(l={})=>{Object.keys(l).length!==0&&(u.value=l.title,d.value=l.description),c.value=!0,r.value=l};return w({addNew:i}),(l,t)=>{const p=A;return V(),F("div",null,[e(Y,{onClick:t[0]||(t[0]=a=>i()),color:"info",size:"35",icon:"mdi-plus-outline"}),e(B,{class:"text-center",modelValue:c.value,"onUpdate:modelValue":t[6]||(t[6]=a=>c.value=a),"max-width":"900",fullscreen:b(_)},{default:n(()=>[e(R,{class:"pa-5"},{actions:n(()=>[e(g,{onClick:v},{default:n(()=>[S(" اغلاق ")]),_:1}),e(g,{onClick:U},{default:n(()=>[S(" موافق ")]),_:1})]),default:n(()=>[o("h2",ae,f(r.value.id?"تعديل ":" اضافة "),1),e(ee,null,{default:n(()=>[e(Z,null,{default:n(()=>[e(y,{cols:"12",md:"6"},{default:n(()=>[e(C,{modelValue:u.value.ar,"onUpdate:modelValue":t[1]||(t[1]=a=>u.value.ar=a),label:"العنوان"},null,8,["modelValue"])]),_:1}),e(y,{cols:"12",md:"6"},{default:n(()=>[e(C,{modelValue:u.value.en,"onUpdate:modelValue":t[2]||(t[2]=a=>u.value.en=a),label:"title"},null,8,["modelValue"])]),_:1}),e(y,{cols:"12",md:"6"},{default:n(()=>[e(C,{modelValue:d.value.ar,"onUpdate:modelValue":t[3]||(t[3]=a=>d.value.ar=a),label:"الوصف"},null,8,["modelValue"])]),_:1}),e(y,{cols:"12",md:"6"},{default:n(()=>[e(C,{modelValue:d.value.en,"onUpdate:modelValue":t[4]||(t[4]=a=>d.value.en=a),label:"description"},null,8,["modelValue"])]),_:1}),e(y,{cols:"12",md:"6"},{default:n(()=>[e(C,{modelValue:r.value.url,"onUpdate:modelValue":t[5]||(t[5]=a=>r.value.url=a),label:"URL"},null,8,["modelValue"])]),_:1}),e(p,{ref_key:"imageInputRef",ref:x,isMultiple:!0},null,512)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"])])}}},ue=o("h2",{class:"ma-5"},"هل تريد حذف العنصر بالفعل",-1),re=o("thead",null,[o("tr",null,[o("th",{class:"text-center"},"#"),o("th",{class:"text-center"},"العنوان"),o("th",{class:"text-center"},"title"),o("th",{class:"text-center"},"الوصف"),o("th",{class:"text-center"},"description"),o("th",{class:"text-center"},"URL"),o("th",{class:"text-center"},"تاريخ الانشاء"),o("th",{class:"text-center sticky-column"},". . .")])],-1),ie={class:"sticky-column"},me={key:1,class:"text-alert"},De={__name:"index",setup(E){const w=W(),k=j(),_=m(!1),I=m([]),h=m(""),c=m(null);function r(){c.value?c.value.opendialogThemeForm():console.error("opendialogThemeForm is not a function")}K(()=>{v()});const u=m(null),d=i=>{u.value.opaenDialog(i)};function v(){k.loadengApi=!0,P("projects").then(i=>{I.value=i.data,h.value=""})}function D(i){_.value=!0,h.value=i}function T(){k.loadengApi=!0,q("projects/delete",{id:[h.value.id]}).then(()=>{v(),_.value=!1})}const x=m(null),U=i=>{var l;(l=x.value)==null||l.addNew(i)};return(i,l)=>{const t=le,p=te,a=se,z=O;return V(),$(ne,null,{default:n(()=>[e(t),e(B,{class:"text-center",modelValue:_.value,"onUpdate:modelValue":l[1]||(l[1]=s=>_.value=s),"max-width":"400",persistent:""},{default:n(()=>[e(R,{class:"pa-5"},{default:n(()=>[ue,e(g,{class:"ma-1",onClick:T},{default:n(()=>[S(" موافق ")]),_:1}),e(g,{class:"ma-1",onClick:l[0]||(l[0]=s=>_.value=!1)},{default:n(()=>[S(" اغلاق ")]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(R,{"max-width":"500px",class:"text-center my-5 mx-auto",subtitle:b(w).meta.description,title:b(w).meta.title},{append:n(()=>[b(k).user?(V(),$(p,{key:0,ref_key:"dialogThemeForm",ref:c,detTheme:{nameEn:"projects",nameAr:"المشاريع"},onClick:r},null,512)):Q("",!0)]),prepend:n(()=>[e(a,{ref_key:"itemForm",ref:x,onRunItems:v},null,512)]),_:1},8,["subtitle","title"]),e(z,{ref_key:"isShowImage",ref:u,onRunItems:v},null,512),I.value.length>0?(V(),$(oe,{key:0,style:{"white-space":"nowrap"},dir:"rtl",class:"h"},{default:n(()=>[re,o("tbody",null,[(V(!0),F(X,null,G(I.value,(s,L)=>(V(),F("tr",{key:s.id},[o("td",null,f(L+1),1),o("td",null,f(s.title.ar),1),o("td",null,f(s.title.en),1),o("td",null,f(s.description.ar),1),o("td",null,f(s.description.en),1),o("td",null,f(s.url),1),o("td",null,f(s.created_at),1),o("td",ie,[e(g,{onClick:N=>d(s.photos),icon:"mdi-image-edit-outline",color:"info",size:"small"},null,8,["onClick"]),e(g,{onClick:N=>D(s),class:"mx-3",icon:"mdi-delete",color:"red",size:"small"},null,8,["onClick"]),e(g,{onClick:N=>U(s),icon:"mdi-square-edit-outline",color:"info",size:"small"},null,8,["onClick"])])]))),128))])]),_:1})):(V(),F("p",me,"لا توجد اي بيانات"))]),_:1})}}};export{De as default};
