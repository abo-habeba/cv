import{_ as R}from"./imageInput-BGdnDcNc.js";import{s as z,n as T,f as E,d as J}from"./apiService-CyNKS6-j.js";import{J as U,r as m,L as g,M as w,v as e,P as n,S,Q as t,T as f,q as O,V as D,U as A,F as L}from"./index-C-YAyiHt.js";import{y as v}from"./VImg-D2gUcr9h.js";import{V as k,a as M,b as I}from"./VTextField-BYTm96_n.js";import{V as $,a as j}from"./VCard-C4vh4eyS.js";import{V as q}from"./VForm-DVp8xh5D.js";import{V as N}from"./VDialog-DAlsG2lh.js";import{_ as P}from"./ShowImages-C8hFAa_R.js";import{V as Q}from"./VTable-DLTgQ1ac.js";import"./VInput-uQDXtyBX.js";import"./forwardRefs-D9-KQXH7.js";import"./VChip-DTUoDDOg.js";import"./VOverlay-BB7zGrVk.js";import"./lazy-COERbIqk.js";const G={class:"ma-5"},H={__name:"SkillsForm",emits:["runItems"],setup(B,{expose:h,emit:y}){const _=U(),p=m(!1),o=m({}),u=m({}),c=m({}),V=y;function C(){u.value={ar:"",en:""},c.value={ar:"",en:""},o.value.level="",o.value.id="",p.value=!1,V("runItems")}function b(d){const l=new FormData;l.append("name",JSON.stringify(u.value)),l.append("description",JSON.stringify(c.value)),l.append("level",o.value.level),l.append("user_id",_.user.id),d.length&&d.forEach(a=>{l.append("photos[]",a,a.name)}),o.value.id&&l.append("_method","put"),z("skills",l,o.value.id).then(a=>{o.value=a.data,V("runItems"),C()})}const x=m(null),r=()=>{if(!u.value.ar&&!u.value.en){T("حقل الاسم مطلوب عربي او انجليزي");return}x.value&&x.value.compressImages()},i=(d={})=>{Object.keys(d).length!==0&&(u.value=d.name,c.value=d.description),p.value=!0,o.value=d};return h({addNew:i}),(d,l)=>{const a=R;return g(),w("div",null,[e(k,{cols:"auto"},{default:n(()=>[e(v,{onClick:l[0]||(l[0]=s=>i()),icon:"mdi-plus",color:"success",size:"small",to:""})]),_:1}),e(N,{class:"text-center",modelValue:p.value,"onUpdate:modelValue":l[6]||(l[6]=s=>p.value=s),"max-width":"900",persistent:""},{default:n(()=>[e($,{class:"pa-5"},{actions:n(()=>[e(v,{onClick:C},{default:n(()=>[S(" اغلاق ")]),_:1}),e(v,{onClick:r},{default:n(()=>[S(" موافق ")]),_:1})]),default:n(()=>[t("h2",G,f(o.value.id?"تعديل ":" اضافة "),1),e(q,null,{default:n(()=>[e(M,null,{default:n(()=>[e(k,{cols:"12",md:"6"},{default:n(()=>[e(I,{modelValue:u.value.ar,"onUpdate:modelValue":l[1]||(l[1]=s=>u.value.ar=s),label:"الاسم"},null,8,["modelValue"])]),_:1}),e(k,{cols:"12",md:"6"},{default:n(()=>[e(I,{modelValue:u.value.en,"onUpdate:modelValue":l[2]||(l[2]=s=>u.value.en=s),label:"name"},null,8,["modelValue"])]),_:1}),e(k,{cols:"12",md:"6"},{default:n(()=>[e(I,{modelValue:c.value.ar,"onUpdate:modelValue":l[3]||(l[3]=s=>c.value.ar=s),label:"الوصف"},null,8,["modelValue"])]),_:1}),e(k,{cols:"12",md:"6"},{default:n(()=>[e(I,{modelValue:c.value.en,"onUpdate:modelValue":l[4]||(l[4]=s=>c.value.en=s),label:"description"},null,8,["modelValue"])]),_:1}),e(k,{cols:"12",md:"6"},{default:n(()=>[e(I,{modelValue:o.value.level,"onUpdate:modelValue":l[5]||(l[5]=s=>o.value.level=s),type:"number",label:"المستوي",rules:[s=>s>=1&&s<=100||"يجب أن يكون الرقم بين 1 الي 100"]},null,8,["modelValue","rules"])]),_:1}),e(a,{ref_key:"imageInputRef",ref:x,onSaveCompressedImages:b},null,512)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},K=t("h2",{class:"ma-5"},"هل تريد حذف العنصر بالفعل",-1),W=t("thead",null,[t("tr",null,[t("th",{class:"text-center"},"#"),t("th",{class:"text-center"},"الاسم"),t("th",{class:"text-center"},"name"),t("th",{class:"text-center"},"الوصف"),t("th",{class:"text-center"},"description"),t("th",{class:"text-center"},"المستوي"),t("th",{class:"text-center"},"تاريخ الانشا"),t("th",{class:"text-center sticky-column"},". . .")])],-1),X={class:"sticky-column"},Y={key:1,class:"text-alert"},fe={__name:"index",setup(B){const h=U(),y=m(null),_=m(!1),p=m([]),o=m(""),u=m(null),c=r=>{u.value.opaenDialog(r)};O(()=>{V()});function V(){h.loadengApi=!0,E("skills").then(r=>{p.value=r.data,o.value=""})}function C(r){_.value=!0,o.value=r}function b(){h.loadengApi=!0,J("skills/delete",{id:[o.value.id]}).then(()=>{V(),_.value=!1})}const x=r=>{var i;(i=y.value)==null||i.addNew(r)};return(r,i)=>{const d=P,l=H;return g(),D(j,null,{default:n(()=>[e(N,{class:"text-center",modelValue:_.value,"onUpdate:modelValue":i[1]||(i[1]=a=>_.value=a),"max-width":"400",persistent:""},{default:n(()=>[e($,{class:"pa-5"},{default:n(()=>[K,e(v,{class:"ma-1",onClick:b},{default:n(()=>[S(" موافق ")]),_:1}),e(v,{class:"ma-1",onClick:i[0]||(i[0]=a=>_.value=!1)},{default:n(()=>[S(" اغلاق ")]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(d,{ref_key:"isShowImage",ref:u,onRunItems:V},null,512),e(l,{ref_key:"itemForm",ref:y,onRunItems:V},null,512),p.value.length>0?(g(),D(Q,{key:0,style:{"white-space":"nowrap"},dir:"rtl",class:"h"},{default:n(()=>[W,t("tbody",null,[(g(!0),w(L,null,A(p.value,(a,s)=>(g(),w("tr",{key:s},[t("td",null,f(s+1),1),t("td",null,f(a.name.ar),1),t("td",null,f(a.name.en),1),t("td",null,f(a.description.ar),1),t("td",null,f(a.description.en),1),t("td",null,f(a.level),1),t("td",null,f(a.created_at),1),t("td",X,[e(v,{onClick:F=>c(a.photos),icon:"mdi-image-edit-outline",color:"info",size:"small"},null,8,["onClick"]),e(v,{onClick:F=>C(a),class:"mx-3",icon:"mdi-delete",color:"red",size:"small"},null,8,["onClick"]),e(v,{onClick:F=>x(a),icon:"mdi-pencil",color:"info",size:"small"},null,8,["onClick"])])]))),128))])]),_:1})):(g(),w("p",Y,"لا توجد اي بيانات"))]),_:1})}}};export{fe as default};
