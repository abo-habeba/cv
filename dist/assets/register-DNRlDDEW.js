import{p as F,a5 as R,m as U,h as j,u as M,c as b,j as J,B as Z,a6 as q,v as l,x as Q,J as X,r as p,q as G,M as H,P as r,L as P,S as g,V as K,O as W,Q as w,X as Y,_ as S}from"./index-BEXNIteJ.js";import{a as ee,V as ae}from"./VCard-C10ao8-l.js";import{a as te,V as le,b as m}from"./VTextField-B7H08bge.js";import{B as ne,z as oe,v as se,p as re,b as ie,c as de,d as ue,e as ce,g as me,A as ve,w as pe,r as fe,Z as ye,f as Ve,h as be,i as ge,j as _,t as A}from"./VBtn-Dop0qZJ9.js";import{m as ke,a as xe,c as Ce,V as Pe}from"./VIcon-CkkUeVrC.js";import"./VInput-DzCCT5tN.js";const we=ne("v-alert-title"),Se=["success","info","warning","error"],_e=F({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:R,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>Se.includes(e)},...ke(),...oe(),...se(),...re(),...ie(),...de(),...ue(),...xe(),...U(),...ce({variant:"flat"})},"VAlert"),h=j()({name:"VAlert",props:_e(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,i){let{emit:s,slots:a}=i;const d=M(e,"modelValue"),u=b(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),f=b(()=>({color:e.color??e.type,variant:e.variant})),{themeClasses:v}=J(e),{colorClasses:y,colorStyles:t,variantClasses:n}=me(f),{densityClasses:o}=ve(e),{dimensionStyles:B}=pe(e),{elevationClasses:T}=fe(e),{locationStyles:I}=ye(e),{positionClasses:$}=Ve(e),{roundedClasses:L}=be(e),{textColorClasses:z,textColorStyles:O}=Ce(Z(e,"borderColor")),{t:D}=q(),k=b(()=>({"aria-label":D(e.closeLabel),onClick(V){d.value=!1,s("click:close",V)}}));return()=>{const V=!!(a.prepend||u.value),N=!!(a.title||e.title),E=!!(a.close||e.closable);return d.value&&l(e.tag,{class:["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},v.value,y.value,o.value,T.value,$.value,L.value,n.value,e.class],style:[t.value,B.value,I.value,e.style],role:"alert"},{default:()=>{var x,C;return[ge(!1,"v-alert"),e.border&&l("div",{key:"border",class:["v-alert__border",z.value],style:O.value},null),V&&l("div",{key:"prepend",class:"v-alert__prepend"},[a.prepend?l(_,{key:"prepend-defaults",disabled:!u.value,defaults:{VIcon:{density:e.density,icon:u.value,size:e.prominent?44:28}}},a.prepend):l(Pe,{key:"prepend-icon",density:e.density,icon:u.value,size:e.prominent?44:28},null)]),l("div",{class:"v-alert__content"},[N&&l(we,{key:"title"},{default:()=>{var c;return[((c=a.title)==null?void 0:c.call(a))??e.title]}}),((x=a.text)==null?void 0:x.call(a))??e.text,(C=a.default)==null?void 0:C.call(a)]),a.append&&l("div",{key:"append",class:"v-alert__append"},[a.append()]),E&&l("div",{key:"close",class:"v-alert__close"},[a.close?l(_,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var c;return[(c=a.close)==null?void 0:c.call(a,{props:k.value})]}}):l(A,Q({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},k.value),null)])]}})}}}),he={id:"register"},Ae=w("div",{class:"text-subtitle-1 text-medium-emphasis d-flex align-center justify-space-between"},[w("a",{class:"text-caption text-decoration-none text-blue",href:"/login",rel:"noopener noreferrer"}," اذا كان لديك حساب ادخل من هنا")],-1),Oe={__name:"register",setup(e){const i=X(),s=p(!1),a=p({}),d=p(!1),u=p(`${window.location.origin}/`),f=[t=>!!t||"يرجى إدخال اسم المستخدم",t=>!t.includes(" ")||"يجب ألا يحتوي اسم المستخدم على مسافات ",t=>t===t.toLowerCase()||"يجب أن تكون جميع الحروف صغيرة ",t=>!/[{}|\\^[\]`"<>#/?]/.test(t)||'يجب ألا يحتوي اسم المستخدم على العلامات التالية: { } | \\ ^ [ ] ` " < > # / ؟',t=>/^[a-zA-Z]+$/.test(t)||"يجب أن يحتوي اسم المستخدم على أحرف انجليزية فقط"],v=t=>{S.error(t,{theme:"colored",position:S.POSITION.TOP_LEFT})};G(()=>{i.loadengApi=!1});function y(){d.value=!1,i.loadengApi=!0,Y.post("register",a.value).then(t=>{console.log(t),localStorage.setItem("token",t.data.token),localStorage.setItem("user",JSON.stringify(t.data.user)),i.loadengApi=!1,location.reload()}).catch(t=>{if(i.loadengApi=!1,console.log(t.response.data.errors),t.response.data.errors.username){t.response.data.errors.username[0]==="The username has already been taken."&&(d.value=!0,v("اسم المستخدم غير متاح استخدامة"));return}else v(t.response.data.message)})}return(t,n)=>(P(),H("div",he,[l(ee,null,{default:r(()=>[l(te,null,{default:r(()=>[l(le,{cols:"12",sm:"11",md:"8",lg:"6",xl:"6",class:"mx-auto"},{default:r(()=>[l(ae,{class:"register-box mx-auto pa-12 pb-8",elevation:"8","max-width":"448",rounded:"lg"},{default:r(()=>[l(h,{class:"mb-3",type:"warning",variant:"outlined"},{default:r(()=>[g(" هذا الاسم يستخدم في رابط المتصفح ")]),_:1}),l(m,{density:"compact",label:" اسم المستخدم ",prefix:u.value,"prepend-inner-icon":"mdi-web",variant:"outlined",modelValue:a.value.username,"onUpdate:modelValue":n[0]||(n[0]=o=>a.value.username=o),rules:f},null,8,["prefix","modelValue"]),d.value===!0?(P(),K(h,{key:0,class:"mb-3",type:"error",variant:"outlined"},{default:r(()=>[g(" الاسم مستخدم من قبل ")]),_:1})):W("",!0),l(m,{density:"compact",placeholder:"ادخل الايميل","prepend-inner-icon":"mdi-email-outline",variant:"outlined",modelValue:a.value.email,"onUpdate:modelValue":n[1]||(n[1]=o=>a.value.email=o)},null,8,["modelValue"]),l(m,{"append-inner-icon":s.value?"mdi-eye-off":"mdi-eye",type:s.value?"text":"password",density:"compact",placeholder:"ادخل كلمة المرور","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":n[2]||(n[2]=o=>s.value=!s.value),modelValue:a.value.password,"onUpdate:modelValue":n[3]||(n[3]=o=>a.value.password=o)},null,8,["append-inner-icon","type","modelValue"]),l(m,{"append-inner-icon":s.value?"mdi-eye-off":"mdi-eye",type:s.value?"text":"password",density:"compact",placeholder:" اعد كتابة كلمة المرور","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":n[4]||(n[4]=o=>s.value=!s.value),rules:[o=>o===a.value.password||"كلمة المرور غير متطابقتان"]},null,8,["append-inner-icon","type","rules"]),l(m,{density:"compact",label:" رقم الهاتف ",type:"number","prepend-inner-icon":"mdi-phone-outline",variant:"outlined",modelValue:a.value.phone,"onUpdate:modelValue":n[5]||(n[5]=o=>a.value.phone=o)},null,8,["modelValue"]),l(A,{onClick:y,class:"mb-8",color:"blue",size:"large",variant:"tonal",block:""},{default:r(()=>[g(" انشاء حساب ")]),_:1}),Ae]),_:1})]),_:1})]),_:1})]),_:1})]))}};export{Oe as default};
