import{p as Q,I as Z,m as H,g as K,h as G,f as S,j as W,t as X,u as Y,c as l,d as ee,E as te,r as f,x as ae,J as d,K as r,H as i,L as v,Q as le,F as P,R as h,V as A,N as T,S as ne,P as B,M as I}from"./index-TKAKwIDP.js";import{b as R}from"./route-block-B_A1xBdJ.js";import{V as oe}from"./VContainer-C44OOwED.js";import{a as se,V as re}from"./VRow-B893D1wj.js";import{F as ie,m as ue,P as de,v as ce,B as me,a as ve,i as pe,b as fe,c as ye,j as be,l as ge,Q as ke,w as Ve,D as xe,g as Ce,k as _e,e as we,f as Se,n as Pe,V as z,p as D,s as N,q as he}from"./VGrid-eYepT4wA.js";import{V as Ae}from"./VForm-CvfQ3TYF.js";import{V as y}from"./VTextField-CW1u6qvo.js";import"./VInput-CdCn7wfj.js";const Be=ie("v-alert-title"),Ie=["success","info","warning","error"],Te=Q({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:Z,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>Ie.includes(e)},...ue(),...de(),...ce(),...me(),...ve(),...pe(),...fe(),...ye(),...H(),...be({variant:"flat"})},"VAlert"),g=K()({name:"VAlert",props:Te(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,c){let{emit:s,slots:a}=c;const b=G(e,"modelValue"),m=S(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),u=S(()=>({color:e.color??e.type,variant:e.variant})),{themeClasses:k}=W(e),{colorClasses:V,colorStyles:x,variantClasses:C}=ge(u),{densityClasses:_}=ke(e),{dimensionStyles:t}=Ve(e),{elevationClasses:o}=xe(e),{locationStyles:n}=Ce(e),{positionClasses:E}=_e(e),{roundedClasses:U}=we(e),{textColorClasses:j,textColorStyles:M}=Se(X(e,"borderColor")),{t:O}=Y(),$=S(()=>({"aria-label":O(e.closeLabel),onClick(w){b.value=!1,s("click:close",w)}}));return()=>{const w=!!(a.prepend||m.value),q=!!(a.title||e.title),J=!!(a.close||e.closable);return b.value&&l(e.tag,{class:["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},k.value,V.value,_.value,o.value,E.value,U.value,C.value,e.class],style:[x.value,t.value,n.value,e.style],role:"alert"},{default:()=>{var F,L;return[Pe(!1,"v-alert"),e.border&&l("div",{key:"border",class:["v-alert__border",j.value],style:M.value},null),w&&l("div",{key:"prepend",class:"v-alert__prepend"},[a.prepend?l(D,{key:"prepend-defaults",disabled:!m.value,defaults:{VIcon:{density:e.density,icon:m.value,size:e.prominent?44:28}}},a.prepend):l(z,{key:"prepend-icon",density:e.density,icon:m.value,size:e.prominent?44:28},null)]),l("div",{class:"v-alert__content"},[q&&l(Be,{key:"title"},{default:()=>{var p;return[((p=a.title)==null?void 0:p.call(a))??e.title]}}),((F=a.text)==null?void 0:F.call(a))??e.text,(L=a.default)==null?void 0:L.call(a)]),a.append&&l("div",{key:"append",class:"v-alert__append"},[a.append()]),J&&l("div",{key:"close",class:"v-alert__close"},[a.close?l(D,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var p;return[(p=a.close)==null?void 0:p.call(a,{props:$.value})]}}):l(N,ee({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},$.value),null)])]}})}}}),$e={id:"register"},Fe={key:0},Le={key:1},Re={key:2},De=T("div",{class:"text-subtitle-1 ma-5 text-medium-emphasis d-flex align-center justify-space-between"},[T("a",{class:"text-caption text-decoration-none text-blue",href:"/login",rel:"noopener noreferrer"}," اذا كان لديك حساب ادخل من هنا")],-1),ze={class:"ma-1 text-blue text-decoration-none",href:"/",rel:"noopener noreferrer"},Ne={__name:"register",setup(e){const c=te(),s=f(!1),a=f({}),b=f(!1),m=f(`${window.location.hostname}/`),u=f({}),k=[t=>!!t||"يرجى إدخال اسم المستخدم",t=>!t.includes(" ")||"يجب ألا يحتوي اسم المستخدم على مسافات ",t=>t===t.toLowerCase()||"يجب أن تكون جميع الحروف صغيرة ",t=>!/[{}|\\^[\]`"<>#/?]/.test(t)||'يجب ألا يحتوي اسم المستخدم على العلامات التالية: { } | \\ ^ [ ] ` " < > # / ؟',t=>/^[a-zA-Z]+$/.test(t)||"يجب أن يحتوي اسم المستخدم على أحرف انجليزية فقط"];function V(t){return!(!t.includes(" ")&&t===t.toLowerCase()&&!/[{}|\\^[\]`"<>#/?]/.test(t)&&/^[a-zA-Z]+$/.test(t))}const x=[t=>!!t||"يرجى إدخال الايميل"],C=[t=>!!t||"يرجى إدخال كلمة السر",t=>t.length>=8||"يجب أن تكون كلمة المرور مكونة من 8 أحرف على الأقل"];ae(()=>{c.loadengApi=!1});function _(){if(V(a.value.username)){const t=document.querySelector(".v-messages__message"),o=window.getComputedStyle(t).backgroundColor;t.style.backgroundColor="#fb564d",setTimeout(()=>{t.style.backgroundColor=o},500);return}b.value=!1,c.loadengApi=!0,ne.post("register",a.value).then(t=>{console.log(t),localStorage.setItem("token",t.data.token),localStorage.setItem("user",JSON.stringify(t.data.user)),c.loadengApi=!1,location.reload()}).catch(t=>{u.value=t.response.data.errors,c.loadengApi=!1,console.log(t.response.data)})}return(t,o)=>(i(),d("div",$e,[l(oe,null,{default:r(()=>[l(se,null,{default:r(()=>[l(re,{cols:"12",xs:"12",sm:"11",md:"8",lg:"6",xl:"6",class:"mx-auto"},{default:r(()=>[l(he,{class:"elevation-0 register-box mx-auto pa-1 pb-8","max-width":"448",rounded:"sm"},{default:r(()=>[l(g,{class:"mb-3",type:"warning",variant:"outlined"},{default:r(()=>[v(" هذا الاسم يستخدم في رابط المتصفح ")]),_:1}),l(Ae,{"fast-fail":"",onSubmit:o[6]||(o[6]=le(()=>{},["prevent"]))},{default:r(()=>[l(y,{density:"compact",label:" اسم المستخدم ",prefix:m.value,"prepend-inner-icon":"mdi-web",variant:"outlined",modelValue:a.value.username,"onUpdate:modelValue":o[0]||(o[0]=n=>a.value.username=n),rules:k},null,8,["prefix","modelValue"]),u.value.username?(i(),d("div",Fe,[(i(!0),d(P,null,h(u.value.username,n=>(i(),B(g,{key:n,class:"mb-3",type:"error",variant:"outlined"},{default:r(()=>[v(I(n),1)]),_:2},1024))),128))])):A("",!0),l(y,{density:"compact",placeholder:"ادخل الايميل","prepend-inner-icon":"mdi-email-outline",variant:"outlined",modelValue:a.value.email,"onUpdate:modelValue":o[1]||(o[1]=n=>a.value.email=n),rules:x},null,8,["modelValue"]),u.value.email?(i(),d("div",Le,[(i(!0),d(P,null,h(u.value.email,n=>(i(),B(g,{key:n,class:"mb-3",type:"error",variant:"outlined"},{default:r(()=>[v(I(n),1)]),_:2},1024))),128))])):A("",!0),l(y,{"append-inner-icon":s.value?"mdi-eye-off":"mdi-eye",type:s.value?"text":"password",density:"compact",placeholder:"ادخل كلمة المرور","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":o[2]||(o[2]=n=>s.value=!s.value),modelValue:a.value.password,"onUpdate:modelValue":o[3]||(o[3]=n=>a.value.password=n),rules:C},null,8,["append-inner-icon","type","modelValue"]),l(y,{"append-inner-icon":s.value?"mdi-eye-off":"mdi-eye",type:s.value?"text":"password",density:"compact",placeholder:" اعد كتابة كلمة المرور","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":o[4]||(o[4]=n=>s.value=!s.value),rules:[n=>n===a.value.password||"كلمة المرور غير متطابقتان"]},null,8,["append-inner-icon","type","rules"]),l(y,{density:"compact",label:" رقم الهاتف ",type:"number","prepend-inner-icon":"mdi-phone-outline",variant:"outlined",modelValue:a.value.phone,"onUpdate:modelValue":o[5]||(o[5]=n=>a.value.phone=n)},null,8,["modelValue"]),u.value.phone?(i(),d("div",Re,[(i(!0),d(P,null,h(u.value.phone,n=>(i(),B(g,{key:n,class:"mb-3",type:"error",variant:"outlined"},{default:r(()=>[v(I(n),1)]),_:2},1024))),128))])):A("",!0),l(N,{type:"submit",onClick:_,class:"mb-8",color:"blue",size:"large",variant:"tonal",block:""},{default:r(()=>[v(" انشاء حساب ")]),_:1})]),_:1}),De,T("a",ze,[v(" الرئيسية "),l(z,{icon:"mdi-home"})])]),_:1})]),_:1})]),_:1})]),_:1})]))}};typeof R=="function"&&R(Ne);export{Ne as default};
