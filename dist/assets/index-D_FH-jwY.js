import{_ as j}from"./imageInput-CnZecyl4.js";import{s as z,n as B,f as L,d as T}from"./apiService-DJhwrnjc.js";import{J as b,r as d,L as h,M as w,v as t,P as a,S,Q as l,T as f,q as E,V as $,U as J,F as O}from"./index-BMIPE2aT.js";import{z as v}from"./forwardRefs-b5Bbg4e-.js";import{a as g,V as P}from"./VRow-CPMn7zse.js";import{V as D}from"./VGrid-sGql2Pfr.js";import{V as A}from"./VForm-B4fBCeMx.js";import{V as k}from"./VTextField-CWNyIJf5.js";import{V as N}from"./VDialog-BTQm1QC_.js";import{_ as M}from"./ShowImages-TIre7iu3.js";import{V as q}from"./VTable-8HK_GobL.js";import{V as H}from"./VContainer-C3HaojmF.js";import"./VInput-BM8s1tyJ.js";import"./index-CT7Bpyv8.js";import"./VChip-BSvqXooa.js";import"./VOverlay-C4u9Ip57.js";const Q={class:"ma-5"},W={__name:"ProjectForm",emits:["runItems"],setup(R,{expose:x,emit:I}){const _=b(),V=I,c=d(!1),n=d({}),i=d({}),u=d({});function C(){i.value={ar:"",en:""},u.value={ar:"",en:""},n.value.id="",c.value=!1,V("runItems")}function U(s){return s.startsWith("https://")?s:"https://"+s}function F(s){const e=new FormData;e.append("title",JSON.stringify(i.value)),e.append("description",JSON.stringify(u.value)),e.append("url",U(n.value.url)),e.append("user_id",_.user.id),s.length&&s.forEach(p=>{e.append("photos[]",p,p.name)}),n.value.id&&e.append("_method","put"),z("projects",e,n.value.id).then(p=>{n.value=p.data,V("runItems"),C()})}const r=d(null),m=()=>{if(!i.value.ar&&!i.value.en){B("حقل العنوان مطلوب عربي او انجليزي");return}r.value&&r.value.compressImages()},y=(s={})=>{Object.keys(s).length!==0&&(i.value=s.title,u.value=s.description),c.value=!0,n.value=s};return x({addNew:y}),(s,e)=>{const p=j;return h(),w("div",null,[t(g,{cols:"auto"},{default:a(()=>[t(v,{onClick:e[0]||(e[0]=o=>y()),icon:"mdi-plus",color:"success",size:"small",to:""})]),_:1}),t(N,{class:"text-center",modelValue:c.value,"onUpdate:modelValue":e[6]||(e[6]=o=>c.value=o),"max-width":"900",persistent:""},{default:a(()=>[t(D,{class:"pa-5"},{actions:a(()=>[t(v,{onClick:C},{default:a(()=>[S(" اغلاق ")]),_:1}),t(v,{onClick:m},{default:a(()=>[S(" موافق ")]),_:1})]),default:a(()=>[l("h2",Q,f(n.value.id?"تعديل ":" اضافة "),1),t(A,null,{default:a(()=>[t(P,null,{default:a(()=>[t(g,{cols:"12",md:"6"},{default:a(()=>[t(k,{modelValue:i.value.ar,"onUpdate:modelValue":e[1]||(e[1]=o=>i.value.ar=o),label:"العنوان"},null,8,["modelValue"])]),_:1}),t(g,{cols:"12",md:"6"},{default:a(()=>[t(k,{modelValue:i.value.en,"onUpdate:modelValue":e[2]||(e[2]=o=>i.value.en=o),label:"title"},null,8,["modelValue"])]),_:1}),t(g,{cols:"12",md:"6"},{default:a(()=>[t(k,{modelValue:u.value.ar,"onUpdate:modelValue":e[3]||(e[3]=o=>u.value.ar=o),label:"الوصف"},null,8,["modelValue"])]),_:1}),t(g,{cols:"12",md:"6"},{default:a(()=>[t(k,{modelValue:u.value.en,"onUpdate:modelValue":e[4]||(e[4]=o=>u.value.en=o),label:"description"},null,8,["modelValue"])]),_:1}),t(g,{cols:"12",md:"6"},{default:a(()=>[t(k,{modelValue:n.value.url,"onUpdate:modelValue":e[5]||(e[5]=o=>n.value.url=o),label:"URL"},null,8,["modelValue"])]),_:1}),t(p,{ref_key:"imageInputRef",ref:r,onSaveCompressedImages:F},null,512)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},G=l("h2",{class:"ma-5"},"هل تريد حذف العنصر بالفعل",-1),K=l("thead",null,[l("tr",null,[l("th",{class:"text-center"},"#"),l("th",{class:"text-center"},"العنوان"),l("th",{class:"text-center"},"title"),l("th",{class:"text-center"},"الوصف"),l("th",{class:"text-center"},"description"),l("th",{class:"text-center"},"URL"),l("th",{class:"text-center"},"تاريخ الانشاء"),l("th",{class:"text-center sticky-column"},". . .")])],-1),X={class:"sticky-column"},Y={key:1,class:"text-alert"},ve={__name:"index",setup(R){const x=b(),I=d(null),_=d(!1),V=d([]),c=d("");E(()=>{u()});const n=d(null),i=r=>{n.value.opaenDialog(r)};function u(){x.loadengApi=!0,L("projects").then(r=>{V.value=r.data,c.value=""})}function C(r){_.value=!0,c.value=r}function U(){x.loadengApi=!0,T("projects/delete",{id:[c.value.id]}).then(()=>{u(),_.value=!1})}const F=r=>{var m;(m=I.value)==null||m.addNew(r)};return(r,m)=>{const y=M,s=W;return h(),$(H,null,{default:a(()=>[t(N,{class:"text-center",modelValue:_.value,"onUpdate:modelValue":m[1]||(m[1]=e=>_.value=e),"max-width":"400",persistent:""},{default:a(()=>[t(D,{class:"pa-5"},{default:a(()=>[G,t(v,{class:"ma-1",onClick:U},{default:a(()=>[S(" موافق ")]),_:1}),t(v,{class:"ma-1",onClick:m[0]||(m[0]=e=>_.value=!1)},{default:a(()=>[S(" اغلاق ")]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(y,{ref_key:"isShowImage",ref:n,onRunItems:u},null,512),t(s,{ref_key:"itemForm",ref:I,onRunItems:u},null,512),V.value.length>0?(h(),$(q,{key:0,style:{"white-space":"nowrap"},dir:"rtl",class:"h"},{default:a(()=>[K,l("tbody",null,[(h(!0),w(O,null,J(V.value,(e,p)=>(h(),w("tr",{key:e.id},[l("td",null,f(p+1),1),l("td",null,f(e.title.ar),1),l("td",null,f(e.title.en),1),l("td",null,f(e.description.ar),1),l("td",null,f(e.description.en),1),l("td",null,f(e.url),1),l("td",null,f(e.created_at),1),l("td",X,[t(v,{onClick:o=>i(e.photos),icon:"mdi-image-edit-outline",color:"info",size:"small"},null,8,["onClick"]),t(v,{onClick:o=>C(e),class:"mx-3",icon:"mdi-delete",color:"red",size:"small"},null,8,["onClick"]),t(v,{onClick:o=>F(e),icon:"mdi-pencil",color:"info",size:"small"},null,8,["onClick"])])]))),128))])]),_:1})):(h(),w("p",Y,"لا توجد اي بيانات"))]),_:1})}}};export{ve as default};
