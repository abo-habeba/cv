import{_ as B}from"./imageInput-DrJt6mwd.js";import{F as O,r,H as h,I as U,v as l,L as n,O as w,M as t,P as u,q as z,S as D,J as E,K as L,R as M,Q as j}from"./index-CTZIvFHE.js";import{n as F,s as q,f as H,d as K,_ as P}from"./ThemeSettings-DRdEUUWQ.js";import{x as y}from"./forwardRefs-D4cyrmBm.js";import{e as i,V as J,d as Q}from"./VRow-B2a_pzm7.js";import{V as G}from"./VForm-lrdTen5H.js";import{V as c,a as W}from"./VTextField-CmJuGy6Y.js";import{V as R}from"./VDialog-RZ1VBsiG.js";import{_ as X}from"./ShowImages-fXT5nCn8.js";import{V as Y}from"./VTable-DgYLhXms.js";import"./VInput-BVlugDXU.js";import"./VChip-__5tyFae.js";import"./VSwitch-SKcbN60r.js";import"./VSelectionControl-BZN2FF6b.js";import"./VOverlay-SrWR4M6n.js";const Z={class:"ma-5"},ee={__name:"AcademicsForm",emits:["runItems"],setup(A,{expose:C,emit:b}){const k=O(),I=b,g=r(!1),d=r({}),m=r({ar:"",en:""}),_=r({}),x=r({}),V=r({}),f=r({});function S(){g.value=!1,I("runItems")}function N(s){const e=new FormData;e.append("institution",JSON.stringify(m.value)),e.append("field_of_study",JSON.stringify(V.value)),e.append("description",JSON.stringify(f.value)),e.append("degree",JSON.stringify(_.value)),e.append("grade",JSON.stringify(x.value)),e.append("end_date",d.value.end_date||""),e.append("start_date",d.value.start_date),e.append("user_id",k.user.id),s.length&&s.forEach(o=>{e.append("photos[]",o,o.name)}),d.value.id&&e.append("_method","put"),q("academics",e,d.value.id).then(()=>{I("runItems"),S()})}const p=(s={})=>{Object.keys(s).length!==0&&(m.value=s.institution,_.value=s.degree,x.value=s.grade,V.value=s.field_of_study,f.value=s.description),g.value=!0,d.value=s},v=r(null),T=()=>{if(!m.value.ar&&!m.value.en){F("حقل المؤسسة التعليمية مطلوب عربي او انجليزي");return}if(!_.value.ar&&!_.value.en){F("حقل الدرجة العلمية مطلوب عربي او انجليزي");return}if(!V.value.ar&&!V.value.en){F("حقل مجال الدراسة مطلوب عربي او انجليزي");return}if(!d.value.start_date){F("حقل تاريخ البدء مطلوب ");return}v.value&&v.value.compressImages().then(s=>{N(s)})};return C({addNew:p}),(s,e)=>{const o=B;return h(),U("div",null,[l(i,{cols:"auto"},{default:n(()=>[l(y,{onClick:e[0]||(e[0]=a=>p()),icon:"mdi-plus",color:"success",size:"small",to:""})]),_:1}),l(R,{class:"text-center",modelValue:g.value,"onUpdate:modelValue":e[13]||(e[13]=a=>g.value=a),"max-width":"900",persistent:""},{default:n(()=>[l(J,{class:"pa-5"},{actions:n(()=>[l(y,{onClick:S},{default:n(()=>[w(" اغلاق ")]),_:1}),l(y,{onClick:T},{default:n(()=>[w(" موافق ")]),_:1})]),default:n(()=>[t("h2",Z,u(d.value.id?"تعديل ":" اضافة "),1),l(G,null,{default:n(()=>[l(Q,null,{default:n(()=>[l(i,{cols:"12",md:"6"},{default:n(()=>[l(c,{modelValue:m.value.ar,"onUpdate:modelValue":e[1]||(e[1]=a=>m.value.ar=a),label:"المؤسسة التعليمية"},null,8,["modelValue"])]),_:1}),l(i,{cols:"12",md:"6"},{default:n(()=>[l(c,{modelValue:m.value.en,"onUpdate:modelValue":e[2]||(e[2]=a=>m.value.en=a),label:"institution"},null,8,["modelValue"])]),_:1}),l(i,{cols:"12",md:"6"},{default:n(()=>[l(c,{modelValue:_.value.ar,"onUpdate:modelValue":e[3]||(e[3]=a=>_.value.ar=a),label:"الدرجه العلمية"},null,8,["modelValue"])]),_:1}),l(i,{cols:"12",md:"6"},{default:n(()=>[l(c,{modelValue:_.value.en,"onUpdate:modelValue":e[4]||(e[4]=a=>_.value.en=a),label:"degree"},null,8,["modelValue"])]),_:1}),l(i,{cols:"12",md:"6"},{default:n(()=>[l(c,{modelValue:x.value.ar,"onUpdate:modelValue":e[5]||(e[5]=a=>x.value.ar=a),label:"التقدير"},null,8,["modelValue"])]),_:1}),l(i,{cols:"12",md:"6"},{default:n(()=>[l(c,{modelValue:x.value.en,"onUpdate:modelValue":e[6]||(e[6]=a=>x.value.en=a),label:"Score"},null,8,["modelValue"])]),_:1}),l(i,{cols:"12",md:"6"},{default:n(()=>[l(c,{modelValue:V.value.ar,"onUpdate:modelValue":e[7]||(e[7]=a=>V.value.ar=a),label:"مجال الدراسة"},null,8,["modelValue"])]),_:1}),l(i,{cols:"12",md:"6"},{default:n(()=>[l(c,{modelValue:V.value.en,"onUpdate:modelValue":e[8]||(e[8]=a=>V.value.en=a),label:"field_of_study"},null,8,["modelValue"])]),_:1}),l(i,{cols:"12",md:"6"},{default:n(()=>[l(c,{type:"date",modelValue:d.value.start_date,"onUpdate:modelValue":e[9]||(e[9]=a=>d.value.start_date=a),label:"تاريخ البدء"},null,8,["modelValue"])]),_:1}),l(i,{cols:"12",md:"6"},{default:n(()=>[l(c,{type:"date",modelValue:d.value.end_date,"onUpdate:modelValue":e[10]||(e[10]=a=>d.value.end_date=a),label:"تاريخ الانتهاء"},null,8,["modelValue"])]),_:1}),l(i,{cols:"12",md:"6"},{default:n(()=>[l(c,{modelValue:f.value.ar,"onUpdate:modelValue":e[11]||(e[11]=a=>f.value.ar=a),label:"الوصف"},null,8,["modelValue"])]),_:1}),l(i,{cols:"12",md:"6"},{default:n(()=>[l(c,{modelValue:f.value.en,"onUpdate:modelValue":e[12]||(e[12]=a=>f.value.en=a),label:"description"},null,8,["modelValue"])]),_:1}),l(o,{ref_key:"imageInputRef",ref:v},null,512)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},le=t("h2",{class:"ma-5"},"هل تريد حذف العنصر بالفعل",-1),te=t("thead",null,[t("tr",null,[t("th",{class:"text-center"},"#"),t("th",{class:"text-center"},"المؤسسة التعليمية"),t("th",{class:"text-center"},"institution"),t("th",{class:"text-center"},"الدرجة العلمية"),t("th",{class:"text-center"},"degree"),t("th",{class:"text-center"},"التقدير"),t("th",{class:"text-center"},"Score"),t("th",{class:"text-center"},"مجال الدراسة"),t("th",{class:"text-center"},"field of study"),t("th",{class:"text-center"},"تاريخ البدء"),t("th",{class:"text-center"},"تاريخ الانتهاء"),t("th",{class:"text-center"},"الوصف"),t("th",{class:"text-center"},"description"),t("th",{class:"text-center"},"تاريخ الانشاء"),t("th",{class:"text-center sticky-column"},"...")])],-1),ae={class:"sticky-column"},ne={key:2,class:"text-alert"},ye={__name:"index",setup(A){const C=O(),b=r(null),k=r(!1),I=r([]),g=r(""),d=r(null);z(()=>{f()});const m=r(null);function _(){m.value?m.value.opendialogThemeForm():console.error("opendialogThemeForm is not a function")}const x=p=>{d.value.opaenDialog(p)};function V(p){k.value=!0,g.value=p}function f(){C.loadengApi=!0,H("academics").then(p=>{I.value=p.data,g.value=""})}function S(){C.loadengApi=!0,K("academics/delete",{id:[g.value.id]}).then(()=>{f(),k.value=!1})}const N=p=>{var v;(v=b.value)==null||v.addNew(p)};return(p,v)=>{const T=P,s=X,e=ee;return h(),D(W,null,{default:n(()=>[l(R,{class:"text-center",modelValue:k.value,"onUpdate:modelValue":v[1]||(v[1]=o=>k.value=o),"max-width":"400",persistent:""},{default:n(()=>[l(J,{class:"pa-5"},{default:n(()=>[le,l(y,{class:"ma-1",onClick:S},{default:n(()=>[w(" موافق ")]),_:1}),l(y,{class:"ma-1",onClick:v[0]||(v[0]=o=>k.value=!1)},{default:n(()=>[w(" اغلاق ")]),_:1})]),_:1})]),_:1},8,["modelValue"]),E(C).user?(h(),D(T,{key:0,ref_key:"dialogThemeForm",ref:m,detTheme:{nameEn:"about",nameAr:"عني"},onClick:_},null,512)):L("",!0),l(s,{ref_key:"isShowImage",ref:d,onRunItems:f},null,512),l(e,{ref_key:"itemForm",ref:b,onRunItems:f},null,512),I.value.length>0?(h(),D(Y,{key:1,style:{"white-space":"nowrap"},dir:"rtl",class:"h"},{default:n(()=>[te,t("tbody",null,[(h(!0),U(j,null,M(I.value,(o,a)=>(h(),U("tr",{key:o.id},[t("td",null,u(a+1),1),t("td",null,u(o.institution.ar),1),t("td",null,u(o.institution.en),1),t("td",null,u(o.degree.ar),1),t("td",null,u(o.degree.en),1),t("td",null,u(o.grade.ar),1),t("td",null,u(o.grade.en),1),t("td",null,u(o.field_of_study.ar),1),t("td",null,u(o.field_of_study.en),1),t("td",null,u(o.start_date),1),t("td",null,u(o.end_date),1),t("td",null,u(o.description.ar),1),t("td",null,u(o.description.en),1),t("td",null,u(o.created_at),1),t("td",ae,[l(y,{onClick:$=>x(o.photos),icon:"mdi-image-edit-outline",color:"info",size:"small"},null,8,["onClick"]),l(y,{onClick:$=>V(o),class:"mx-3",icon:"mdi-delete",color:"red",size:"small"},null,8,["onClick"]),l(y,{onClick:$=>N(o),icon:"mdi-pencil",color:"info",size:"small"},null,8,["onClick"])])]))),128))])]),_:1})):(h(),U("p",ne,"لا توجد اي بيانات"))]),_:1})}}};export{ye as default};
