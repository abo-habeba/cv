import{_ as Y}from"./ThemeSettings-DxE5u2rM.js";import{_ as Z}from"./Breadcrumbs-Dlp144wO.js";import{U as q,r as p,c as G,z as H,a5 as C,W as o,a2 as i,Y as e,m as s,Z as c,_ as r,a7 as u,a1 as n,$ as I,X as _,a4 as J,O as K,al as x,a8 as Q}from"./index-B1aZ8vmQ.js";import{b as w,g as ee,d as U,e as F,c as O,a as S}from"./VRow-B1oTdJhI.js";import{A as v}from"./VGrid-Yq4WbT4h.js";import{V as $}from"./VDialog-xGNNAlad.js";import{V as ae}from"./VTable-CeZ06DHo.js";import{V as te}from"./VContainer-BkSwYf0K.js";import"./apiService-0p2R_jFd.js";import"./VTextField-CMr9ofLe.js";import"./VInput-BJwcMpUv.js";import"./VLabel-kYaODVwY.js";import"./VForm-9k_F4JaB.js";import"./VSwitch-7D3_nDI4.js";import"./VSelectionControl-CEy2-YVA.js";const le=["href"],oe=n("br",null,null,-1),se=["href"],ne=n("hr",{class:"ma-2"},null,-1),re=n("h2",{class:"ma-5"},"هل تريد حذف العنصر بالفعل",-1),ue=n("thead",null,[n("tr",null,[n("th",{class:"text-center"},"#"),n("th",{class:"text-center"},"الاسم"),n("th",{class:"text-center"},"الموضوع"),n("th",{class:"text-center"},"تاريخ الإنشاء"),n("th",{class:"text-center"})])],-1),ce=["onClick"],de={key:0},ie={key:1},me={key:2},_e={key:3},fe={key:1,class:"text-alert mt-10"},pe={key:2,class:"text-alert mt-10"},Ue={__name:"index",setup(ve){const f=q(),B=l=>{x.success(l,{theme:"colored",position:x.POSITION.TOP_LEFT})},y=l=>{x.error(l,{theme:"colored",position:x.POSITION.TOP_LEFT})},g=p(!1),k=p(!1),m=p([]),T=p([]),V=G(()=>T.value.filter(l=>l.read==="0")),a=p(""),h=p(!0);function D(l){g.value=!0,a.value=l}H(()=>{b()});function N(){h.value=!1,m.value=T.value}function j(){h.value=!0,console.log(V.value),m.value=V.value}function E(l){if(a.value=l,console.log(a.value),console.log(typeof l.read),l.read==="0"){console.log("run updateItems"),C.put(`contacts/${l.id}`,{read:"1"}).then(d=>{k.value=!0}).catch(()=>{y("هناك خطا ما حاول مره اخري")});return}k.value=!0}function b(){f.loadengApi=!0,C.get("contacts",m.value).then(l=>{m.value=l.data.data,T.value=l.data.data,j(),f.loadengApi=!1,a.value=""}).catch(()=>{y("هناك خطا ما حاول مره اخري")})}function P(){f.loadengApi=!0,C.get("contacts-mark-all-read").then(()=>{f.user.unread_contacts_count=0,b()}).catch(()=>{y("هناك خطا ما حاول مره اخري")})}const A=p(null);function z(){A.value?A.value.opendialogThemeForm():console.error("opendialogThemeForm is not a function")}function L(){f.loadengApi=!0,C.post("contacts/delete",{id:[a.value.id]}).then(()=>{b(),g.value=!1,f.loadengApi=!1,B(" تم الحذف")}).catch(l=>{y(l.response.data.message)})}return(l,d)=>{const M=Z,R=Y;return o(),i(te,null,{default:e(()=>[s(M),s($,{class:"text-center",modelValue:k.value,"onUpdate:modelValue":d[1]||(d[1]=t=>k.value=t),"max-width":"600",persistent:""},{default:e(()=>[s(w,{class:"pa-5"},{default:e(()=>[s(ee,{class:"pa-1"},{default:e(()=>[a.value.name.ar?(o(),i(U,{key:0},{default:e(()=>[c(r(a.value.name.ar),1)]),_:1})):u("",!0),a.value.name.en?(o(),i(U,{key:1},{default:e(()=>[c(r(a.value.name.en),1)]),_:1})):u("",!0),a.value.subject.ar?(o(),i(F,{key:2},{default:e(()=>[c(r(a.value.subject.ar),1)]),_:1})):u("",!0),a.value.subject.en?(o(),i(F,{key:3},{default:e(()=>[c(r(a.value.subject.en),1)]),_:1})):u("",!0),n("a",{href:"mailto:"+a.value.email},r(a.value.email),9,le),oe,n("a",{href:"tel:"+a.value.phone},r(a.value.phone),9,se)]),_:1}),a.value.message.ar?(o(),i(O,{key:0,class:"pa-2"},{default:e(()=>[c(r(a.value.message.ar),1)]),_:1})):u("",!0),a.value.message.en?(o(),i(O,{key:1,class:"pa-2"},{default:e(()=>[c(r(a.value.message.en),1)]),_:1})):u("",!0),s(F,null,{default:e(()=>[c(r(a.value.created_at),1)]),_:1}),ne,s(v,{class:"ma-1",onClick:d[0]||(d[0]=t=>k.value=!1)},{default:e(()=>[c(" موافق ")]),_:1})]),_:1})]),_:1},8,["modelValue"]),s($,{class:"text-center",modelValue:g.value,"onUpdate:modelValue":d[3]||(d[3]=t=>g.value=t),"max-width":"400",persistent:""},{default:e(()=>[s(w,{class:"pa-5"},{default:e(()=>[re,s(v,{class:"ma-1",onClick:L},{default:e(()=>[c(" موافق ")]),_:1}),s(v,{class:"ma-1",onClick:d[2]||(d[2]=t=>g.value=!1)},{default:e(()=>[c(" اغلاق ")]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(S,{col:"12"},{default:e(()=>[I(f).user?(o(),i(R,{key:0,ref_key:"dialogThemeForm",ref:A,detTheme:{nameEn:"contacts",nameAr:"الرسائل"},onClick:z},null,512)):u("",!0)]),_:1}),s(S,{col:"12"},{default:e(()=>[s(v,{onClick:P,disabled:I(V).length<=0,color:I(V).length>0?"primary":"grey"},{default:e(()=>[c(" تعين الكل ك مقروء ")]),_:1},8,["disabled","color"])]),_:1}),s(S,null,{default:e(()=>[s(v,{class:"ma-1",onClick:N,color:h.value?"primary":"grey"},{default:e(()=>[c(" عرض الكل ")]),_:1},8,["color"]),s(v,{class:"ma-1",onClick:j,color:h.value?"grey":"primary"},{default:e(()=>[c(" عرض الغير مقروء ")]),_:1},8,["color"])]),_:1}),m.value.length>0?(o(),i(ae,{key:0,style:{"white-space":"nowrap"},dir:"rtl",class:"h mt-10"},{default:e(()=>[ue,n("tbody",null,[(o(!0),_(K,null,J(m.value,(t,W)=>(o(),_("tr",{key:t.id,onClick:X=>E(t),style:Q({color:t.read==="0"?"#2196F3":"",cursor:"pointer"})},[n("td",null,r(W+1),1),t.name.ar?(o(),_("td",de,r(t.name.ar),1)):u("",!0),t.name.en?(o(),_("td",ie,r(t.name.en),1)):u("",!0),t.subject.ar?(o(),_("td",me,r(t.subject.ar),1)):u("",!0),t.subject.en?(o(),_("td",_e,r(t.subject.en),1)):u("",!0),n("td",null,r(t.created_at),1),n("td",null,[s(v,{onClick:X=>D(t),class:"ml-3",icon:"mdi-delete",color:"red",size:"small"},null,8,["onClick"])])],12,ce))),128))])]),_:1})):u("",!0),!h.value&&m.value.length<=0?(o(),_("p",fe,"لا توجد اي رسائل")):u("",!0),h.value&&m.value.length<=0?(o(),_("p",pe,"لا توجد أي رسائل غير مقروءة")):u("",!0)]),_:1})}}};export{Ue as default};
