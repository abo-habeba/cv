import{E as h,r as c,B as b,x as y,J as k,c as o,K as t,H as S,N as u,L as f,S as T,al as d}from"./index-TKAKwIDP.js";import{b as g}from"./route-block-B_A1xBdJ.js";import{V as I}from"./VContainer-C44OOwED.js";import{a as N,V as w}from"./VRow-B893D1wj.js";import{q as C,s as O,t as B,V as v}from"./VGrid-eYepT4wA.js";import{V}from"./VTextField-CW1u6qvo.js";import"./VInput-CdCn7wfj.js";const E={id:"login"},L=u("span",null," تسجيل الدخول ",-1),P={class:"text-blue text-decoration-none",href:"/register",rel:"noopener noreferrer"},U=u("br",null,null,-1),A={class:"text-blue text-decoration-none",href:"/",rel:"noopener noreferrer"},F={__name:"login",setup(z){const n=h(),s=c(!1),r=c(!1),l=c({}),p=b();y(()=>{n.loadengApi=!1,localStorage.token&&(n.isLoader=!1)});const _=e=>{d.success(e,{theme:"colored",position:d.POSITION.TOP_LEFT})},m=e=>{d.error(e,{theme:"colored",position:d.POSITION.TOP_LEFT})};function x(){r.value=!0,T.post("login",l.value).then(e=>{localStorage.setItem("token",e.data.token),localStorage.setItem("user",JSON.stringify(e.data.user)),n.isAuth=!0,n.setAuthHeaderNew(e.data.token,p),n.fetchUser().then(()=>{_("تم تسجل الدخول بنجاح"),p.push({name:"/"})})}).catch(e=>{if(r.value=!1,e.response.data){if(e.response.data.message==="The provided credentials are incorrect."){m("بيانات الدخول غير صحيحه");return}return}m("هناك خطا ما حاول مره اخري")})}return(e,a)=>(S(),k("div",E,[o(I,null,{default:t(()=>[o(N,null,{default:t(()=>[o(w,{cols:"12",sm:"11",md:"8",lg:"6",xl:"6",class:"mx-auto"},{default:t(()=>[o(C,{class:"login-box mx-auto pa-12 pb-8",elevation:"8","max-width":"448",rounded:"lg"},{default:t(()=>[o(V,{density:"compact",placeholder:"ادخل الايميل","prepend-inner-icon":"mdi-email-outline",variant:"outlined",modelValue:l.value.email,"onUpdate:modelValue":a[0]||(a[0]=i=>l.value.email=i)},null,8,["modelValue"]),o(V,{"append-inner-icon":s.value?"mdi-eye-off":"mdi-eye",type:s.value?"text":"password",density:"compact",placeholder:"ادخل كلمة المرور","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":a[1]||(a[1]=i=>s.value=!s.value),modelValue:l.value.password,"onUpdate:modelValue":a[2]||(a[2]=i=>l.value.password=i)},null,8,["append-inner-icon","type","modelValue"]),o(O,{indeterminate:"",loading:r.value,disabled:r.value,color:"primary","loading-color":"primary","loading-size":"32",onClick:x,"prepend-icon":"mdi-login",class:"mb-8",size:32,variant:"tonal",block:""},{default:t(()=>[L]),_:1},8,["loading","disabled"]),o(B,{class:"text-center"},{default:t(()=>[u("a",P,[f(" انشأ حساب الان "),o(v,{icon:"mdi-account-plus"})]),U]),_:1}),u("a",A,[f(" الرئيسية "),o(v,{icon:"mdi-home"})])]),_:1})]),_:1})]),_:1})]),_:1})]))}};typeof g=="function"&&g(F);export{F as default};
