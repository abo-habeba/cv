import{_ as A}from"./ShowImages-_LbTzaoa.js";import{_ as L}from"./imageInput-Dv5qoAA5.js";import{n as H,s as J,f as M,d as P}from"./apiService-DJl06C9D.js";import{H as W,O as j,r as m,Q as V,R as F,m as e,S as a,U as S,Y as o,V as f,W as b,N as q,z as Q,$ as T,a2 as Y,_ as G,I as K}from"./index-B_INyi6s.js";import{w as X,x as g}from"./VGrid-B2erfyjZ.js";import{b as N,V as Z,a as y}from"./VRow-Blc9M78H.js";import{V as ee}from"./VForm-DN_2fu7y.js";import{V as C}from"./VTextField-B_LHzmYe.js";import{V as B}from"./VDialog-DxgiNH1U.js";import{_ as te}from"./ThemeSettings-CmMm26R4.js";import{_ as le}from"./Breadcrumbs-gfTqwcfX.js";import{V as oe}from"./VTable-CBL9MKAu.js";import{V as ae}from"./VContainer-C1vZhk8r.js";import"./VInput-3Ijvp9PA.js";import"./index-D3xhWn2W.js";import"./VLabel-CI5_faWj.js";import"./VChip-TUTOoshy.js";import"./VSelectionControl-BQk9-tQ0.js";import"./VSwitch-CpkTrUhk.js";const ne={class:"ma-5"},se={__name:"ProjectForm",emits:["runItems"],setup(z,{expose:w,emit:k}){const{xs:_}=W(),I=j(),h=k,c=m(!1),r=m({}),u=m({}),d=m({});function v(){u.value={ar:"",en:""},d.value={ar:"",en:""},r.value.id="",c.value=!1,h("runItems")}function U(l){return l.startsWith("https://")?l:"https://"+l}function $(l){const t=new FormData;t.append("title",JSON.stringify(u.value)),t.append("description",JSON.stringify(d.value)),t.append("url",U(r.value.url)),t.append("user_id",I.user.id),l.length&&l.forEach(p=>{t.append("photos[]",p,p.name)}),r.value.id&&t.append("_method","put"),J("projects",t,r.value.id).then(p=>{r.value=p.data,h("runItems"),v()})}const x=m(null),D=()=>{if(!u.value.ar&&!u.value.en){H("حقل العنوان مطلوب عربي او انجليزي");return}x.value&&x.value.compressImages().then(l=>{console.log(l),$(l)})},i=(l={})=>{Object.keys(l).length!==0&&(u.value=l.title,d.value=l.description),c.value=!0,r.value=l};return w({addNew:i}),(l,t)=>{const p=L;return V(),F("div",null,[e(X,{onClick:t[0]||(t[0]=n=>i()),color:"info",size:"35",icon:"mdi-plus-outline"}),e(B,{class:"text-center",modelValue:c.value,"onUpdate:modelValue":t[6]||(t[6]=n=>c.value=n),"max-width":"900",fullscreen:b(_)},{default:a(()=>[e(N,{class:"pa-5"},{actions:a(()=>[e(g,{onClick:v},{default:a(()=>[S(" اغلاق ")]),_:1}),e(g,{onClick:D},{default:a(()=>[S(" موافق ")]),_:1})]),default:a(()=>[o("h2",ne,f(r.value.id?"تعديل ":" اضافة "),1),e(ee,null,{default:a(()=>[e(Z,null,{default:a(()=>[e(y,{cols:"12",md:"6"},{default:a(()=>[e(C,{modelValue:u.value.ar,"onUpdate:modelValue":t[1]||(t[1]=n=>u.value.ar=n),label:"العنوان"},null,8,["modelValue"])]),_:1}),e(y,{cols:"12",md:"6"},{default:a(()=>[e(C,{modelValue:u.value.en,"onUpdate:modelValue":t[2]||(t[2]=n=>u.value.en=n),label:"title"},null,8,["modelValue"])]),_:1}),e(y,{cols:"12",md:"6"},{default:a(()=>[e(C,{modelValue:d.value.ar,"onUpdate:modelValue":t[3]||(t[3]=n=>d.value.ar=n),label:"الوصف"},null,8,["modelValue"])]),_:1}),e(y,{cols:"12",md:"6"},{default:a(()=>[e(C,{modelValue:d.value.en,"onUpdate:modelValue":t[4]||(t[4]=n=>d.value.en=n),label:"description"},null,8,["modelValue"])]),_:1}),e(y,{cols:"12",md:"6"},{default:a(()=>[e(C,{modelValue:r.value.url,"onUpdate:modelValue":t[5]||(t[5]=n=>r.value.url=n),label:"URL"},null,8,["modelValue"])]),_:1}),e(p,{ref_key:"imageInputRef",ref:x,isMultiple:!0},null,512)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"])])}}},ue=o("h2",{class:"ma-5"},"هل تريد حذف العنصر بالفعل",-1),re=o("thead",null,[o("tr",null,[o("th",{class:"text-center"},"#"),o("th",{class:"text-center"},"العنوان"),o("th",{class:"text-center"},"title"),o("th",{class:"text-center"},"الوصف"),o("th",{class:"text-center"},"description"),o("th",{class:"text-center"},"URL"),o("th",{class:"text-center"},"تاريخ الانشاء"),o("th",{class:"text-center sticky-column"},". . .")])],-1),ie={class:"sticky-column"},me={key:1,class:"text-alert"},$e={__name:"index",setup(z){const w=q(),k=j(),_=m(!1),I=m([]),h=m(""),c=m(null);function r(){c.value?c.value.opendialogThemeForm():console.error("opendialogThemeForm is not a function")}Q(()=>{v()});const u=m(null),d=i=>{u.value.opaenDialog(i)};function v(){k.loadengApi=!0,M("projects").then(i=>{I.value=i.data,h.value=""})}function U(i){_.value=!0,h.value=i}function $(){k.loadengApi=!0,P("projects/delete",{id:[h.value.id]}).then(()=>{v(),_.value=!1})}const x=m(null),D=i=>{var l;(l=x.value)==null||l.addNew(i)};return(i,l)=>{const t=le,p=te,n=se,E=A;return V(),T(ae,null,{default:a(()=>[e(t),e(B,{class:"text-center",modelValue:_.value,"onUpdate:modelValue":l[1]||(l[1]=s=>_.value=s),"max-width":"400",persistent:""},{default:a(()=>[e(N,{class:"pa-5"},{default:a(()=>[ue,e(g,{class:"ma-1",onClick:$},{default:a(()=>[S(" موافق ")]),_:1}),e(g,{class:"ma-1",onClick:l[0]||(l[0]=s=>_.value=!1)},{default:a(()=>[S(" اغلاق ")]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(N,{"max-width":"500px",class:"text-center my-5 mx-auto",subtitle:b(w).meta.description,title:b(w).meta.title},{append:a(()=>[b(k).user?(V(),T(p,{key:0,ref_key:"dialogThemeForm",ref:c,detTheme:{nameEn:"projects",nameAr:"المشاريع"},onClick:r},null,512)):Y("",!0)]),prepend:a(()=>[e(n,{ref_key:"itemForm",ref:x,onRunItems:v},null,512)]),_:1},8,["subtitle","title"]),e(E,{ref_key:"isShowImage",ref:u,onRunItems:v},null,512),I.value.length>0?(V(),T(oe,{key:0,style:{"white-space":"nowrap"},dir:"rtl",class:"h"},{default:a(()=>[re,o("tbody",null,[(V(!0),F(K,null,G(I.value,(s,O)=>(V(),F("tr",{key:s.id},[o("td",null,f(O+1),1),o("td",null,f(s.title.ar),1),o("td",null,f(s.title.en),1),o("td",null,f(s.description.ar),1),o("td",null,f(s.description.en),1),o("td",null,f(s.url),1),o("td",null,f(s.created_at),1),o("td",ie,[e(g,{onClick:R=>d(s.photos),icon:"mdi-image-edit-outline",color:"info",size:"small"},null,8,["onClick"]),e(g,{onClick:R=>U(s),class:"mx-3",icon:"mdi-delete",color:"red",size:"small"},null,8,["onClick"]),e(g,{onClick:R=>D(s),icon:"mdi-square-edit-outline",color:"info",size:"small"},null,8,["onClick"])])]))),128))])]),_:1})):(V(),F("p",me,"لا توجد اي بيانات"))]),_:1})}}};export{$e as default};
