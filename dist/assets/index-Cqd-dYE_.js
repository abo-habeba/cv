import{J as A,r as v,q as $,L as V,M as y,v as e,P as t,S as g,V as I,O as k,Q as S,T as O,X as P,ab as L,N as n,F as J,U as M,an as q}from"./index-BMIPE2aT.js";import{z as x,o as C,y as B}from"./forwardRefs-b5Bbg4e-.js";import{a as r,V as w}from"./VRow-CPMn7zse.js";import{V as E,b as z}from"./VGrid-sGql2Pfr.js";import{V as H}from"./VForm-B4fBCeMx.js";import{V as f}from"./VTextField-CWNyIJf5.js";import{V as U}from"./VTextarea-WjSnYygB.js";import{V as Q,_ as X}from"./imageInput-CnZecyl4.js";import{V as T}from"./VDialog-BTQm1QC_.js";import{a as j,s as G}from"./apiService-DJhwrnjc.js";import{V as K,a as i}from"./VList-CuvRlYdn.js";import{V as W}from"./VContainer-C3HaojmF.js";import"./VInput-BM8s1tyJ.js";import"./index-CT7Bpyv8.js";import"./VChip-BSvqXooa.js";import"./VOverlay-C4u9Ip57.js";import"./ssrBoot-CEyatPUa.js";const Y=S("h2",{class:"ma-5"},O("تعديل "),-1),Z={__name:"UserForm",emits:["runItems"],setup(R,{expose:N,emit:D}){const o=A(),p=v(!1),_=v(null),a=v({}),c=v(null);$(()=>{a.value=o.user,c.value=o.user.profile_image});const b=u=>{L.error(u,{theme:"colored",position:L.POSITION.TOP_LEFT})};function h(){p.value=!1}const F=()=>{const u=_.value;if(u){const l=new FileReader;l.onload=s=>{c.value=s.target.result},l.readAsDataURL(u)}else c.value=null};function d(){o.loadengApi=!0;const u=new FormData;u.append("first_name",JSON.stringify(a.value.first_name)),u.append("last_name",JSON.stringify(a.value.last_name)),u.append("address",JSON.stringify(a.value.address)),u.append("bio_ar",a.value.bio_ar),u.append("bio_en",a.value.bio_en),u.append("about_ar",a.value.about_ar),u.append("about_en",a.value.about_en),u.append("position",JSON.stringify(a.value.position)),u.append("email",a.value.email),u.append("phone",a.value.phone),_.value&&u.append("profile_image",_.value),u.append("_method","put"),P.post(`users/${a.value.id}`,u).then(l=>{o.fetchUser().then(()=>{o.loadengApi=!1})}).catch(l=>{o.loadengApi=!1,b("هناك خطا ما حاول مره اخري")})}return N({dialogForm:()=>{p.value=!0}}),(u,l)=>(V(),y("div",null,[e(r,{cols:"auto"},{default:t(()=>[e(x,{class:"ma-1",color:"success"},{default:t(()=>[g(" تعديل البيانات "),e(C,{icon:"mdi-square-edit-outline",end:""})]),_:1})]),_:1}),e(T,{class:"text-center",modelValue:p.value,"onUpdate:modelValue":l[15]||(l[15]=s=>p.value=s),"max-width":"900",persistent:""},{default:t(()=>[e(E,{class:"pa-5"},{actions:t(()=>[e(x,{onClick:h},{default:t(()=>[g(" اغلاق ")]),_:1}),e(x,{onClick:d},{default:t(()=>[g(" موافق ")]),_:1})]),default:t(()=>[Y,e(H,null,{default:t(()=>[e(w,null,{default:t(()=>[e(r,{cols:"12",md:"6"},{default:t(()=>[e(f,{modelValue:a.value.first_name.ar,"onUpdate:modelValue":l[0]||(l[0]=s=>a.value.first_name.ar=s),label:" الاسم الاول "},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(f,{modelValue:a.value.first_name.en,"onUpdate:modelValue":l[1]||(l[1]=s=>a.value.first_name.en=s),label:"First Name"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(f,{modelValue:a.value.last_name.ar,"onUpdate:modelValue":l[2]||(l[2]=s=>a.value.last_name.ar=s),label:" الاسم الاخير "},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(f,{modelValue:a.value.last_name.en,"onUpdate:modelValue":l[3]||(l[3]=s=>a.value.last_name.en=s),label:" Last Name"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(f,{modelValue:a.value.address.ar,"onUpdate:modelValue":l[4]||(l[4]=s=>a.value.address.ar=s),label:" العنوان "},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(f,{modelValue:a.value.address.en,"onUpdate:modelValue":l[5]||(l[5]=s=>a.value.address.en=s),label:" Address"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(f,{modelValue:a.value.position.ar,"onUpdate:modelValue":l[6]||(l[6]=s=>a.value.position.ar=s),label:" الوظيفة "},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(f,{modelValue:a.value.position.en,"onUpdate:modelValue":l[7]||(l[7]=s=>a.value.position.en=s),label:" Position"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(U,{dir:"rtl",style:{direction:"rtl","text-align":"right","unicode-bidi":"bidi-override"},modelValue:a.value.bio_ar,"onUpdate:modelValue":l[8]||(l[8]=s=>a.value.bio_ar=s),label:" نبذه عنك "},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(U,{modelValue:a.value.bio_en,"onUpdate:modelValue":l[9]||(l[9]=s=>a.value.bio_en=s),label:" Bio"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(U,{dir:"rtl",style:{direction:"rtl","text-align":"right","unicode-bidi":"bidi-override"},modelValue:a.value.about_ar,"onUpdate:modelValue":l[10]||(l[10]=s=>a.value.about_ar=s),label:"  عني "},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(U,{modelValue:a.value.about_en,"onUpdate:modelValue":l[11]||(l[11]=s=>a.value.about_en=s),label:" About Me"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(f,{modelValue:a.value.email,"onUpdate:modelValue":l[12]||(l[12]=s=>a.value.email=s),label:" Email"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(f,{modelValue:a.value.phone,"onUpdate:modelValue":l[13]||(l[13]=s=>a.value.phone=s),label:" Phone"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(Q,{modelValue:_.value,"onUpdate:modelValue":l[14]||(l[14]=s=>_.value=s),label:" الصورة الشخصيه ",accept:"image/*","prepend-icon":"mdi-camera",onChange:F},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[c.value?(V(),I(B,{key:0,style:{margin:"auto"},src:c.value,"max-width":"200"},null,8,["src"])):k("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}},ee=S("h2",{class:"ma-5"},"صور الرئيسية",-1),le={key:1,class:"text-alert"},ae=S("h3",null,"يمكنك تحميل صوره او اكثر",-1),te={__name:"HeroForm",emits:["runItems"],setup(R,{expose:N,emit:D}){const o=A(),p=v(!1),_=d=>{j("photo",d).then(()=>{o.user.hero=o.user.hero.filter(m=>m.id!==d)})};function a(){p.value=!1}function c(d){const m=new FormData;m.append("user_id",o.user.id),d.length&&d.forEach(u=>{m.append("hero[]",u,u.name)}),m.append("_method","put"),G("users",m,o.user.id).then(u=>{o.user.hero=u.data.hero})}const b=v(null),h=()=>{b.value&&b.value.compressImages(5).then(d=>{c(d)}).catch(d=>{console.log("error ",d)})},F=()=>{p.value=!0};return N({openDialogShowHero:F}),(d,m)=>{const u=X;return V(),y("div",null,[e(r,{cols:"auto"},{default:t(()=>[e(x,{class:"ma-1",color:"info",onClick:m[0]||(m[0]=l=>F())},{default:t(()=>[g(" تعديل صور الرئيسية "),e(C,{icon:"mdi-image-outline",end:""})]),_:1})]),_:1}),e(T,{style:{"z-index":"50"},class:"text-center",modelValue:p.value,"onUpdate:modelValue":m[1]||(m[1]=l=>p.value=l),"max-width":"900",persistent:""},{default:t(()=>[e(E,{class:"pa-5"},{actions:t(()=>[e(x,{onClick:a},{default:t(()=>[g(" اغلاق ")]),_:1}),e(x,{onClick:h},{default:t(()=>[g(" موافق ")]),_:1})]),default:t(()=>[ee,n(o).user.hero.length?(V(),I(w,{key:0,style:{"background-color":"#ada7a0","text-align":"center","overflow-x":"auto"}},{default:t(()=>[(V(!0),y(J,null,M(n(o).user.hero,l=>(V(),I(r,{key:l,class:"d-flex child-flex"},{default:t(()=>[e(B,{"min-width":"150px","max-width":"300px",src:l.path,"aspect-ratio":"1",class:"bg-grey-lighten-2",cover:""},{default:t(()=>[e(C,{onClick:q(s=>_(l.id),["stop"]),class:"icon-delete-image",icon:"mdi-delete-outline"},null,8,["onClick"])]),_:2},1032,["src"])]),_:2},1024))),128))]),_:1})):k("",!0),n(o).user.hero.length?k("",!0):(V(),y("p",le,"لا توجد صور")),e(H,null,{default:t(()=>[e(w,{class:"my-10"},{default:t(()=>[ae,e(u,{ref_key:"imageInputRef",ref:b,onSaveCompressedImages:c},null,512)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},xe={__name:"index",setup(R){const N=v(null),D=v(null),o=A(),p=()=>{N.value.dialogForm()},_=()=>{D.value.openDialogShowHero()};return(a,c)=>{const b=Z;return n(o).loadengApi?k("",!0):(V(),I(W,{key:0,class:"user-info"},{default:t(()=>[e(b,{ref_key:"dialogItemForm",ref:N,onClick:p},null,512),e(te,{ref_key:"dialogHeroForm",ref:D,onClick:_},null,512),e(E,{title:(n(o).user.first_name.en||"N D")+" - "+(n(o).user.first_name.ar||"N D"),subtitle:n(o).user.email||"N D",class:"mt-1"},{default:t(()=>[e(z,null,{default:t(()=>[g(O(n(o).user.phone),1)]),_:1}),e(K,null,{default:t(()=>[e(i,{class:"ma-2 pa-2",subtitle:n(o).user.first_name.en||"N D",title:"First Name (EN)"},null,8,["subtitle"]),e(i,{class:"ma-2 pa-2",subtitle:n(o).user.first_name.ar||"N D",title:"الاسم الاول (AR)"},null,8,["subtitle"]),e(i,{class:"ma-2 pa-2",subtitle:n(o).user.last_name.en||"N D",title:"Last Name (EN)"},null,8,["subtitle"]),e(i,{class:"ma-2 pa-2",subtitle:n(o).user.last_name.ar||"N D",title:"الاسم الاخير (AR)"},null,8,["subtitle"]),e(i,{class:"ma-2 pa-2",subtitle:n(o).user.address.en||"N D",title:"Address (EN)"},null,8,["subtitle"]),e(i,{class:"ma-2 pa-2",subtitle:n(o).user.address.ar||"N D",title:"العنوان (AR)"},null,8,["subtitle"]),e(i,{class:"ma-2 pa-2",subtitle:n(o).user.bio_en||"N D",title:"Bio (EN)"},null,8,["subtitle"]),e(i,{class:"ma-2 pa-2",subtitle:n(o).user.bio_ar||"N D",title:"نبذه عنك (AR)"},null,8,["subtitle"]),e(i,{class:"ma-2 pa-2",subtitle:n(o).user.about_en||"N D",title:"About Me (EN)"},null,8,["subtitle"]),e(i,{class:"ma-2 pa-2",subtitle:n(o).user.about_ar||"N D",title:" عني (AR)"},null,8,["subtitle"]),e(i,{class:"ma-2 pa-2",subtitle:n(o).user.position.en||"N D",title:"Position (EN)"},null,8,["subtitle"]),e(i,{class:"ma-2 pa-2",subtitle:n(o).user.position.ar||"N D",title:"الوظيفة (AR)"},null,8,["subtitle"]),e(i,{class:"ma-2 pa-2",subtitle:n(o).user.username||"N D",title:"User Name"},null,8,["subtitle"])]),_:1})]),_:1},8,["title","subtitle"])]),_:1}))}}};export{xe as default};
