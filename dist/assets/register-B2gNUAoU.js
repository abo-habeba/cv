import{p as q,a5 as J,m as Z,h as G,u as Q,c as S,j as X,B as Y,a3 as H,v as l,x as K,J as W,r as p,q as ee,M as d,P as r,L as i,S as y,am as ae,F as P,U as h,O as A,Q as L,X as te,V as B,T}from"./index-DlKBL2qu.js";import{a as le,V as ne}from"./VCard-m6C5-n4u.js";import{a as oe,V as se,b as f}from"./VTextField-CxEEKvu9.js";import{c as re}from"./forwardRefs-CMpIl6yz.js";import{p as ie,E as ue,z as de,s as ce,b as me,c as ve,d as pe,q as ye,e as fe,g as ge,F as be,A as ke,w as Ve,Y as xe,f as Ce,h as _e,G as we,j as Se,n as Pe,k as z,y as R}from"./VImg-DcZmsifI.js";import{V as he}from"./VForm-CJOChMRh.js";import"./VInput-C6SAx-_Q.js";const Ae=re("v-alert-title"),Be=["success","info","warning","error"],Te=q({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:J,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>Be.includes(e)},...ie(),...ue(),...de(),...ce(),...me(),...ve(),...pe(),...ye(),...Z(),...fe({variant:"flat"})},"VAlert"),b=G()({name:"VAlert",props:Te(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,c){let{emit:s,slots:t}=c;const g=Q(e,"modelValue"),m=S(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),u=S(()=>({color:e.color??e.type,variant:e.variant})),{themeClasses:k}=X(e),{colorClasses:V,colorStyles:x,variantClasses:C}=ge(u),{densityClasses:_}=be(e),{dimensionStyles:a}=ke(e),{elevationClasses:o}=Ve(e),{locationStyles:n}=xe(e),{positionClasses:D}=Ce(e),{roundedClasses:U}=_e(e),{textColorClasses:E,textColorStyles:N}=we(Y(e,"borderColor")),{t:j}=H(),I=S(()=>({"aria-label":j(e.closeLabel),onClick(w){g.value=!1,s("click:close",w)}}));return()=>{const w=!!(t.prepend||m.value),M=!!(t.title||e.title),O=!!(t.close||e.closable);return g.value&&l(e.tag,{class:["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},k.value,V.value,_.value,o.value,D.value,U.value,C.value,e.class],style:[x.value,a.value,n.value,e.style],role:"alert"},{default:()=>{var $,F;return[Se(!1,"v-alert"),e.border&&l("div",{key:"border",class:["v-alert__border",E.value],style:N.value},null),w&&l("div",{key:"prepend",class:"v-alert__prepend"},[t.prepend?l(z,{key:"prepend-defaults",disabled:!m.value,defaults:{VIcon:{density:e.density,icon:m.value,size:e.prominent?44:28}}},t.prepend):l(Pe,{key:"prepend-icon",density:e.density,icon:m.value,size:e.prominent?44:28},null)]),l("div",{class:"v-alert__content"},[M&&l(Ae,{key:"title"},{default:()=>{var v;return[((v=t.title)==null?void 0:v.call(t))??e.title]}}),(($=t.text)==null?void 0:$.call(t))??e.text,(F=t.default)==null?void 0:F.call(t)]),t.append&&l("div",{key:"append",class:"v-alert__append"},[t.append()]),O&&l("div",{key:"close",class:"v-alert__close"},[t.close?l(z,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var v;return[(v=t.close)==null?void 0:v.call(t,{props:I.value})]}}):l(R,K({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},I.value),null)])]}})}}}),Ie={id:"register"},$e={key:0},Fe={key:1},Le={key:2},ze=L("div",{class:"text-subtitle-1 text-medium-emphasis d-flex align-center justify-space-between"},[L("a",{class:"text-caption text-decoration-none text-blue",href:"/login",rel:"noopener noreferrer"}," اذا كان لديك حساب ادخل من هنا")],-1),Oe={__name:"register",setup(e){const c=W(),s=p(!1),t=p({}),g=p(!1),m=p(`${window.location.origin}/`),u=p({}),k=[a=>!!a||"يرجى إدخال اسم المستخدم",a=>!a.includes(" ")||"يجب ألا يحتوي اسم المستخدم على مسافات ",a=>a===a.toLowerCase()||"يجب أن تكون جميع الحروف صغيرة ",a=>!/[{}|\\^[\]`"<>#/?]/.test(a)||'يجب ألا يحتوي اسم المستخدم على العلامات التالية: { } | \\ ^ [ ] ` " < > # / ؟',a=>/^[a-zA-Z]+$/.test(a)||"يجب أن يحتوي اسم المستخدم على أحرف انجليزية فقط"];function V(a){return!(!a.includes(" ")&&a===a.toLowerCase()&&!/[{}|\\^[\]`"<>#/?]/.test(a)&&/^[a-zA-Z]+$/.test(a))}const x=[a=>!!a||"يرجى إدخال الايميل"],C=[a=>!!a||"يرجى إدخال كلمة السر"];ee(()=>{c.loadengApi=!1});function _(){if(V(t.value.username)){const a=document.querySelector(".v-messages__message"),o=window.getComputedStyle(a).backgroundColor;a.style.backgroundColor="#fb564d",setTimeout(()=>{a.style.backgroundColor=o},500);return}g.value=!1,c.loadengApi=!0,te.post("register",t.value).then(a=>{console.log(a),localStorage.setItem("token",a.data.token),localStorage.setItem("user",JSON.stringify(a.data.user)),c.loadengApi=!1,location.reload()}).catch(a=>{u.value=a.response.data.errors,c.loadengApi=!1,console.log(a.response.data)})}return(a,o)=>(i(),d("div",Ie,[l(le,null,{default:r(()=>[l(oe,null,{default:r(()=>[l(se,{cols:"12",sm:"11",md:"8",lg:"6",xl:"6",class:"mx-auto"},{default:r(()=>[l(ne,{class:"register-box mx-auto pa-12 pb-8",elevation:"8","max-width":"448",rounded:"lg"},{default:r(()=>[l(b,{class:"mb-3",type:"warning",variant:"outlined"},{default:r(()=>[y(" هذا الاسم يستخدم في رابط المتصفح ")]),_:1}),l(he,{"fast-fail":"",onSubmit:o[6]||(o[6]=ae(()=>{},["prevent"]))},{default:r(()=>[l(f,{density:"compact",label:" اسم المستخدم ",prefix:m.value,"prepend-inner-icon":"mdi-web",variant:"outlined",modelValue:t.value.username,"onUpdate:modelValue":o[0]||(o[0]=n=>t.value.username=n),rules:k},null,8,["prefix","modelValue"]),u.value.username?(i(),d("div",$e,[(i(!0),d(P,null,h(u.value.username,n=>(i(),B(b,{key:n,class:"mb-3",type:"error",variant:"outlined"},{default:r(()=>[y(T(n),1)]),_:2},1024))),128))])):A("",!0),l(f,{density:"compact",placeholder:"ادخل الايميل","prepend-inner-icon":"mdi-email-outline",variant:"outlined",modelValue:t.value.email,"onUpdate:modelValue":o[1]||(o[1]=n=>t.value.email=n),rules:x},null,8,["modelValue"]),u.value.email?(i(),d("div",Fe,[(i(!0),d(P,null,h(u.value.email,n=>(i(),B(b,{key:n,class:"mb-3",type:"error",variant:"outlined"},{default:r(()=>[y(T(n),1)]),_:2},1024))),128))])):A("",!0),l(f,{"append-inner-icon":s.value?"mdi-eye-off":"mdi-eye",type:s.value?"text":"password",density:"compact",placeholder:"ادخل كلمة المرور","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":o[2]||(o[2]=n=>s.value=!s.value),modelValue:t.value.password,"onUpdate:modelValue":o[3]||(o[3]=n=>t.value.password=n),rules:C},null,8,["append-inner-icon","type","modelValue"]),l(f,{"append-inner-icon":s.value?"mdi-eye-off":"mdi-eye",type:s.value?"text":"password",density:"compact",placeholder:" اعد كتابة كلمة المرور","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":o[4]||(o[4]=n=>s.value=!s.value),rules:[n=>n===t.value.password||"كلمة المرور غير متطابقتان"]},null,8,["append-inner-icon","type","rules"]),l(f,{density:"compact",label:" رقم الهاتف ",type:"number","prepend-inner-icon":"mdi-phone-outline",variant:"outlined",modelValue:t.value.phone,"onUpdate:modelValue":o[5]||(o[5]=n=>t.value.phone=n)},null,8,["modelValue"]),u.value.phone?(i(),d("div",Le,[(i(!0),d(P,null,h(u.value.phone,n=>(i(),B(b,{key:n,class:"mb-3",type:"error",variant:"outlined"},{default:r(()=>[y(T(n),1)]),_:2},1024))),128))])):A("",!0),l(R,{type:"submit",onClick:_,class:"mb-8",color:"blue",size:"large",variant:"tonal",block:""},{default:r(()=>[y(" انشاء حساب ")]),_:1})]),_:1}),ze]),_:1})]),_:1})]),_:1})]),_:1})]))}};export{Oe as default};
