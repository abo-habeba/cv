import{_ as J}from"./imageInput-C9i6PvWT.js";import{s as j,n as $,f as q,d as H}from"./apiService-DV81PuOl.js";import{H as L,O as B,r as i,Q as y,R as S,m as e,S as n,U,Y as t,V as u,W as R,z as M,$ as N,a2 as Q,_ as W,I as Y}from"./index-B3tYXBJP.js";import{x as G,y as k}from"./VLabel-BaZwTqJN.js";import{V as z,d as K,e as _}from"./VRow-DrRhqLiU.js";import{V as P}from"./VForm-cm244eB9.js";import{V as v}from"./VTextField-O2L-yAtq.js";import{V as O}from"./VDialog-BGV0VCxK.js";import{_ as X}from"./ShowImages-1IgyD_yZ.js";import{_ as Z}from"./ThemeSettings-DDP2pUSx.js";import{_ as ee}from"./Breadcrumbs-DIXn5Fs-.js";import{V as le}from"./VTable-DrmPO0FO.js";import{V as te}from"./VContainer-B3x5lKYz.js";import"./VInput-Bd4uGa_Z.js";import"./index-BU68d9V5.js";import"./VChip-Dsv64u3_.js";import"./VSelectionControl-CR8Cw2h7.js";import"./VSwitch-D_MFKd3_.js";const ae={class:"ma-5"},ne={__name:"CredentialForm",emits:["runItems"],setup(E,{expose:I,emit:b}){const{xs:g}=L(),C=B(),h=b,V=i(!1),o=i({}),r=i({}),m=i({}),d=i({});function w(){r.value={ar:"",en:""},m.value={ar:"",en:""},d.value={ar:"",en:""},o.value={credential_id:"",issue_date:"",expiry_date:!1,id:null},V.value=!1,h("runItems")}function D(c){const l=new FormData;l.append("name",JSON.stringify(r.value)),l.append("issuer",JSON.stringify(m.value)),l.append("description",JSON.stringify(d.value)),l.append("credential_id",o.value.credential_id),l.append("issue_date",o.value.issue_date),l.append("expiry_date",o.value.expiry_date||""),l.append("user_id",C.user.id),c.length&&c.forEach(x=>{l.append("photos[]",x,x.name)}),o.value.id&&l.append("_method","put"),j("credentials",l,o.value.id).then(x=>{o.value=x.data,h("runItems"),w()})}const F=i(null),p=()=>{if(!r.value.ar&&!r.value.en){$("حقل الاسم مطلوب عربي او انجليزي");return}if(!m.value.ar&&!m.value.en){$("حقل اسم المنظمة مطلوب عربي او انجليزي");return}if(!o.value.issue_date){$("حقل تاريخ الاصدار مطلوب ");return}F.value&&F.value.compressImages()},f=(c={})=>{Object.keys(c).length!==0&&(r.value=c.name,m.value=c.issuer,d.value=c.description),V.value=!0,o.value=c};return I({addNew:f}),(c,l)=>{const x=J;return y(),S("div",null,[e(G,{onClick:l[0]||(l[0]=a=>f()),color:"info",size:"35",icon:"mdi-plus-outline"}),e(O,{class:"text-center",modelValue:V.value,"onUpdate:modelValue":l[10]||(l[10]=a=>V.value=a),"max-width":"900",fullscreen:R(g)},{default:n(()=>[e(z,{class:"pa-5"},{actions:n(()=>[e(k,{onClick:w},{default:n(()=>[U(" اغلاق ")]),_:1}),e(k,{onClick:p},{default:n(()=>[U(" موافق ")]),_:1})]),default:n(()=>[t("h2",ae,u(o.value.id?"تعديل ":" اضافة "),1),e(P,null,{default:n(()=>[e(K,null,{default:n(()=>[e(_,{cols:"12",md:"6"},{default:n(()=>[e(v,{modelValue:r.value.ar,"onUpdate:modelValue":l[1]||(l[1]=a=>r.value.ar=a),label:" الاسم "},null,8,["modelValue"])]),_:1}),e(_,{cols:"12",md:"6"},{default:n(()=>[e(v,{modelValue:r.value.en,"onUpdate:modelValue":l[2]||(l[2]=a=>r.value.en=a),label:"Name"},null,8,["modelValue"])]),_:1}),e(_,{cols:"12",md:"6"},{default:n(()=>[e(v,{modelValue:m.value.ar,"onUpdate:modelValue":l[3]||(l[3]=a=>m.value.ar=a),label:" اسم المنظمة "},null,8,["modelValue"])]),_:1}),e(_,{cols:"12",md:"6"},{default:n(()=>[e(v,{modelValue:m.value.en,"onUpdate:modelValue":l[4]||(l[4]=a=>m.value.en=a),label:"Issuer"},null,8,["modelValue"])]),_:1}),e(_,{cols:"12",md:"6"},{default:n(()=>[e(v,{modelValue:d.value.ar,"onUpdate:modelValue":l[5]||(l[5]=a=>d.value.ar=a),label:" الوصف "},null,8,["modelValue"])]),_:1}),e(_,{cols:"12",md:"6"},{default:n(()=>[e(v,{modelValue:d.value.en,"onUpdate:modelValue":l[6]||(l[6]=a=>d.value.en=a),label:"Description"},null,8,["modelValue"])]),_:1}),e(_,{cols:"12",md:"6"},{default:n(()=>[e(v,{modelValue:o.value.credential_id,"onUpdate:modelValue":l[7]||(l[7]=a=>o.value.credential_id=a),label:"الرقم التعريفي"},null,8,["modelValue"])]),_:1}),e(_,{cols:"12",md:"6"},{default:n(()=>[e(v,{type:"date",modelValue:o.value.issue_date,"onUpdate:modelValue":l[8]||(l[8]=a=>o.value.issue_date=a),label:"تاريخ الإصدار  "},null,8,["modelValue"])]),_:1}),e(_,{cols:"12",md:"6"},{default:n(()=>[e(v,{type:"date",modelValue:o.value.expiry_date,"onUpdate:modelValue":l[9]||(l[9]=a=>o.value.expiry_date=a),label:"تاريخ الانتهاء"},null,8,["modelValue"])]),_:1}),e(x,{ref_key:"imageInputRef",ref:F,onSaveCompressedImages:D},null,512)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"])])}}},oe=t("h2",{class:"ma-5"},"هل تريد حذف العنصر بالفعل",-1),se=t("thead",null,[t("tr",null,[t("th",{class:"text-center"},"#"),t("th",{class:"text-center"},"الاسم"),t("th",{class:"text-center"},"name"),t("th",{class:"text-center"},"اسم المنظمة"),t("th",{class:"text-center"},"issuer"),t("th",{class:"text-center"},"الوصف"),t("th",{class:"text-center"},"Description"),t("th",{class:"text-center"},"تاريخ الإصدار"),t("th",{class:"text-center"},"تاريخ انتهاء"),t("th",{class:"text-center"},"الرقم التعريفي للشهادة"),t("th",{class:"text-center"},"صورة"),t("th",{class:"text-center"},"تاريخ الإنشاء"),t("th",{class:"text-center sticky-column"},". . .")])],-1),ue={class:"sticky-column"},re={key:2,class:"text-alert"},we={__name:"index",setup(E){const I=B(),b=i(null),g=i(!1),C=i([]),h=i(""),V=i(null);function o(){V.value?V.value.opendialogThemeForm():console.error("opendialogThemeForm is not a function")}const r=i(null),m=p=>{r.value.opaenDialog(p)};M(()=>{d()});function d(){I.loadengApi=!0,q("credentials").then(p=>{C.value=p.data,h.value=""})}function w(p){g.value=!0,h.value=p}function D(){I.loadengApi=!0,H("credentials/delete",{id:[h.value.id]}).then(()=>{d(),g.value=!1})}const F=p=>{var f;(f=b.value)==null||f.addNew(p)};return(p,f)=>{const c=ee,l=Z,x=X,a=ne;return y(),N(te,null,{default:n(()=>[e(c),e(O,{class:"text-center",modelValue:g.value,"onUpdate:modelValue":f[1]||(f[1]=s=>g.value=s),"max-width":"400",persistent:""},{default:n(()=>[e(z,{class:"pa-5"},{default:n(()=>[oe,e(k,{class:"ma-1",onClick:D},{default:n(()=>[U(" موافق ")]),_:1}),e(k,{class:"ma-1",onClick:f[0]||(f[0]=s=>g.value=!1)},{default:n(()=>[U(" اغلاق ")]),_:1})]),_:1})]),_:1},8,["modelValue"]),R(I).user?(y(),N(l,{key:0,ref_key:"dialogThemeForm",ref:V,detTheme:{nameEn:"credentials",nameAr:"الشهادات"},onClick:o},null,512)):Q("",!0),e(x,{ref_key:"isShowImage",ref:r,onRunItems:d},null,512),e(a,{ref_key:"itemForm",ref:b,onRunItems:d},null,512),C.value.length>0?(y(),N(le,{key:1,style:{"white-space":"nowrap"},dir:"rtl",class:"h"},{default:n(()=>[se,t("tbody",null,[(y(!0),S(Y,null,W(C.value,(s,A)=>(y(),S("tr",{key:s.id},[t("td",null,u(A+1),1),t("td",null,u(s.name.ar),1),t("td",null,u(s.name.en),1),t("td",null,u(s.issuer.ar),1),t("td",null,u(s.issuer.en),1),t("td",null,u(s.description.ar),1),t("td",null,u(s.description.en),1),t("td",null,u(s.issue_date),1),t("td",null,u(s.expiry_date),1),t("td",null,u(s.credential_id),1),t("td",null,u(s.image),1),t("td",null,u(s.created_at),1),t("td",ue,[e(k,{onClick:T=>m(s.photos),icon:"mdi-image-edit-outline",color:"info",size:"small"},null,8,["onClick"]),e(k,{onClick:T=>w(s),class:"mx-3",icon:"mdi-delete",color:"red",size:"small"},null,8,["onClick"]),e(k,{onClick:T=>F(s),icon:"mdi-square-edit-outline",color:"info",size:"small"},null,8,["onClick"])])]))),128))])]),_:1})):(y(),S("p",re,"لا توجد اي بيانات"))]),_:1})}}};export{we as default};
