import{_ as J}from"./imageInput-CHiziehD.js";import{s as q,n as N,f as j,d as L}from"./apiService-Cp-R3PSQ.js";import{N as M,U as B,r as i,W as y,X as U,m as e,Y as n,Z as D,a1 as t,_ as u,$ as z,z as W,a2 as $,a7 as X,a4 as Y,O as Z}from"./index-mWbrpzjT.js";import{q as G,A as k}from"./VGrid-BvdFuTaq.js";import{b as O,V as H,a as _}from"./VRow-DC6ecyKV.js";import{V as K}from"./VForm-frfCeRxB.js";import{V as v}from"./VTextField-CMDcSSY3.js";import{V as R}from"./VDialog-CdMwueNr.js";import{_ as P}from"./ShowImages-DcWoYYN4.js";import{_ as Q}from"./ThemeSettings-BN6feLgw.js";import{_ as ee}from"./Breadcrumbs-id2UazJL.js";import{V as le}from"./VTable-DOxk7buS.js";import{V as te}from"./VContainer-CNkGCmK8.js";import"./VInput-CSVCWoD7.js";import"./VLabel-OInUHRNe.js";import"./VChip-DB62mMAT.js";import"./VSelectionControl-Dd1eQIZQ.js";import"./VSwitch-RS7Iv3fF.js";const ae={class:"ma-5"},ne={__name:"CredentialForm",emits:["runItems"],setup(A,{expose:I,emit:F}){const{xs:x}=M(),C=B(),h=F,V=i(!1),o=i({}),r=i({}),m=i({}),d=i({});function w(){r.value={ar:"",en:""},m.value={ar:"",en:""},d.value={ar:"",en:""},o.value={credential_id:"",issue_date:"",expiry_date:!1,id:null},V.value=!1,h("runItems")}function S(c){const l=new FormData;l.append("name",JSON.stringify(r.value)),l.append("issuer",JSON.stringify(m.value)),l.append("description",JSON.stringify(d.value)),l.append("credential_id",o.value.credential_id),l.append("issue_date",o.value.issue_date),l.append("expiry_date",o.value.expiry_date||""),l.append("user_id",C.user.id),c.length&&c.forEach(g=>{l.append("photos[]",g,g.name)}),o.value.id&&l.append("_method","put"),q("credentials",l,o.value.id).then(g=>{o.value=g.data,h("runItems"),w()})}const b=i(null),p=()=>{if(!r.value.ar&&!r.value.en){N("حقل الاسم مطلوب عربي او انجليزي");return}if(!m.value.ar&&!m.value.en){N("حقل اسم المنظمة مطلوب عربي او انجليزي");return}if(!o.value.issue_date){N("حقل تاريخ الاصدار مطلوب ");return}b.value&&b.value.compressImages()},f=(c={})=>{Object.keys(c).length!==0&&(r.value=c.name,m.value=c.issuer,d.value=c.description),V.value=!0,o.value=c};return I({addNew:f}),(c,l)=>{const g=J;return y(),U("div",null,[e(G,{onClick:l[0]||(l[0]=a=>f()),color:"info",size:"35",icon:"mdi-plus-outline"}),e(R,{class:"text-center",modelValue:V.value,"onUpdate:modelValue":l[10]||(l[10]=a=>V.value=a),"max-width":"900",fullscreen:z(x)},{default:n(()=>[e(O,{class:"pa-5"},{actions:n(()=>[e(k,{onClick:w},{default:n(()=>[D(" اغلاق ")]),_:1}),e(k,{onClick:p},{default:n(()=>[D(" موافق ")]),_:1})]),default:n(()=>[t("h2",ae,u(o.value.id?"تعديل ":" اضافة "),1),e(K,null,{default:n(()=>[e(H,null,{default:n(()=>[e(_,{cols:"12",md:"6"},{default:n(()=>[e(v,{modelValue:r.value.ar,"onUpdate:modelValue":l[1]||(l[1]=a=>r.value.ar=a),label:" الاسم "},null,8,["modelValue"])]),_:1}),e(_,{cols:"12",md:"6"},{default:n(()=>[e(v,{modelValue:r.value.en,"onUpdate:modelValue":l[2]||(l[2]=a=>r.value.en=a),label:"Name"},null,8,["modelValue"])]),_:1}),e(_,{cols:"12",md:"6"},{default:n(()=>[e(v,{modelValue:m.value.ar,"onUpdate:modelValue":l[3]||(l[3]=a=>m.value.ar=a),label:" اسم المنظمة "},null,8,["modelValue"])]),_:1}),e(_,{cols:"12",md:"6"},{default:n(()=>[e(v,{modelValue:m.value.en,"onUpdate:modelValue":l[4]||(l[4]=a=>m.value.en=a),label:"Issuer"},null,8,["modelValue"])]),_:1}),e(_,{cols:"12",md:"6"},{default:n(()=>[e(v,{modelValue:d.value.ar,"onUpdate:modelValue":l[5]||(l[5]=a=>d.value.ar=a),label:" الوصف "},null,8,["modelValue"])]),_:1}),e(_,{cols:"12",md:"6"},{default:n(()=>[e(v,{modelValue:d.value.en,"onUpdate:modelValue":l[6]||(l[6]=a=>d.value.en=a),label:"Description"},null,8,["modelValue"])]),_:1}),e(_,{cols:"12",md:"6"},{default:n(()=>[e(v,{modelValue:o.value.credential_id,"onUpdate:modelValue":l[7]||(l[7]=a=>o.value.credential_id=a),label:"الرقم التعريفي"},null,8,["modelValue"])]),_:1}),e(_,{cols:"12",md:"6"},{default:n(()=>[e(v,{type:"date",modelValue:o.value.issue_date,"onUpdate:modelValue":l[8]||(l[8]=a=>o.value.issue_date=a),label:"تاريخ الإصدار  "},null,8,["modelValue"])]),_:1}),e(_,{cols:"12",md:"6"},{default:n(()=>[e(v,{type:"date",modelValue:o.value.expiry_date,"onUpdate:modelValue":l[9]||(l[9]=a=>o.value.expiry_date=a),label:"تاريخ الانتهاء"},null,8,["modelValue"])]),_:1}),e(g,{ref_key:"imageInputRef",ref:b,onSaveCompressedImages:S},null,512)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"])])}}},oe=t("h2",{class:"ma-5"},"هل تريد حذف العنصر بالفعل",-1),se=t("thead",null,[t("tr",null,[t("th",{class:"text-center"},"#"),t("th",{class:"text-center"},"الاسم"),t("th",{class:"text-center"},"name"),t("th",{class:"text-center"},"اسم المنظمة"),t("th",{class:"text-center"},"issuer"),t("th",{class:"text-center"},"الوصف"),t("th",{class:"text-center"},"Description"),t("th",{class:"text-center"},"تاريخ الإصدار"),t("th",{class:"text-center"},"تاريخ انتهاء"),t("th",{class:"text-center"},"الرقم التعريفي للشهادة"),t("th",{class:"text-center"},"صورة"),t("th",{class:"text-center"},"تاريخ الإنشاء"),t("th",{class:"text-center sticky-column"},". . .")])],-1),ue={class:"sticky-column"},re={key:2,class:"text-alert"},we={__name:"index",setup(A){const I=B(),F=i(null),x=i(!1),C=i([]),h=i(""),V=i(null);function o(){V.value?V.value.opendialogThemeForm():console.error("opendialogThemeForm is not a function")}const r=i(null),m=p=>{r.value.opaenDialog(p)};W(()=>{d()});function d(){I.loadengApi=!0,j("credentials").then(p=>{C.value=p.data,h.value=""})}function w(p){x.value=!0,h.value=p}function S(){I.loadengApi=!0,L("credentials/delete",{id:[h.value.id]}).then(()=>{d(),x.value=!1})}const b=p=>{var f;(f=F.value)==null||f.addNew(p)};return(p,f)=>{const c=ee,l=Q,g=P,a=ne;return y(),$(te,null,{default:n(()=>[e(c),e(R,{class:"text-center",modelValue:x.value,"onUpdate:modelValue":f[1]||(f[1]=s=>x.value=s),"max-width":"400",persistent:""},{default:n(()=>[e(O,{class:"pa-5"},{default:n(()=>[oe,e(k,{class:"ma-1",onClick:S},{default:n(()=>[D(" موافق ")]),_:1}),e(k,{class:"ma-1",onClick:f[0]||(f[0]=s=>x.value=!1)},{default:n(()=>[D(" اغلاق ")]),_:1})]),_:1})]),_:1},8,["modelValue"]),z(I).user?(y(),$(l,{key:0,ref_key:"dialogThemeForm",ref:V,detTheme:{nameEn:"credentials",nameAr:"الشهادات"},onClick:o},null,512)):X("",!0),e(g,{ref_key:"isShowImage",ref:r,onRunItems:d},null,512),e(a,{ref_key:"itemForm",ref:F,onRunItems:d},null,512),C.value.length>0?(y(),$(le,{key:1,style:{"white-space":"nowrap"},dir:"rtl",class:"h"},{default:n(()=>[se,t("tbody",null,[(y(!0),U(Z,null,Y(C.value,(s,E)=>(y(),U("tr",{key:s.id},[t("td",null,u(E+1),1),t("td",null,u(s.name.ar),1),t("td",null,u(s.name.en),1),t("td",null,u(s.issuer.ar),1),t("td",null,u(s.issuer.en),1),t("td",null,u(s.description.ar),1),t("td",null,u(s.description.en),1),t("td",null,u(s.issue_date),1),t("td",null,u(s.expiry_date),1),t("td",null,u(s.credential_id),1),t("td",null,u(s.image),1),t("td",null,u(s.created_at),1),t("td",ue,[e(k,{onClick:T=>m(s.photos),icon:"mdi-image-edit-outline",color:"info",size:"small"},null,8,["onClick"]),e(k,{onClick:T=>w(s),class:"mx-3",icon:"mdi-delete",color:"red",size:"small"},null,8,["onClick"]),e(k,{onClick:T=>b(s),icon:"mdi-square-edit-outline",color:"info",size:"small"},null,8,["onClick"])])]))),128))])]),_:1})):(y(),U("p",re,"لا توجد اي بيانات"))]),_:1})}}};export{we as default};
