import{_ as O}from"./ShowImages-Dpo-r8Ua.js";import{_ as L}from"./imageInput-CysBwY53.js";import{n as q}from"./notifyService-CX9qO8sj.js";import{s as J,f as M,d as P}from"./apiService-D1ZfLmBJ.js";import{N as W,U as R,r as m,W as g,X as F,m as e,Y as a,Z as S,$ as o,_,a0 as b,S as H,z as X,a1 as T,a6 as Y,a3 as Z,O as G}from"./index-C8Eiwxo8.js";import{q as K,A as h}from"./VGrid-DwROuQKg.js";import{b as N,V as Q,a as y}from"./VRow-MeymytPm.js";import{V as ee}from"./VForm-BfSbur1M.js";import{V as C}from"./VTextField-D62vwq5h.js";import{V as j}from"./VDialog-DX5GdEP7.js";import{_ as te}from"./ThemeSettings-B0CJeFKE.js";import{_ as le}from"./Breadcrumbs-ChurXzur.js";import{V as oe}from"./VTable-BYmhpZHr.js";import{V as ae}from"./VContainer-BQ31c_MB.js";import"./VInput-C1VPyu_K.js";import"./VLabel-DFvOx4Z2.js";import"./VChip-DShNO9iv.js";import"./VSelectionControl-z3OfWIix.js";import"./VSwitch-Dwge6PYe.js";const ne={class:"ma-5"},se={__name:"ProjectForm",emits:["runItems"],setup(B,{expose:w,emit:I}){const{xs:v}=W(),d=R(),x=I,p=m(!1),r=m({}),u=m({}),c=m({});function V(){u.value={ar:"",en:""},c.value={ar:"",en:""},r.value.id="",p.value=!1,x("runItems")}function U(l){return l.startsWith("https://")?l:"https://"+l}function $(l){const t=new FormData;t.append("title",JSON.stringify(u.value)),t.append("description",JSON.stringify(c.value)),t.append("url",U(r.value.url)),t.append("user_id",d.user.id),l.length&&l.forEach(f=>{t.append("photos[]",f,f.name)}),r.value.id&&t.append("_method","put"),J("projects",t,r.value.id).then(f=>{r.value=f.data,x("runItems"),V()})}const k=m(null),D=()=>{if(console.log(d.loadengApi),d.loadengApi=!0,!u.value.ar&&!u.value.en){q("حقل العنوان مطلوب عربي او انجليزي");return}console.log(d.loadengApi),k.value&&(console.log(d.loadengApi),k.value.compressImages().then(l=>{console.log(l),$(l)}))},i=(l={})=>{Object.keys(l).length!==0&&(u.value=l.title,c.value=l.description),p.value=!0,r.value=l};return w({addNew:i}),(l,t)=>{const f=L;return g(),F("div",null,[e(K,{onClick:t[0]||(t[0]=n=>i()),color:"info",size:"35",icon:"mdi-plus-outline"}),e(j,{class:"text-center",modelValue:p.value,"onUpdate:modelValue":t[6]||(t[6]=n=>p.value=n),"max-width":"900",fullscreen:b(v)},{default:a(()=>[e(N,{class:"pa-5"},{actions:a(()=>[e(h,{onClick:V},{default:a(()=>[S(" اغلاق ")]),_:1}),e(h,{onClick:D},{default:a(()=>[S(" موافق ")]),_:1})]),default:a(()=>[o("h2",ne,_(r.value.id?"تعديل ":" اضافة "),1),e(ee,null,{default:a(()=>[e(Q,null,{default:a(()=>[e(y,{cols:"12",md:"6"},{default:a(()=>[e(C,{modelValue:u.value.ar,"onUpdate:modelValue":t[1]||(t[1]=n=>u.value.ar=n),label:"العنوان"},null,8,["modelValue"])]),_:1}),e(y,{cols:"12",md:"6"},{default:a(()=>[e(C,{modelValue:u.value.en,"onUpdate:modelValue":t[2]||(t[2]=n=>u.value.en=n),label:"title"},null,8,["modelValue"])]),_:1}),e(y,{cols:"12",md:"6"},{default:a(()=>[e(C,{modelValue:c.value.ar,"onUpdate:modelValue":t[3]||(t[3]=n=>c.value.ar=n),label:"الوصف"},null,8,["modelValue"])]),_:1}),e(y,{cols:"12",md:"6"},{default:a(()=>[e(C,{modelValue:c.value.en,"onUpdate:modelValue":t[4]||(t[4]=n=>c.value.en=n),label:"description"},null,8,["modelValue"])]),_:1}),e(y,{cols:"12",md:"6"},{default:a(()=>[e(C,{modelValue:r.value.url,"onUpdate:modelValue":t[5]||(t[5]=n=>r.value.url=n),label:"URL"},null,8,["modelValue"])]),_:1}),e(f,{ref_key:"imageInputRef",ref:k,isMultiple:!0},null,512)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"])])}}},ue=o("h2",{class:"ma-5"},"هل تريد حذف العنصر بالفعل",-1),re=o("thead",null,[o("tr",null,[o("th",{class:"text-center"},"#"),o("th",{class:"text-center"},"العنوان"),o("th",{class:"text-center"},"title"),o("th",{class:"text-center"},"الوصف"),o("th",{class:"text-center"},"description"),o("th",{class:"text-center"},"URL"),o("th",{class:"text-center"},"تاريخ الانشاء"),o("th",{class:"text-center sticky-column"},". . .")])],-1),ie={class:"sticky-column"},me={key:1,class:"text-alert"},$e={__name:"index",setup(B){const w=H(),I=R(),v=m(!1),d=m([]),x=m(""),p=m(null);function r(){p.value?p.value.opendialogThemeForm():console.error("opendialogThemeForm is not a function")}X(()=>{V()});const u=m(null),c=i=>{u.value.opaenDialog(i)};function V(){I.loadengApi=!0,M("projects").then(i=>{d.value=i.data,x.value=""})}function U(i){v.value=!0,x.value=i}function $(){I.loadengApi=!0,P("projects/delete",{id:[x.value.id]}).then(()=>{V(),v.value=!1})}const k=m(null),D=i=>{var l;(l=k.value)==null||l.addNew(i)};return(i,l)=>{const t=le,f=te,n=se,z=O;return g(),T(ae,null,{default:a(()=>[e(t),e(j,{class:"text-center",modelValue:v.value,"onUpdate:modelValue":l[1]||(l[1]=s=>v.value=s),"max-width":"400",persistent:""},{default:a(()=>[e(N,{class:"pa-5"},{default:a(()=>[ue,e(h,{class:"ma-1",onClick:$},{default:a(()=>[S(" موافق ")]),_:1}),e(h,{class:"ma-1",onClick:l[0]||(l[0]=s=>v.value=!1)},{default:a(()=>[S(" اغلاق ")]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(N,{"max-width":"500px",class:"text-center my-5 mx-auto",subtitle:b(w).meta.description,title:b(w).meta.title},{append:a(()=>[b(I).user?(g(),T(f,{key:0,ref_key:"dialogThemeForm",ref:p,detTheme:{nameEn:"projects",nameAr:"المشاريع"},onClick:r},null,512)):Y("",!0)]),prepend:a(()=>[e(n,{ref_key:"itemForm",ref:k,onRunItems:V},null,512)]),_:1},8,["subtitle","title"]),e(z,{ref_key:"isShowImage",ref:u,onRunItems:V},null,512),d.value.length>0?(g(),T(oe,{key:0,style:{"white-space":"nowrap"},dir:"rtl",class:"h"},{default:a(()=>[re,o("tbody",null,[(g(!0),F(G,null,Z(d.value,(s,E)=>(g(),F("tr",{key:s.id},[o("td",null,_(E+1),1),o("td",null,_(s.title.ar),1),o("td",null,_(s.title.en),1),o("td",null,_(s.description.ar),1),o("td",null,_(s.description.en),1),o("td",null,_(s.url),1),o("td",null,_(s.created_at),1),o("td",ie,[e(h,{onClick:A=>c(s.photos),icon:"mdi-image-edit-outline",color:"info",size:"small"},null,8,["onClick"]),e(h,{onClick:A=>U(s),class:"mx-3",icon:"mdi-delete",color:"red",size:"small"},null,8,["onClick"]),e(h,{onClick:A=>D(s),icon:"mdi-square-edit-outline",color:"info",size:"small"},null,8,["onClick"])])]))),128))])]),_:1})):(g(),F("p",me,"لا توجد اي بيانات"))]),_:1})}}};export{$e as default};
