import{E as N,r as f,x as B,H as p,J as U,c as e,K as a,L as I,P as h,V as x,N as V,M as R,S as J,al as H,D as P,O as v,F as L,R as M,Q as z}from"./index-TKAKwIDP.js";import{V as S,q as w,s as C,E as $}from"./VGrid-eYepT4wA.js";import{V as E}from"./VForm-CvfQ3TYF.js";import{a as T,V as u}from"./VRow-B893D1wj.js";import{V as m}from"./VTextField-CW1u6qvo.js";import{V as y}from"./VTextarea-D7SNzBfE.js";import{V as q,_ as K}from"./imageInput-ByoJDhKe.js";import{a as O}from"./VDialog-Cy7hGuso.js";import{_ as Q}from"./ThemeSettings-dLy6dYvc.js";import{_ as j}from"./Breadcrumbs-DmCwKFnp.js";import{a as G,s as W}from"./VSwitch-BpSF2KRr.js";import{V as X}from"./VContainer-C44OOwED.js";import"./VInput-CdCn7wfj.js";import"./VChip-D_8lxPxC.js";import"./notifyService-BLb-S2MK.js";import"./VSelectionControl-CEoEoVU_.js";const Y=V("h2",{class:"ma-5"},R("تعديل "),-1),Z={__name:"UserForm",emits:["runItems"],setup(A,{expose:g,emit:F}){const d=N(),r=f(!1),i=f(null),l=f({}),_=f(null);B(()=>{l.value=d.user,_.value=d.user.profile_image});const b=n=>{H.error(n,{theme:"colored",position:H.POSITION.TOP_LEFT})};function c(){r.value=!1}const k=()=>{const n=i.value;if(n){const o=new FileReader;o.onload=t=>{_.value=t.target.result},o.readAsDataURL(n)}else _.value=null};function D(){d.loadengApi=!0;const n=new FormData;n.append("first_name",JSON.stringify(l.value.first_name)),n.append("last_name",JSON.stringify(l.value.last_name)),n.append("address",JSON.stringify(l.value.address)),n.append("bio_ar",l.value.bio_ar),n.append("bio_en",l.value.bio_en),n.append("about_ar",l.value.about_ar),n.append("about_en",l.value.about_en),n.append("position",JSON.stringify(l.value.position)),n.append("email",l.value.email),n.append("phone",l.value.phone),i.value&&n.append("profile_image",i.value),n.append("_method","put"),J.post(`users/${l.value.id}`,n).then(o=>{d.fetchUser().then(()=>{d.loadengApi=!1})}).catch(o=>{d.loadengApi=!1,b("هناك خطا ما حاول مره اخري")})}return g({dialogForm:()=>{r.value=!0}}),(n,o)=>(p(),U("div",null,[e(S,{icon:"mdi-square-edit-outline",color:"info",size:"35"}),e(O,{class:"text-center",modelValue:r.value,"onUpdate:modelValue":o[15]||(o[15]=t=>r.value=t),"max-width":"900",persistent:""},{default:a(()=>[e(w,{class:"pa-5"},{actions:a(()=>[e(C,{onClick:c},{default:a(()=>[I(" اغلاق ")]),_:1}),e(C,{onClick:D},{default:a(()=>[I(" موافق ")]),_:1})]),default:a(()=>[Y,e(E,null,{default:a(()=>[e(T,null,{default:a(()=>[e(u,{cols:"12",md:"6"},{default:a(()=>[e(m,{modelValue:l.value.first_name.ar,"onUpdate:modelValue":o[0]||(o[0]=t=>l.value.first_name.ar=t),label:" الاسم الاول "},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(m,{modelValue:l.value.first_name.en,"onUpdate:modelValue":o[1]||(o[1]=t=>l.value.first_name.en=t),label:"First Name"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(m,{modelValue:l.value.last_name.ar,"onUpdate:modelValue":o[2]||(o[2]=t=>l.value.last_name.ar=t),label:" اسمك بالكامل  "},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(m,{modelValue:l.value.last_name.en,"onUpdate:modelValue":o[3]||(o[3]=t=>l.value.last_name.en=t),label:" Full Name"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(m,{modelValue:l.value.address.ar,"onUpdate:modelValue":o[4]||(o[4]=t=>l.value.address.ar=t),label:" العنوان "},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(m,{modelValue:l.value.address.en,"onUpdate:modelValue":o[5]||(o[5]=t=>l.value.address.en=t),label:" Address"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(m,{modelValue:l.value.position.ar,"onUpdate:modelValue":o[6]||(o[6]=t=>l.value.position.ar=t),label:" الوظيفة "},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(m,{modelValue:l.value.position.en,"onUpdate:modelValue":o[7]||(o[7]=t=>l.value.position.en=t),label:" Position"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(y,{dir:"rtl",style:{direction:"rtl","text-align":"right","unicode-bidi":"bidi-override"},modelValue:l.value.bio_ar,"onUpdate:modelValue":o[8]||(o[8]=t=>l.value.bio_ar=t),label:" نبذه عنك "},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(y,{modelValue:l.value.bio_en,"onUpdate:modelValue":o[9]||(o[9]=t=>l.value.bio_en=t),label:" Bio"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(y,{dir:"rtl",style:{direction:"rtl","text-align":"right","unicode-bidi":"bidi-override"},modelValue:l.value.about_ar,"onUpdate:modelValue":o[10]||(o[10]=t=>l.value.about_ar=t),label:"  عني "},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(y,{modelValue:l.value.about_en,"onUpdate:modelValue":o[11]||(o[11]=t=>l.value.about_en=t),label:" About Me"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(m,{modelValue:l.value.email,"onUpdate:modelValue":o[12]||(o[12]=t=>l.value.email=t),label:" Email"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(m,{modelValue:l.value.phone,"onUpdate:modelValue":o[13]||(o[13]=t=>l.value.phone=t),label:" Phone"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(q,{modelValue:i.value,"onUpdate:modelValue":o[14]||(o[14]=t=>i.value=t),label:" الصورة الشخصيه ",accept:"image/*","prepend-icon":"mdi-camera",onChange:k},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[_.value?(p(),h($,{key:0,style:{margin:"auto"},src:_.value,"max-width":"200"},null,8,["src"])):x("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}},ee=V("h2",{class:"ma-5"},"صور الرئيسية",-1),le={key:1,class:"text-alert"},oe=V("h3",null,"يمكنك تحميل صوره او اكثر",-1),ae={__name:"HeroForm",emits:["runItems"],setup(A,{expose:g,emit:F}){const{xs:d}=P(),r=N(),i=f(!1),l=s=>{G("photo",s).then(()=>{r.user.hero=r.user.hero.filter(n=>n.id!==s)})};function _(){i.value=!1}function b(s){const n=new FormData;n.append("user_id",r.user.id),s.length&&s.forEach(o=>{n.append("hero[]",o,o.name)}),n.append("_method","put"),W("users",n,r.user.id).then(o=>{r.user.hero=o.data.hero})}const c=f(null),k=()=>{c.value&&c.value.compressImages(5).then(s=>{b(s)}).catch(s=>{console.log("error ",s)})};return g({openDialogShowHero:()=>{i.value=!0}}),(s,n)=>{const o=K;return p(),U("div",null,[e(S,{onClick:n[0]||(n[0]=t=>s.addNew()),color:"info",size:"35",icon:"mdi-image-multiple-outline"}),e(O,{style:{"z-index":"50"},class:"text-center",modelValue:i.value,"onUpdate:modelValue":n[1]||(n[1]=t=>i.value=t),"max-width":"900",fullscreen:v(d)},{default:a(()=>[e(w,{class:"pa-5"},{actions:a(()=>[e(C,{onClick:_},{default:a(()=>[I(" اغلاق ")]),_:1}),e(C,{onClick:k},{default:a(()=>[I(" موافق ")]),_:1})]),default:a(()=>[ee,v(r).user.hero.length?(p(),h(T,{key:0,style:{"background-color":"#ada7a0","text-align":"center","overflow-x":"auto"}},{default:a(()=>[(p(!0),U(L,null,M(v(r).user.hero,t=>(p(),h(u,{key:t,class:"d-flex child-flex"},{default:a(()=>[e($,{"min-width":"150px","max-width":"300px",src:t.path,"aspect-ratio":"1",class:"bg-grey-lighten-2",cover:""},{default:a(()=>[e(S,{onClick:z(ue=>l(t.id),["stop"]),class:"icon-delete-image",icon:"mdi-delete-outline"},null,8,["onClick"])]),_:2},1032,["src"])]),_:2},1024))),128))]),_:1})):x("",!0),v(r).user.hero.length?x("",!0):(p(),U("p",le,"لا توجد صور")),e(E,null,{default:a(()=>[e(T,{class:"my-10"},{default:a(()=>[oe,e(o,{ref_key:"imageInputRef",ref:c,onSaveCompressedImages:b},null,512)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"])])}}},te=V("p",null,"الصور",-1),ne=V("p",null,"تعديل البيانات",-1),ke={__name:"index",setup(A){const g=f(null),F=f(null),d=N(),r=f(null);function i(){r.value?r.value.opendialogThemeForm():console.error("opendialogThemeForm is not a function")}const l=f(null);function _(){l.value?l.value.opendialogThemeForm():console.error("opendialogThemeForm is not a function")}const b=()=>{g.value.dialogForm()},c=()=>{F.value.openDialogShowHero()};return(k,D)=>{const s=j,n=Q,o=Z;return v(d).loadengApi?x("",!0):(p(),h(X,{key:0,class:"user-info"},{default:a(()=>[e(s),e(T,null,{default:a(()=>[e(u,{cols:"12"},{default:a(()=>[e(w,{"max-width":"500px",class:"text-center mx-auto",subtitle:"تعديل تنسيقات قسم الرئيسية ",title:"الرئيسية"},{append:a(()=>[v(d).user?(p(),h(n,{key:0,ref_key:"dialogThemeFormHero",ref:l,detTheme:{nameEn:"hero",nameAr:"الرئيسية",hero:!0},onClick:_},null,512)):x("",!0)]),prepend:a(()=>[V("div",null,[e(ae,{ref_key:"dialogHeroForm",ref:F,onClick:c},null,512),te])]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(w,{"max-width":"500px",class:"text-center mx-auto",subtitle:"تعديل قسم البيانات الشخصية ",title:"البيانات الشخصية"},{append:a(()=>[v(d).user?(p(),h(n,{key:0,ref_key:"dialogThemeFormAbout",ref:r,detTheme:{nameEn:"about",nameAr:"من نحن",about:!0},onClick:i},null,512)):x("",!0)]),prepend:a(()=>[V("div",null,[e(o,{ref_key:"dialogItemForm",ref:g,onClick:b},null,512),ne])]),_:1})]),_:1})]),_:1})]),_:1}))}}};export{ke as default};
