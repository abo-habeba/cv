import{_ as Y}from"./ThemeSettings-BN6feLgw.js";import{_ as Z}from"./Breadcrumbs-id2UazJL.js";import{U as q,r as p,c as G,z as H,a5 as x,W as o,a2 as m,Y as e,m as s,Z as c,_ as r,a7 as u,a1 as n,$ as I,X as f,a4 as J,O as K,al as T,a8 as Q}from"./index-mWbrpzjT.js";import{b as w,g as ee,c as U,e as F,d as O,a as S}from"./VRow-DC6ecyKV.js";import{A as v}from"./VGrid-BvdFuTaq.js";import{V as $}from"./VDialog-CdMwueNr.js";import{V as ae}from"./VTable-DOxk7buS.js";import{V as te}from"./VContainer-CNkGCmK8.js";import"./apiService-Cp-R3PSQ.js";import"./VTextField-CMDcSSY3.js";import"./VInput-CSVCWoD7.js";import"./VLabel-OInUHRNe.js";import"./VForm-frfCeRxB.js";import"./VSwitch-RS7Iv3fF.js";import"./VSelectionControl-Dd1eQIZQ.js";const le=["href"],oe=n("br",null,null,-1),se=["href"],ne=n("hr",{class:"ma-2"},null,-1),re=n("h2",{class:"ma-5"},"هل تريد حذف العنصر بالفعل",-1),ue=n("thead",null,[n("tr",null,[n("th",{class:"text-center"},"#"),n("th",{class:"text-center"},"الاسم"),n("th",{class:"text-center"},"الموضوع"),n("th",{class:"text-center"},"تاريخ الإنشاء"),n("th",{class:"text-center"})])],-1),ce=["onClick"],de={key:0},ie={key:1},me={key:2},_e={key:3},fe={key:1,class:"text-alert mt-10"},pe={key:2,class:"text-alert mt-10"},Ue={__name:"index",setup(ve){const _=q(),B=t=>{T.success(t,{theme:"colored",position:T.POSITION.TOP_LEFT})},C=t=>{T.error(t,{theme:"colored",position:T.POSITION.TOP_LEFT})},g=p(!1),k=p(!1),i=p({}),y=p([]),V=G(()=>y.value.filter(t=>t.read==="0")),a=p(""),h=p(!0);function D(t){g.value=!0,a.value=t}H(()=>{b()});function N(){h.value=!1,i.value=y.value}function j(){h.value=!0,console.log(V.value),i.value=V.value}function E(t){if(a.value=t,console.log(a.value),console.log(typeof t.read),t.read==="0"){console.log("run updateItems"),x.put(`contacts/${t.id}`,{read:"1"}).then(()=>{y.value=y.value.map(d=>d.id===t.id?{...d,read:"1"}:d),i.value=V.value,_.user.unread_contacts_count-=1,k.value=!0}).catch(()=>{C("هناك خطا ما حاول مره اخري")});return}k.value=!0}function b(){_.loadengApi=!0,x.get("contacts",i.value).then(t=>{i.value=t.data.data,y.value=t.data.data,j(),_.loadengApi=!1,a.value=""}).catch(()=>{C("هناك خطا ما حاول مره اخري")})}function P(){_.loadengApi=!0,x.get("contacts-mark-all-read").then(()=>{_.user.unread_contacts_count=0,b()}).catch(()=>{C("هناك خطا ما حاول مره اخري")})}const A=p(null);function z(){A.value?A.value.opendialogThemeForm():console.error("opendialogThemeForm is not a function")}function L(){_.loadengApi=!0,x.post("contacts/delete",{id:[a.value.id]}).then(()=>{b(),g.value=!1,_.loadengApi=!1,B(" تم الحذف")}).catch(t=>{C(t.response.data.message)})}return(t,d)=>{const M=Z,R=Y;return o(),m(te,null,{default:e(()=>[s(M),s($,{class:"text-center",modelValue:k.value,"onUpdate:modelValue":d[1]||(d[1]=l=>k.value=l),"max-width":"600",persistent:""},{default:e(()=>[s(w,{class:"pa-5"},{default:e(()=>[s(ee,{class:"pa-1"},{default:e(()=>[a.value.name.ar?(o(),m(U,{key:0},{default:e(()=>[c(r(a.value.name.ar),1)]),_:1})):u("",!0),a.value.name.en?(o(),m(U,{key:1},{default:e(()=>[c(r(a.value.name.en),1)]),_:1})):u("",!0),a.value.subject.ar?(o(),m(F,{key:2},{default:e(()=>[c(r(a.value.subject.ar),1)]),_:1})):u("",!0),a.value.subject.en?(o(),m(F,{key:3},{default:e(()=>[c(r(a.value.subject.en),1)]),_:1})):u("",!0),n("a",{href:"mailto:"+a.value.email},r(a.value.email),9,le),oe,n("a",{href:"tel:"+a.value.phone},r(a.value.phone),9,se)]),_:1}),a.value.message.ar?(o(),m(O,{key:0,class:"pa-2"},{default:e(()=>[c(r(a.value.message.ar),1)]),_:1})):u("",!0),a.value.message.en?(o(),m(O,{key:1,class:"pa-2"},{default:e(()=>[c(r(a.value.message.en),1)]),_:1})):u("",!0),s(F,null,{default:e(()=>[c(r(a.value.created_at),1)]),_:1}),ne,s(v,{class:"ma-1",onClick:d[0]||(d[0]=l=>k.value=!1)},{default:e(()=>[c(" موافق ")]),_:1})]),_:1})]),_:1},8,["modelValue"]),s($,{class:"text-center",modelValue:g.value,"onUpdate:modelValue":d[3]||(d[3]=l=>g.value=l),"max-width":"400",persistent:""},{default:e(()=>[s(w,{class:"pa-5"},{default:e(()=>[re,s(v,{class:"ma-1",onClick:L},{default:e(()=>[c(" موافق ")]),_:1}),s(v,{class:"ma-1",onClick:d[2]||(d[2]=l=>g.value=!1)},{default:e(()=>[c(" اغلاق ")]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(S,{col:"12"},{default:e(()=>[I(_).user?(o(),m(R,{key:0,ref_key:"dialogThemeForm",ref:A,detTheme:{nameEn:"contacts",nameAr:"الرسائل"},onClick:z},null,512)):u("",!0)]),_:1}),s(S,{col:"12"},{default:e(()=>[s(v,{onClick:P,disabled:I(V).length<=0,color:I(V).length>0?"primary":"grey"},{default:e(()=>[c(" تعين الكل ك مقروء ")]),_:1},8,["disabled","color"])]),_:1}),s(S,null,{default:e(()=>[s(v,{class:"ma-1",onClick:N,color:h.value?"primary":"grey"},{default:e(()=>[c(" عرض الكل ")]),_:1},8,["color"]),s(v,{class:"ma-1",onClick:j,color:h.value?"grey":"primary"},{default:e(()=>[c(" عرض الغير مقروء ")]),_:1},8,["color"])]),_:1}),i.value.length>0?(o(),m(ae,{key:0,style:{"white-space":"nowrap"},dir:"rtl",class:"h mt-10"},{default:e(()=>[ue,n("tbody",null,[(o(!0),f(K,null,J(i.value,(l,W)=>(o(),f("tr",{key:l.id,onClick:X=>E(l),style:Q({color:l.read==="0"?"#2196F3":"",cursor:"pointer"})},[n("td",null,r(W+1),1),l.name.ar?(o(),f("td",de,r(l.name.ar),1)):u("",!0),l.name.en?(o(),f("td",ie,r(l.name.en),1)):u("",!0),l.subject.ar?(o(),f("td",me,r(l.subject.ar),1)):u("",!0),l.subject.en?(o(),f("td",_e,r(l.subject.en),1)):u("",!0),n("td",null,r(l.created_at),1),n("td",null,[s(v,{onClick:X=>D(l),class:"ml-3",icon:"mdi-delete",color:"red",size:"small"},null,8,["onClick"])])],12,ce))),128))])]),_:1})):u("",!0),!h.value&&i.value.length<=0?(o(),f("p",fe,"لا توجد اي رسائل")):u("",!0),h.value&&i.value.length<=0?(o(),f("p",pe,"لا توجد أي رسائل غير مقروءة")):u("",!0)]),_:1})}}};export{Ue as default};
