import{_ as z}from"./imageInput-BhNYU5A7.js";import{s as E,n as L,f as O,d as A}from"./apiService-lYiCfr6d.js";import{F as b,r as d,H as V,I as w,v as e,L as a,O as S,M as t,P as f,q as J,S as D,J as P,K as H,R as M,Q as q}from"./index-BMPI8Pfu.js";import{x as v}from"./forwardRefs-BZ7luYxp.js";import{e as k,V as N,d as K}from"./VRow-B0i0CXMD.js";import{V as Q}from"./VForm-Bf6b0sWc.js";import{V as C,a as W}from"./VTextField-9dgDrPQ_.js";import{V as R}from"./VDialog-6EcSlwZo.js";import{_ as G}from"./ShowImages-W_gHT6QB.js";import{_ as X}from"./ThemeSettings-CkLv8nOe.js";import{V as Y}from"./VTable-BPwn464A.js";import"./VInput-CchZ2v_D.js";import"./VChip-zPkE21CN.js";import"./VOverlay-AvKtX2Tm.js";import"./VSwitch-CB4kntBW.js";const Z={class:"ma-5"},ee={__name:"ProjectForm",emits:["runItems"],setup(j,{expose:x,emit:y}){const _=b(),g=y,c=d(!1),s=d({}),r=d({}),m=d({});function F(){r.value={ar:"",en:""},m.value={ar:"",en:""},s.value.id="",c.value=!1,g("runItems")}function h(o){return o.startsWith("https://")?o:"https://"+o}function T(o){const l=new FormData;l.append("title",JSON.stringify(r.value)),l.append("description",JSON.stringify(m.value)),l.append("url",h(s.value.url)),l.append("user_id",_.user.id),o.length&&o.forEach(p=>{l.append("photos[]",p,p.name)}),s.value.id&&l.append("_method","put"),E("projects",l,s.value.id).then(p=>{s.value=p.data,g("runItems"),F()})}const I=d(null),U=()=>{if(!r.value.ar&&!r.value.en){L("حقل العنوان مطلوب عربي او انجليزي");return}I.value&&I.value.compressImages()},i=(o={})=>{Object.keys(o).length!==0&&(r.value=o.title,m.value=o.description),c.value=!0,s.value=o};return x({addNew:i}),(o,l)=>{const p=z;return V(),w("div",null,[e(k,{cols:"auto"},{default:a(()=>[e(v,{onClick:l[0]||(l[0]=n=>i()),icon:"mdi-plus",color:"success",size:"small",to:""})]),_:1}),e(R,{class:"text-center",modelValue:c.value,"onUpdate:modelValue":l[6]||(l[6]=n=>c.value=n),"max-width":"900",persistent:""},{default:a(()=>[e(N,{class:"pa-5"},{actions:a(()=>[e(v,{onClick:F},{default:a(()=>[S(" اغلاق ")]),_:1}),e(v,{onClick:U},{default:a(()=>[S(" موافق ")]),_:1})]),default:a(()=>[t("h2",Z,f(s.value.id?"تعديل ":" اضافة "),1),e(Q,null,{default:a(()=>[e(K,null,{default:a(()=>[e(k,{cols:"12",md:"6"},{default:a(()=>[e(C,{modelValue:r.value.ar,"onUpdate:modelValue":l[1]||(l[1]=n=>r.value.ar=n),label:"العنوان"},null,8,["modelValue"])]),_:1}),e(k,{cols:"12",md:"6"},{default:a(()=>[e(C,{modelValue:r.value.en,"onUpdate:modelValue":l[2]||(l[2]=n=>r.value.en=n),label:"title"},null,8,["modelValue"])]),_:1}),e(k,{cols:"12",md:"6"},{default:a(()=>[e(C,{modelValue:m.value.ar,"onUpdate:modelValue":l[3]||(l[3]=n=>m.value.ar=n),label:"الوصف"},null,8,["modelValue"])]),_:1}),e(k,{cols:"12",md:"6"},{default:a(()=>[e(C,{modelValue:m.value.en,"onUpdate:modelValue":l[4]||(l[4]=n=>m.value.en=n),label:"description"},null,8,["modelValue"])]),_:1}),e(k,{cols:"12",md:"6"},{default:a(()=>[e(C,{modelValue:s.value.url,"onUpdate:modelValue":l[5]||(l[5]=n=>s.value.url=n),label:"URL"},null,8,["modelValue"])]),_:1}),e(p,{ref_key:"imageInputRef",ref:I,onSaveCompressedImages:T},null,512)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},le=t("h2",{class:"ma-5"},"هل تريد حذف العنصر بالفعل",-1),te=t("thead",null,[t("tr",null,[t("th",{class:"text-center"},"#"),t("th",{class:"text-center"},"العنوان"),t("th",{class:"text-center"},"title"),t("th",{class:"text-center"},"الوصف"),t("th",{class:"text-center"},"description"),t("th",{class:"text-center"},"URL"),t("th",{class:"text-center"},"تاريخ الانشاء"),t("th",{class:"text-center sticky-column"},". . .")])],-1),oe={class:"sticky-column"},ae={key:2,class:"text-alert"},ke={__name:"index",setup(j){const x=b(),y=d(null),_=d(!1),g=d([]),c=d(""),s=d(null);function r(){s.value?s.value.opendialogThemeForm():console.error("opendialogThemeForm is not a function")}J(()=>{h()});const m=d(null),F=i=>{m.value.opaenDialog(i)};function h(){x.loadengApi=!0,O("projects").then(i=>{g.value=i.data,c.value=""})}function T(i){_.value=!0,c.value=i}function I(){x.loadengApi=!0,A("projects/delete",{id:[c.value.id]}).then(()=>{h(),_.value=!1})}const U=i=>{var o;(o=y.value)==null||o.addNew(i)};return(i,o)=>{const l=X,p=G,n=ee;return V(),D(W,null,{default:a(()=>[e(R,{class:"text-center",modelValue:_.value,"onUpdate:modelValue":o[1]||(o[1]=u=>_.value=u),"max-width":"400",persistent:""},{default:a(()=>[e(N,{class:"pa-5"},{default:a(()=>[le,e(v,{class:"ma-1",onClick:I},{default:a(()=>[S(" موافق ")]),_:1}),e(v,{class:"ma-1",onClick:o[0]||(o[0]=u=>_.value=!1)},{default:a(()=>[S(" اغلاق ")]),_:1})]),_:1})]),_:1},8,["modelValue"]),P(x).user?(V(),D(l,{key:0,ref_key:"dialogThemeForm",ref:s,detTheme:{nameEn:"projects",nameAr:"المشاريع"},onClick:r},null,512)):H("",!0),e(p,{ref_key:"isShowImage",ref:m,onRunItems:h},null,512),e(n,{ref_key:"itemForm",ref:y,onRunItems:h},null,512),g.value.length>0?(V(),D(Y,{key:1,style:{"white-space":"nowrap"},dir:"rtl",class:"h"},{default:a(()=>[te,t("tbody",null,[(V(!0),w(q,null,M(g.value,(u,B)=>(V(),w("tr",{key:u.id},[t("td",null,f(B+1),1),t("td",null,f(u.title.ar),1),t("td",null,f(u.title.en),1),t("td",null,f(u.description.ar),1),t("td",null,f(u.description.en),1),t("td",null,f(u.url),1),t("td",null,f(u.created_at),1),t("td",oe,[e(v,{onClick:$=>F(u.photos),icon:"mdi-image-edit-outline",color:"info",size:"small"},null,8,["onClick"]),e(v,{onClick:$=>T(u),class:"mx-3",icon:"mdi-delete",color:"red",size:"small"},null,8,["onClick"]),e(v,{onClick:$=>U(u),icon:"mdi-pencil",color:"info",size:"small"},null,8,["onClick"])])]))),128))])]),_:1})):(V(),w("p",ae,"لا توجد اي بيانات"))]),_:1})}}};export{ke as default};
