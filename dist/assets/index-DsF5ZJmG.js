import{_ as R,a as z}from"./ShowImages-Bur4Xyjk.js";import{s as T,n as E,f as J,d as O}from"./apiService-BA9EEqEn.js";import{J as U,r as m,L as g,M as w,v as e,P as n,S,Q as t,T as f,q as A,V as D,U as L,F as M}from"./index-C8DWXbqV.js";import{t as v}from"./VBtn-pRSLUBRL.js";import{V as k,a as j,b as I}from"./VTextField-oaDLYT2i.js";import{V as $,a as q}from"./VCard-C-Jb_4YB.js";import{V as P}from"./VForm-DLnFpABe.js";import{V as N}from"./VDialog-CKN-AFhS.js";import{V as Q}from"./VTable-CJA41c6O.js";import"./VFileInput-40nLz5uG.js";import"./VInput-B9NLRJ23.js";import"./VIcon-B9YTT6W-.js";import"./VChip-Bv7O8EVZ.js";import"./VOverlay-BRtty8ag.js";const G={class:"ma-5"},H={__name:"SkillsForm",emits:["runItems"],setup(B,{expose:h,emit:C}){const _=U(),p=m(!1),o=m({}),u=m({}),c=m({}),V=C;function y(){u.value={ar:"",en:""},c.value={ar:"",en:""},o.value.level="",o.value.id="",p.value=!1,V("runItems")}function b(i){const l=new FormData;l.append("name",JSON.stringify(u.value)),l.append("description",JSON.stringify(c.value)),l.append("level",o.value.level),l.append("user_id",_.user.id),i.length&&i.forEach(a=>{l.append("photos[]",a,a.name)}),o.value.id&&l.append("_method","put"),T("skills",l,o.value.id).then(a=>{o.value=a.data,V("runItems"),y()})}const x=m(null),r=()=>{if(!u.value.ar&&!u.value.en){E("حقل الاسم مطلوب عربي او انجليزي");return}x.value&&x.value.compressImages()},d=(i={})=>{Object.keys(i).length!==0&&(u.value=i.name,c.value=i.description),p.value=!0,o.value=i};return h({addNew:d}),(i,l)=>{const a=R;return g(),w("div",null,[e(k,{cols:"auto"},{default:n(()=>[e(v,{onClick:l[0]||(l[0]=s=>d()),icon:"mdi-plus",color:"success",size:"small",to:""})]),_:1}),e(N,{class:"text-center",modelValue:p.value,"onUpdate:modelValue":l[6]||(l[6]=s=>p.value=s),"max-width":"900",persistent:""},{default:n(()=>[e($,{class:"pa-5"},{actions:n(()=>[e(v,{onClick:y},{default:n(()=>[S(" اغلاق ")]),_:1}),e(v,{onClick:r},{default:n(()=>[S(" موافق ")]),_:1})]),default:n(()=>[t("h2",G,f(o.value.id?"تعديل ":" اضافة "),1),e(P,null,{default:n(()=>[e(j,null,{default:n(()=>[e(k,{cols:"12",md:"6"},{default:n(()=>[e(I,{modelValue:u.value.ar,"onUpdate:modelValue":l[1]||(l[1]=s=>u.value.ar=s),label:"الاسم"},null,8,["modelValue"])]),_:1}),e(k,{cols:"12",md:"6"},{default:n(()=>[e(I,{modelValue:u.value.en,"onUpdate:modelValue":l[2]||(l[2]=s=>u.value.en=s),label:"name"},null,8,["modelValue"])]),_:1}),e(k,{cols:"12",md:"6"},{default:n(()=>[e(I,{modelValue:c.value.ar,"onUpdate:modelValue":l[3]||(l[3]=s=>c.value.ar=s),label:"الوصف"},null,8,["modelValue"])]),_:1}),e(k,{cols:"12",md:"6"},{default:n(()=>[e(I,{modelValue:c.value.en,"onUpdate:modelValue":l[4]||(l[4]=s=>c.value.en=s),label:"description"},null,8,["modelValue"])]),_:1}),e(k,{cols:"12",md:"6"},{default:n(()=>[e(I,{modelValue:o.value.level,"onUpdate:modelValue":l[5]||(l[5]=s=>o.value.level=s),type:"number",label:"المستوي",rules:[s=>s>=1&&s<=100||"يجب أن يكون الرقم بين 1 الي 100"]},null,8,["modelValue","rules"])]),_:1}),e(a,{ref_key:"imageInputRef",ref:x,onSaveCompressedImages:b},null,512)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},K=t("h2",{class:"ma-5"},"هل تريد حذف العنصر بالفعل",-1),W=t("thead",null,[t("tr",null,[t("th",{class:"text-center"},"#"),t("th",{class:"text-center"},"الاسم"),t("th",{class:"text-center"},"name"),t("th",{class:"text-center"},"الوصف"),t("th",{class:"text-center"},"description"),t("th",{class:"text-center"},"المستوي"),t("th",{class:"text-center"},"تاريخ الانشا"),t("th",{class:"text-center sticky-column"},". . .")])],-1),X={class:"sticky-column"},Y={key:1,class:"text-alert"},pe={__name:"index",setup(B){const h=U(),C=m(null),_=m(!1),p=m([]),o=m(""),u=m(null),c=r=>{u.value.opaenDialog(r)};A(()=>{V()});function V(){h.loadengApi=!0,J("skills").then(r=>{p.value=r.data,o.value=""})}function y(r){_.value=!0,o.value=r}function b(){h.loadengApi=!0,O("skills/delete",{id:[o.value.id]}).then(()=>{V(),_.value=!1})}const x=r=>{var d;(d=C.value)==null||d.addNew(r)};return(r,d)=>{const i=z,l=H;return g(),D(q,null,{default:n(()=>[e(N,{class:"text-center",modelValue:_.value,"onUpdate:modelValue":d[1]||(d[1]=a=>_.value=a),"max-width":"400",persistent:""},{default:n(()=>[e($,{class:"pa-5"},{default:n(()=>[K,e(v,{class:"ma-1",onClick:b},{default:n(()=>[S(" موافق ")]),_:1}),e(v,{class:"ma-1",onClick:d[0]||(d[0]=a=>_.value=!1)},{default:n(()=>[S(" اغلاق ")]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(i,{ref_key:"isShowImage",ref:u,onRunItems:V},null,512),e(l,{ref_key:"itemForm",ref:C,onRunItems:V},null,512),p.value.length>0?(g(),D(Q,{key:0,style:{"white-space":"nowrap"},dir:"rtl",class:"h"},{default:n(()=>[W,t("tbody",null,[(g(!0),w(M,null,L(p.value,(a,s)=>(g(),w("tr",{key:s},[t("td",null,f(s+1),1),t("td",null,f(a.name.ar),1),t("td",null,f(a.name.en),1),t("td",null,f(a.description.ar),1),t("td",null,f(a.description.en),1),t("td",null,f(a.level),1),t("td",null,f(a.created_at),1),t("td",X,[e(v,{onClick:F=>c(a.photos),icon:"mdi-image-edit-outline",color:"info",size:"small"},null,8,["onClick"]),e(v,{onClick:F=>y(a),class:"mx-3",icon:"mdi-delete",color:"red",size:"small"},null,8,["onClick"]),e(v,{onClick:F=>x(a),icon:"mdi-pencil",color:"info",size:"small"},null,8,["onClick"])])]))),128))])]),_:1})):(g(),w("p",Y,"لا توجد اي بيانات"))]),_:1})}}};export{pe as default};
