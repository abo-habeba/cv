import{b as B,u as L,V as w}from"./VSelectionControl-BeKEJJAg.js";import{a as h,d as F,s as P,b as $,g as O,n as C,f as q}from"./VLabel-JBriwFuF.js";import{l as S,m as E,D as y,T as V,p as T,A as I,r as R,as as k,y as b,n as M,ao as N}from"./index-DykBlR6X.js";import{b as W,k as X}from"./VGrid-CDxN2ts8.js";const Y=T({target:[Object,Array]},"v-dialog-transition"),j=S()({name:"VDialogTransition",props:Y(),setup(a,f){let{slots:s}=f;const i={onBeforeEnter(e){e.style.pointerEvents="none",e.style.visibility="hidden"},async onEnter(e,g){var r;await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),e.style.visibility="";const{x:t,y:u,sx:d,sy:m,speed:n}=D(a.target,e),l=h(e,[{transform:`translate(${t}px, ${u}px) scale(${d}, ${m})`,opacity:0},{}],{duration:225*n,easing:F});(r=A(e))==null||r.forEach(o=>{h(o,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*n,easing:P})}),l.finished.then(()=>g())},onAfterEnter(e){e.style.removeProperty("pointer-events")},onBeforeLeave(e){e.style.pointerEvents="none"},async onLeave(e,g){var r;await new Promise(o=>requestAnimationFrame(o));const{x:t,y:u,sx:d,sy:m,speed:n}=D(a.target,e);h(e,[{},{transform:`translate(${t}px, ${u}px) scale(${d}, ${m})`,opacity:0}],{duration:125*n,easing:$}).finished.then(()=>g()),(r=A(e))==null||r.forEach(o=>{h(o,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*n,easing:P})})},onAfterLeave(e){e.style.removeProperty("pointer-events")}};return()=>a.target?E(V,y({name:"dialog-transition"},i,{css:!1}),s):E(V,{name:"dialog-transition"},s)}});function A(a){var s;const f=(s=a.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:s.children;return f&&[...f]}function D(a,f){const s=O(a),i=C(f),[e,g]=getComputedStyle(f).transformOrigin.split(" ").map(x=>parseFloat(x)),[t,u]=getComputedStyle(f).getPropertyValue("--v-overlay-anchor-origin").split(" ");let d=s.left+s.width/2;t==="left"||u==="left"?d-=s.width/2:(t==="right"||u==="right")&&(d+=s.width/2);let m=s.top+s.height/2;t==="top"||u==="top"?m-=s.height/2:(t==="bottom"||u==="bottom")&&(m+=s.height/2);const n=s.width/i.width,l=s.height/i.height,r=Math.max(1,n,l),o=n/r||0,v=l/r||0,c=i.width*i.height/(window.innerWidth*window.innerHeight),p=c>.12?Math.min(1.5,(c-.12)*10+1):1;return{x:d-(e+i.left),y:m-(g+i.top),sx:o,sy:v,speed:p}}const z=T({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...B({origin:"center center",scrollStrategy:"block",transition:{component:j},zIndex:2400})},"VDialog"),K=S()({name:"VDialog",props:z(),emits:{"update:modelValue":a=>!0,afterLeave:()=>!0},setup(a,f){let{emit:s,slots:i}=f;const e=I(a,"modelValue"),{scopeId:g}=L(),t=R();function u(n){var o,v;const l=n.relatedTarget,r=n.target;if(l!==r&&((o=t.value)!=null&&o.contentEl)&&((v=t.value)!=null&&v.globalTop)&&![document,t.value.contentEl].includes(r)&&!t.value.contentEl.contains(r)){const c=N(t.value.contentEl);if(!c.length)return;const p=c[0],x=c[c.length-1];l===p?x.focus():p.focus()}}k&&b(()=>e.value&&a.retainFocus,n=>{n?document.addEventListener("focusin",u):document.removeEventListener("focusin",u)},{immediate:!0});function d(){var n;(n=t.value)!=null&&n.contentEl&&!t.value.contentEl.contains(document.activeElement)&&t.value.contentEl.focus({preventScroll:!0})}function m(){s("afterLeave")}return b(e,async n=>{var l;n||(await M(),(l=t.value.activatorEl)==null||l.focus({preventScroll:!0}))}),W(()=>{const n=w.filterProps(a),l=y({"aria-haspopup":"dialog","aria-expanded":String(e.value)},a.activatorProps),r=y({tabindex:-1},a.contentProps);return E(w,y({ref:t,class:["v-dialog",{"v-dialog--fullscreen":a.fullscreen,"v-dialog--scrollable":a.scrollable},a.class],style:a.style},n,{modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,"aria-modal":"true",activatorProps:l,contentProps:r,role:"dialog",onAfterEnter:d,onAfterLeave:m},g),{activator:i.activator,default:function(){for(var o=arguments.length,v=new Array(o),c=0;c<o;c++)v[c]=arguments[c];return E(X,{root:"VDialog"},{default:()=>{var p;return[(p=i.default)==null?void 0:p.call(i,...v)]}})}})}),q({},t)}});export{K as V,j as a};
