import{_ as z}from"./imageInput-C7eY035c.js";import{W as E,F as O,r as d,H as k,I as N,v as l,L as n,O as D,M as t,P as u,J,q as M,S as $,K as L,R as j,Q as q}from"./index-DoUa79Mj.js";import{n as w,s as H,f as K,d as P}from"./apiService-Q18LkiAH.js";import{k as g}from"./VBtn-ByDIVYCH.js";import{e as i,V as R,d as Q}from"./VRow-DZDJQVib.js";import{V as W}from"./VForm-B_Ufe_Z7.js";import{V as m}from"./VTextField-DwDypr5x.js";import{V as A}from"./VDialog-D8YprR3A.js";import{_ as G}from"./ShowImages-i6Ak1e-R.js";import{_ as X}from"./ThemeSettings-LYEVB81B.js";import{V as Y}from"./VTable-B0P-F9Du.js";import{V as Z}from"./VContainer-D3lAfPRy.js";import"./VInput-BG1HDC-H.js";import"./index-CPodMjtC.js";import"./forwardRefs-ByVqR1CM.js";import"./VChip-mQXjCYxY.js";import"./VOverlay-DALfeHwa.js";import"./VSwitch-B4XaDZ4X.js";const ee={class:"ma-5"},le={__name:"AcademicsForm",emits:["runItems"],setup(B,{expose:C,emit:F}){const{xs:x}=E(),S=O(),I=F,y=d(!1),o=d({}),c=d({ar:"",en:""}),f=d({}),_=d({}),r=d({}),V=d({});function U(){y.value=!1,I("runItems")}function p(s){const e=new FormData;e.append("institution",JSON.stringify(c.value)),e.append("field_of_study",JSON.stringify(r.value)),e.append("description",JSON.stringify(V.value)),e.append("degree",JSON.stringify(f.value)),e.append("grade",JSON.stringify(_.value)),e.append("end_date",o.value.end_date||""),e.append("start_date",o.value.start_date),e.append("user_id",S.user.id),s.length&&s.forEach(h=>{e.append("photos[]",h,h.name)}),o.value.id&&e.append("_method","put"),H("academics",e,o.value.id).then(()=>{I("runItems"),U()})}const v=(s={})=>{Object.keys(s).length!==0&&(c.value=s.institution,f.value=s.degree,_.value=s.grade,r.value=s.field_of_study,V.value=s.description),y.value=!0,o.value=s},b=d(null),T=()=>{if(console.log("runCompressImages"),!c.value.ar&&!c.value.en){w("حقل المؤسسة التعليمية مطلوب عربي او انجليزي");return}if(!f.value.ar&&!f.value.en){w("حقل الدرجة العلمية مطلوب عربي او انجليزي");return}if(!r.value.ar&&!r.value.en){w("حقل مجال الدراسة مطلوب عربي او انجليزي");return}if(!o.value.start_date){w("حقل تاريخ البدء مطلوب ");return}b.value&&b.value.compressImages().then(s=>{p(s)})};return C({addNew:v}),(s,e)=>{const h=z;return k(),N("div",null,[l(i,{cols:"auto"},{default:n(()=>[l(g,{onClick:e[0]||(e[0]=a=>v()),icon:"mdi-plus",color:"success",size:"small",to:""})]),_:1}),l(A,{fullscreen:J(x),class:"text-center",modelValue:y.value,"onUpdate:modelValue":e[13]||(e[13]=a=>y.value=a),"max-width":"900"},{default:n(()=>[l(R,{class:"pa-5"},{actions:n(()=>[l(g,{onClick:U},{default:n(()=>[D(" اغلاق ")]),_:1}),l(g,{onClick:T},{default:n(()=>[D(" موافق ")]),_:1})]),default:n(()=>[t("h2",ee,u(o.value.id?"تعديل ":" اضافة "),1),l(W,null,{default:n(()=>[l(Q,null,{default:n(()=>[l(i,{cols:"12",md:"6"},{default:n(()=>[l(m,{modelValue:c.value.ar,"onUpdate:modelValue":e[1]||(e[1]=a=>c.value.ar=a),label:"المؤسسة التعليمية"},null,8,["modelValue"])]),_:1}),l(i,{cols:"12",md:"6"},{default:n(()=>[l(m,{modelValue:c.value.en,"onUpdate:modelValue":e[2]||(e[2]=a=>c.value.en=a),label:"institution"},null,8,["modelValue"])]),_:1}),l(i,{cols:"12",md:"6"},{default:n(()=>[l(m,{modelValue:f.value.ar,"onUpdate:modelValue":e[3]||(e[3]=a=>f.value.ar=a),label:"الدرجه العلمية"},null,8,["modelValue"])]),_:1}),l(i,{cols:"12",md:"6"},{default:n(()=>[l(m,{modelValue:f.value.en,"onUpdate:modelValue":e[4]||(e[4]=a=>f.value.en=a),label:"degree"},null,8,["modelValue"])]),_:1}),l(i,{cols:"12",md:"6"},{default:n(()=>[l(m,{modelValue:_.value.ar,"onUpdate:modelValue":e[5]||(e[5]=a=>_.value.ar=a),label:"التقدير"},null,8,["modelValue"])]),_:1}),l(i,{cols:"12",md:"6"},{default:n(()=>[l(m,{modelValue:_.value.en,"onUpdate:modelValue":e[6]||(e[6]=a=>_.value.en=a),label:"Score"},null,8,["modelValue"])]),_:1}),l(i,{cols:"12",md:"6"},{default:n(()=>[l(m,{modelValue:r.value.ar,"onUpdate:modelValue":e[7]||(e[7]=a=>r.value.ar=a),label:"مجال الدراسة"},null,8,["modelValue"])]),_:1}),l(i,{cols:"12",md:"6"},{default:n(()=>[l(m,{modelValue:r.value.en,"onUpdate:modelValue":e[8]||(e[8]=a=>r.value.en=a),label:"field_of_study"},null,8,["modelValue"])]),_:1}),l(i,{cols:"12",md:"6"},{default:n(()=>[l(m,{type:"date",modelValue:o.value.start_date,"onUpdate:modelValue":e[9]||(e[9]=a=>o.value.start_date=a),label:"تاريخ البدء"},null,8,["modelValue"])]),_:1}),l(i,{cols:"12",md:"6"},{default:n(()=>[l(m,{type:"date",modelValue:o.value.end_date,"onUpdate:modelValue":e[10]||(e[10]=a=>o.value.end_date=a),label:"تاريخ الانتهاء"},null,8,["modelValue"])]),_:1}),l(i,{cols:"12",md:"6"},{default:n(()=>[l(m,{modelValue:V.value.ar,"onUpdate:modelValue":e[11]||(e[11]=a=>V.value.ar=a),label:"الوصف"},null,8,["modelValue"])]),_:1}),l(i,{cols:"12",md:"6"},{default:n(()=>[l(m,{modelValue:V.value.en,"onUpdate:modelValue":e[12]||(e[12]=a=>V.value.en=a),label:"description"},null,8,["modelValue"])]),_:1}),l(h,{ref_key:"imageInputRef",ref:b,isMultiple:!0},null,512)]),_:1})]),_:1})]),_:1})]),_:1},8,["fullscreen","modelValue"])])}}},te=t("h2",{class:"ma-5"},"هل تريد حذف العنصر بالفعل",-1),ae=t("thead",null,[t("tr",null,[t("th",{class:"text-center"},"#"),t("th",{class:"text-center"},"المؤسسة التعليمية"),t("th",{class:"text-center"},"institution"),t("th",{class:"text-center"},"الدرجة العلمية"),t("th",{class:"text-center"},"degree"),t("th",{class:"text-center"},"التقدير"),t("th",{class:"text-center"},"Score"),t("th",{class:"text-center"},"مجال الدراسة"),t("th",{class:"text-center"},"field of study"),t("th",{class:"text-center"},"تاريخ البدء"),t("th",{class:"text-center"},"تاريخ الانتهاء"),t("th",{class:"text-center"},"الوصف"),t("th",{class:"text-center"},"description"),t("th",{class:"text-center"},"تاريخ الانشاء"),t("th",{class:"text-center sticky-column"},"...")])],-1),ne={class:"sticky-column"},oe={key:2,class:"text-alert"},Ce={__name:"index",setup(B){const C=O(),F=d(null),x=d(!1),S=d([]),I=d(""),y=d(null);M(()=>{r()});const o=d(null);function c(){o.value?o.value.opendialogThemeForm():console.error("opendialogThemeForm is not a function")}const f=p=>{y.value.opaenDialog(p)};function _(p){x.value=!0,I.value=p}function r(){C.loadengApi=!0,K("academics").then(p=>{S.value=p.data,I.value=""})}function V(){C.loadengApi=!0,P("academics/delete",{id:[I.value.id]}).then(()=>{r(),x.value=!1})}const U=p=>{var v;(v=F.value)==null||v.addNew(p)};return(p,v)=>{const b=X,T=G,s=le;return k(),$(Z,null,{default:n(()=>[l(A,{class:"text-center",modelValue:x.value,"onUpdate:modelValue":v[1]||(v[1]=e=>x.value=e),"max-width":"400",persistent:""},{default:n(()=>[l(R,{class:"pa-5"},{default:n(()=>[te,l(g,{class:"ma-1",onClick:V},{default:n(()=>[D(" موافق ")]),_:1}),l(g,{class:"ma-1",onClick:v[0]||(v[0]=e=>x.value=!1)},{default:n(()=>[D(" اغلاق ")]),_:1})]),_:1})]),_:1},8,["modelValue"]),J(C).user?(k(),$(b,{key:0,ref_key:"dialogThemeForm",ref:o,detTheme:{nameEn:"academics",nameAr:"التعليم",imag:!0},onClick:c},null,512)):L("",!0),l(T,{ref_key:"isShowImage",ref:y,onRunItems:r},null,512),l(s,{ref_key:"itemForm",ref:F,onRunItems:r},null,512),S.value.length>0?(k(),$(Y,{key:1,style:{"white-space":"nowrap"},dir:"rtl",class:"h"},{default:n(()=>[ae,t("tbody",null,[(k(!0),N(q,null,j(S.value,(e,h)=>(k(),N("tr",{key:e.id},[t("td",null,u(h+1),1),t("td",null,u(e.institution.ar),1),t("td",null,u(e.institution.en),1),t("td",null,u(e.degree.ar),1),t("td",null,u(e.degree.en),1),t("td",null,u(e.grade.ar),1),t("td",null,u(e.grade.en),1),t("td",null,u(e.field_of_study.ar),1),t("td",null,u(e.field_of_study.en),1),t("td",null,u(e.start_date),1),t("td",null,u(e.end_date),1),t("td",null,u(e.description.ar),1),t("td",null,u(e.description.en),1),t("td",null,u(e.created_at),1),t("td",ne,[l(g,{onClick:a=>f(e.photos),icon:"mdi-image-edit-outline",color:"info",size:"small"},null,8,["onClick"]),l(g,{onClick:a=>_(e),class:"mx-3",icon:"mdi-delete",color:"red",size:"small"},null,8,["onClick"]),l(g,{onClick:a=>U(e),icon:"mdi-pencil",color:"info",size:"small"},null,8,["onClick"])])]))),128))])]),_:1})):(k(),N("p",oe,"لا توجد اي بيانات"))]),_:1})}}};export{Ce as default};
