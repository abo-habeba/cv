import{_ as E}from"./imageInput-C7eY035c.js";import{s as L,n as O,f as A,d as J}from"./apiService-Q18LkiAH.js";import{W as P,F as b,r,H as g,I as w,v as e,L as a,O as S,M as o,P as f,J as N,q as H,S as U,K as M,R as W,Q as q}from"./index-DoUa79Mj.js";import{k as v}from"./VBtn-ByDIVYCH.js";import{e as k,V as R,d as K}from"./VRow-DZDJQVib.js";import{V as Q}from"./VForm-B_Ufe_Z7.js";import{V as y}from"./VTextField-DwDypr5x.js";import{V as j}from"./VDialog-D8YprR3A.js";import{_ as G}from"./ShowImages-i6Ak1e-R.js";import{_ as X}from"./ThemeSettings-LYEVB81B.js";import{V as Y}from"./VTable-B0P-F9Du.js";import{V as Z}from"./VContainer-D3lAfPRy.js";import"./VInput-BG1HDC-H.js";import"./index-CPodMjtC.js";import"./forwardRefs-ByVqR1CM.js";import"./VChip-mQXjCYxY.js";import"./VOverlay-DALfeHwa.js";import"./VSwitch-B4XaDZ4X.js";const ee={class:"ma-5"},le={__name:"ProjectForm",emits:["runItems"],setup(B,{expose:x,emit:F}){const{xs:_}=P(),I=b(),h=F,c=r(!1),u=r({}),s=r({}),d=r({});function V(){s.value={ar:"",en:""},d.value={ar:"",en:""},u.value.id="",c.value=!1,h("runItems")}function D(n){return n.startsWith("https://")?n:"https://"+n}function T(n){const t=new FormData;t.append("title",JSON.stringify(s.value)),t.append("description",JSON.stringify(d.value)),t.append("url",D(u.value.url)),t.append("user_id",I.user.id),n.length&&n.forEach(p=>{t.append("photos[]",p,p.name)}),u.value.id&&t.append("_method","put"),L("projects",t,u.value.id).then(p=>{u.value=p.data,h("runItems"),V()})}const C=r(null),i=()=>{if(!s.value.ar&&!s.value.en){O("حقل العنوان مطلوب عربي او انجليزي");return}C.value&&C.value.compressImages()},m=(n={})=>{Object.keys(n).length!==0&&(s.value=n.title,d.value=n.description),c.value=!0,u.value=n};return x({addNew:m}),(n,t)=>{const p=E;return g(),w("div",null,[e(k,{cols:"auto"},{default:a(()=>[e(v,{onClick:t[0]||(t[0]=l=>m()),icon:"mdi-plus",color:"success",size:"small",to:""})]),_:1}),e(j,{class:"text-center",modelValue:c.value,"onUpdate:modelValue":t[6]||(t[6]=l=>c.value=l),"max-width":"900",fullscreen:N(_)},{default:a(()=>[e(R,{class:"pa-5"},{actions:a(()=>[e(v,{onClick:V},{default:a(()=>[S(" اغلاق ")]),_:1}),e(v,{onClick:i},{default:a(()=>[S(" موافق ")]),_:1})]),default:a(()=>[o("h2",ee,f(u.value.id?"تعديل ":" اضافة "),1),e(Q,null,{default:a(()=>[e(K,null,{default:a(()=>[e(k,{cols:"12",md:"6"},{default:a(()=>[e(y,{modelValue:s.value.ar,"onUpdate:modelValue":t[1]||(t[1]=l=>s.value.ar=l),label:"العنوان"},null,8,["modelValue"])]),_:1}),e(k,{cols:"12",md:"6"},{default:a(()=>[e(y,{modelValue:s.value.en,"onUpdate:modelValue":t[2]||(t[2]=l=>s.value.en=l),label:"title"},null,8,["modelValue"])]),_:1}),e(k,{cols:"12",md:"6"},{default:a(()=>[e(y,{modelValue:d.value.ar,"onUpdate:modelValue":t[3]||(t[3]=l=>d.value.ar=l),label:"الوصف"},null,8,["modelValue"])]),_:1}),e(k,{cols:"12",md:"6"},{default:a(()=>[e(y,{modelValue:d.value.en,"onUpdate:modelValue":t[4]||(t[4]=l=>d.value.en=l),label:"description"},null,8,["modelValue"])]),_:1}),e(k,{cols:"12",md:"6"},{default:a(()=>[e(y,{modelValue:u.value.url,"onUpdate:modelValue":t[5]||(t[5]=l=>u.value.url=l),label:"URL"},null,8,["modelValue"])]),_:1}),e(p,{ref_key:"imageInputRef",ref:C,onSaveCompressedImages:T},null,512)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"])])}}},te=o("h2",{class:"ma-5"},"هل تريد حذف العنصر بالفعل",-1),oe=o("thead",null,[o("tr",null,[o("th",{class:"text-center"},"#"),o("th",{class:"text-center"},"العنوان"),o("th",{class:"text-center"},"title"),o("th",{class:"text-center"},"الوصف"),o("th",{class:"text-center"},"description"),o("th",{class:"text-center"},"URL"),o("th",{class:"text-center"},"تاريخ الانشاء"),o("th",{class:"text-center sticky-column"},". . .")])],-1),ae={class:"sticky-column"},ne={key:2,class:"text-alert"},ye={__name:"index",setup(B){const x=b(),F=r(null),_=r(!1),I=r([]),h=r(""),c=r(null);function u(){c.value?c.value.opendialogThemeForm():console.error("opendialogThemeForm is not a function")}H(()=>{V()});const s=r(null),d=i=>{s.value.opaenDialog(i)};function V(){x.loadengApi=!0,A("projects").then(i=>{I.value=i.data,h.value=""})}function D(i){_.value=!0,h.value=i}function T(){x.loadengApi=!0,J("projects/delete",{id:[h.value.id]}).then(()=>{V(),_.value=!1})}const C=i=>{var m;(m=F.value)==null||m.addNew(i)};return(i,m)=>{const n=X,t=G,p=le;return g(),U(Z,null,{default:a(()=>[e(j,{class:"text-center",modelValue:_.value,"onUpdate:modelValue":m[1]||(m[1]=l=>_.value=l),"max-width":"400",persistent:""},{default:a(()=>[e(R,{class:"pa-5"},{default:a(()=>[te,e(v,{class:"ma-1",onClick:T},{default:a(()=>[S(" موافق ")]),_:1}),e(v,{class:"ma-1",onClick:m[0]||(m[0]=l=>_.value=!1)},{default:a(()=>[S(" اغلاق ")]),_:1})]),_:1})]),_:1},8,["modelValue"]),N(x).user?(g(),U(n,{key:0,ref_key:"dialogThemeForm",ref:c,detTheme:{nameEn:"projects",nameAr:"المشاريع"},onClick:u},null,512)):M("",!0),e(t,{ref_key:"isShowImage",ref:s,onRunItems:V},null,512),e(p,{ref_key:"itemForm",ref:F,onRunItems:V},null,512),I.value.length>0?(g(),U(Y,{key:1,style:{"white-space":"nowrap"},dir:"rtl",class:"h"},{default:a(()=>[oe,o("tbody",null,[(g(!0),w(q,null,W(I.value,(l,z)=>(g(),w("tr",{key:l.id},[o("td",null,f(z+1),1),o("td",null,f(l.title.ar),1),o("td",null,f(l.title.en),1),o("td",null,f(l.description.ar),1),o("td",null,f(l.description.en),1),o("td",null,f(l.url),1),o("td",null,f(l.created_at),1),o("td",ae,[e(v,{onClick:$=>d(l.photos),icon:"mdi-image-edit-outline",color:"info",size:"small"},null,8,["onClick"]),e(v,{onClick:$=>D(l),class:"mx-3",icon:"mdi-delete",color:"red",size:"small"},null,8,["onClick"]),e(v,{onClick:$=>C(l),icon:"mdi-pencil",color:"info",size:"small"},null,8,["onClick"])])]))),128))])]),_:1})):(g(),w("p",ne,"لا توجد اي بيانات"))]),_:1})}}};export{ye as default};
