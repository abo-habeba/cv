import{J as w,r as v,q as $,L as V,M as I,v as e,P as a,S as g,V as U,O as k,Q as R,T as O,X as J,a4 as E,N as n,F as P,U as T,ag as M}from"./index-CvTNCW6j.js";import{y as x,n as h,x as L}from"./VImg-SuID-r8P.js";import{V as r,a as C,b as m}from"./VTextField-NIue9zOk.js";import{V as S,b as q,a as z}from"./VCard-CtC90-vn.js";import{V as B}from"./VForm-BlMqtkcG.js";import{V as Q,_ as X}from"./imageInput-CnFkfPBa.js";import{V as H}from"./VDialog-B7bcmGWY.js";import{a as j,s as G}from"./apiService-Beodnh_G.js";import{V as K,a as f}from"./VList-mqUtP_dE.js";import"./VInput-Du0muv8n.js";import"./forwardRefs-BHDJfBC2.js";import"./VChip-BOIknAs6.js";import"./VOverlay-CDfqK3Gf.js";import"./lazy-DWFxPyKs.js";import"./ssrBoot-DsQSyTb-.js";const W=R("h2",{class:"ma-5"},O("تعديل "),-1),Y={__name:"UserForm",emits:["runItems"],setup(A,{expose:N,emit:D}){const o=w(),p=v(!1),c=v(null),t=v({}),_=v(null);$(()=>{t.value=o.user,_.value=o.user.profile_image});const b=u=>{E.error(u,{theme:"colored",position:E.POSITION.TOP_LEFT})};function y(){p.value=!1}const F=()=>{const u=c.value;if(u){const l=new FileReader;l.onload=s=>{_.value=s.target.result},l.readAsDataURL(u)}else _.value=null};function i(){o.loadengApi=!0;const u=new FormData;u.append("first_name",JSON.stringify(t.value.first_name)),u.append("last_name",JSON.stringify(t.value.last_name)),u.append("address",JSON.stringify(t.value.address)),u.append("bio",JSON.stringify(t.value.bio)),u.append("position",JSON.stringify(t.value.position)),u.append("email",t.value.email),u.append("phone",t.value.phone),c.value&&u.append("profile_image",c.value),u.append("_method","put"),J.post(`users/${t.value.id}`,u).then(l=>{o.fetchUser().then(()=>{o.loadengApi=!1})}).catch(l=>{o.loadengApi=!1,b("هناك خطا ما حاول مره اخري")})}return N({dialogForm:()=>{p.value=!0}}),(u,l)=>(V(),I("div",null,[e(r,{cols:"auto"},{default:a(()=>[e(x,{class:"ma-1",color:"success"},{default:a(()=>[g(" تعديل البيانات "),e(h,{icon:"mdi-square-edit-outline",end:""})]),_:1})]),_:1}),e(H,{class:"text-center",modelValue:p.value,"onUpdate:modelValue":l[13]||(l[13]=s=>p.value=s),"max-width":"900",persistent:""},{default:a(()=>[e(S,{class:"pa-5"},{actions:a(()=>[e(x,{onClick:y},{default:a(()=>[g(" اغلاق ")]),_:1}),e(x,{onClick:i},{default:a(()=>[g(" موافق ")]),_:1})]),default:a(()=>[W,e(B,null,{default:a(()=>[e(C,null,{default:a(()=>[e(r,{cols:"12",md:"6"},{default:a(()=>[e(m,{modelValue:t.value.first_name.ar,"onUpdate:modelValue":l[0]||(l[0]=s=>t.value.first_name.ar=s),label:" الاسم الاول "},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:a(()=>[e(m,{modelValue:t.value.first_name.en,"onUpdate:modelValue":l[1]||(l[1]=s=>t.value.first_name.en=s),label:"First Name"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:a(()=>[e(m,{modelValue:t.value.last_name.ar,"onUpdate:modelValue":l[2]||(l[2]=s=>t.value.last_name.ar=s),label:" الاسم الاخير "},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:a(()=>[e(m,{modelValue:t.value.last_name.en,"onUpdate:modelValue":l[3]||(l[3]=s=>t.value.last_name.en=s),label:" Last Name"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:a(()=>[e(m,{modelValue:t.value.address.ar,"onUpdate:modelValue":l[4]||(l[4]=s=>t.value.address.ar=s),label:" العنوان "},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:a(()=>[e(m,{modelValue:t.value.address.en,"onUpdate:modelValue":l[5]||(l[5]=s=>t.value.address.en=s),label:" Address"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:a(()=>[e(m,{modelValue:t.value.position.ar,"onUpdate:modelValue":l[6]||(l[6]=s=>t.value.position.ar=s),label:" الوظيفة "},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:a(()=>[e(m,{modelValue:t.value.position.en,"onUpdate:modelValue":l[7]||(l[7]=s=>t.value.position.en=s),label:" Position"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:a(()=>[e(m,{modelValue:t.value.bio.ar,"onUpdate:modelValue":l[8]||(l[8]=s=>t.value.bio.ar=s),label:" نبذه عنك "},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:a(()=>[e(m,{modelValue:t.value.bio.en,"onUpdate:modelValue":l[9]||(l[9]=s=>t.value.bio.en=s),label:" Bio"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:a(()=>[e(m,{modelValue:t.value.email,"onUpdate:modelValue":l[10]||(l[10]=s=>t.value.email=s),label:" Email"},null,8,["modelValue"]),e(m,{modelValue:t.value.phone,"onUpdate:modelValue":l[11]||(l[11]=s=>t.value.phone=s),label:" Phone"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:a(()=>[e(Q,{modelValue:c.value,"onUpdate:modelValue":l[12]||(l[12]=s=>c.value=s),label:" الصورة الشخصيه ",accept:"image/*","prepend-icon":"mdi-camera",onChange:F},null,8,["modelValue"]),_.value?(V(),U(L,{key:0,style:{margin:"auto"},src:_.value,"max-width":"200"},null,8,["src"])):k("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}},Z=R("h2",{class:"ma-5"},"صور الرئيسية",-1),ee={key:1,class:"text-alert"},le={__name:"HeroForm",emits:["runItems"],setup(A,{expose:N,emit:D}){const o=w(),p=v(!1),c=i=>{j("photo",i).then(()=>{o.user.hero=o.user.hero.filter(d=>d.id!==i)})};function t(){p.value=!1}function _(i){const d=new FormData;d.append("user_id",o.user.id),i.length&&i.forEach(u=>{d.append("hero[]",u,u.name)}),d.append("_method","put"),G("users",d,o.user.id).then(u=>{o.user.hero=u.data.hero})}const b=v(null),y=()=>{b.value&&b.value.compressImages(3).then(i=>{_(i)}).catch(i=>{console.log("error ",i)})},F=()=>{p.value=!0};return N({openDialogShowHero:F}),(i,d)=>{const u=X;return V(),I("div",null,[e(r,{cols:"auto"},{default:a(()=>[e(x,{class:"ma-1",color:"info",onClick:d[0]||(d[0]=l=>F())},{default:a(()=>[g(" تعديل صور الرئيسية "),e(h,{icon:"mdi-image-outline",end:""})]),_:1})]),_:1}),e(H,{style:{"z-index":"9999"},class:"text-center",modelValue:p.value,"onUpdate:modelValue":d[1]||(d[1]=l=>p.value=l),"max-width":"900",persistent:""},{default:a(()=>[e(S,{class:"pa-5"},{actions:a(()=>[e(x,{onClick:t},{default:a(()=>[g(" اغلاق ")]),_:1}),e(x,{onClick:y},{default:a(()=>[g(" موافق ")]),_:1})]),default:a(()=>[Z,n(o).user.hero.length?(V(),U(C,{key:0,style:{"background-color":"#ada7a0","text-align":"center","overflow-x":"auto"}},{default:a(()=>[(V(!0),I(P,null,T(n(o).user.hero,l=>(V(),U(r,{key:l,class:"d-flex child-flex"},{default:a(()=>[e(L,{"min-width":"150px","max-width":"300px",src:l.path,"aspect-ratio":"1",class:"bg-grey-lighten-2",cover:""},{default:a(()=>[e(h,{onClick:M(s=>c(l.id),["stop"]),class:"icon-delete-image",icon:"mdi-delete-outline"},null,8,["onClick"])]),_:2},1032,["src"])]),_:2},1024))),128))]),_:1})):k("",!0),n(o).user.hero.length?k("",!0):(V(),I("p",ee,"لا توجد صور")),e(B,null,{default:a(()=>[e(C,null,{default:a(()=>[e(u,{ref_key:"imageInputRef",ref:b,onSaveCompressedImages:_},null,512)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},ve={__name:"index",setup(A){const N=v(null),D=v(null),o=w(),p=()=>{N.value.dialogForm()},c=()=>{D.value.openDialogShowHero()};return(t,_)=>{const b=Y;return n(o).loadengApi?k("",!0):(V(),U(z,{key:0,class:"user-info"},{default:a(()=>[e(b,{ref_key:"dialogItemForm",ref:N,onClick:p},null,512),e(le,{ref_key:"dialogHeroForm",ref:D,onClick:c},null,512),e(S,{title:(n(o).user.first_name.en||"N D")+" - "+(n(o).user.first_name.ar||"N D"),subtitle:n(o).user.email||"N D",class:"mt-1"},{default:a(()=>[e(q,null,{default:a(()=>[g(O(n(o).user.phone),1)]),_:1}),e(K,null,{default:a(()=>[e(f,{class:"ma-2 pa-2",subtitle:n(o).user.first_name.en||"N D",title:"First Name (EN)"},null,8,["subtitle"]),e(f,{class:"ma-2 pa-2",subtitle:n(o).user.first_name.ar||"N D",title:"الاسم الاول (AR)"},null,8,["subtitle"]),e(f,{class:"ma-2 pa-2",subtitle:n(o).user.last_name.en||"N D",title:"Last Name (EN)"},null,8,["subtitle"]),e(f,{class:"ma-2 pa-2",subtitle:n(o).user.last_name.ar||"N D",title:"الاسم الاخير (AR)"},null,8,["subtitle"]),e(f,{class:"ma-2 pa-2",subtitle:n(o).user.address.en||"N D",title:"Address (EN)"},null,8,["subtitle"]),e(f,{class:"ma-2 pa-2",subtitle:n(o).user.address.ar||"N D",title:"العنوان (AR)"},null,8,["subtitle"]),e(f,{class:"ma-2 pa-2",subtitle:n(o).user.bio.en||"N D",title:"Bio (EN)"},null,8,["subtitle"]),e(f,{class:"ma-2 pa-2",subtitle:n(o).user.bio.ar||"N D",title:"نبذه عنك (AR)"},null,8,["subtitle"]),e(f,{class:"ma-2 pa-2",subtitle:n(o).user.position.en||"N D",title:"Position (EN)"},null,8,["subtitle"]),e(f,{class:"ma-2 pa-2",subtitle:n(o).user.position.ar||"N D",title:"الوظيفة (AR)"},null,8,["subtitle"]),e(f,{class:"ma-2 pa-2",subtitle:n(o).user.username||"N D",title:"User Name"},null,8,["subtitle"])]),_:1})]),_:1},8,["title","subtitle"])]),_:1}))}}};export{ve as default};
