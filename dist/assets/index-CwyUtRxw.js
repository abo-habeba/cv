import{_ as J}from"./ThemeSettings-dLy6dYvc.js";import{_ as K}from"./Breadcrumbs-DmCwKFnp.js";import{E as Y,r as p,f as G,x as Q,S as b,H as o,P as m,K as t,c as s,L as c,M as r,V as u,N as n,O as I,J as f,R as W,F as X,al as A,a9 as Z}from"./index-TKAKwIDP.js";import{q as N,Y as ee,r as O,R as S,t as U,s as h}from"./VGrid-eYepT4wA.js";import{a as B}from"./VDialog-Cy7hGuso.js";import{V as $}from"./VRow-B893D1wj.js";import{V as ae}from"./VTable-DqP69mUO.js";import{V as te}from"./VContainer-C44OOwED.js";import"./VSwitch-BpSF2KRr.js";import"./notifyService-BLb-S2MK.js";import"./VInput-CdCn7wfj.js";import"./VSelectionControl-CEoEoVU_.js";import"./VTextField-CW1u6qvo.js";import"./VForm-CvfQ3TYF.js";const le=["href"],oe=n("br",null,null,-1),se=["href"],ne=n("hr",{class:"ma-2"},null,-1),re=n("h2",{class:"ma-5"},"هل تريد حذف العنصر بالفعل",-1),ue=n("thead",null,[n("tr",null,[n("th",{class:"text-center"},"#"),n("th",{class:"text-center"},"الاسم"),n("th",{class:"text-center"},"الموضوع"),n("th",{class:"text-center"},"تاريخ الإنشاء"),n("th",{class:"text-center"})])],-1),ce=["onClick"],de=["onClick"],ie=["onClick"],me=["onClick"],ve=["onClick"],_e={key:1,class:"text-alert mt-10"},fe={key:2,class:"text-alert mt-10"},je={__name:"index",setup(pe){const v=Y(),D=l=>{A.success(l,{theme:"colored",position:A.POSITION.TOP_LEFT})},T=l=>{A.error(l,{theme:"colored",position:A.POSITION.TOP_LEFT})},g=p(!1),y=p(!1),i=p({}),_=p([]),C=G(()=>_.value.filter(l=>l.read==="0")),e=p(""),k=p(!0);function E(l){g.value=!0,e.value=l}Q(()=>{w()});function P(){k.value=!1,i.value=_.value}function j(){k.value=!0,console.log(C.value),i.value=C.value}function V(l){if(e.value=l,console.log(e.value),console.log(typeof l.read),l.read==="0"){console.log("run updateItems"),b.put(`contacts/${l.id}`,{read:"1"}).then(()=>{_.value=_.value.map(d=>d.id===l.id?{...d,read:"1"}:d),i.value=C.value,v.user.unread_contacts_count-=1,y.value=!0}).catch(()=>{T("هناك خطا ما حاول مره اخري")});return}y.value=!0}function w(){v.loadengApi=!0,b.get("contacts",i.value).then(l=>{i.value=l.data.data,_.value=l.data.data,j(),v.loadengApi=!1,e.value=""}).catch(()=>{T("هناك خطا ما حاول مره اخري")})}function L(){v.loadengApi=!0,b.get("contacts-mark-all-read").then(()=>{v.user.unread_contacts_count=0,w()}).catch(()=>{T("هناك خطا ما حاول مره اخري")})}const F=p(null);function z(){F.value?F.value.opendialogThemeForm():console.error("opendialogThemeForm is not a function")}function R(){v.loadengApi=!0,b.post("contacts/delete",{id:[e.value.id]}).then(()=>{_.value=_.value.filter(l=>l.id!==e.value.id),i.value=_.value,g.value=!1,v.loadengApi=!1,D(" تم الحذف")}).catch(l=>{T(l.response.data.message)})}return(l,d)=>{const M=K,q=J;return o(),m(te,null,{default:t(()=>[s(M),s(B,{class:"text-center",modelValue:y.value,"onUpdate:modelValue":d[1]||(d[1]=a=>y.value=a),"max-width":"600",persistent:""},{default:t(()=>[s(N,{class:"pa-5"},{default:t(()=>[s(ee,{class:"pa-1"},{default:t(()=>[e.value.name.ar?(o(),m(O,{key:0},{default:t(()=>[c(r(e.value.name.ar),1)]),_:1})):u("",!0),e.value.name.en?(o(),m(O,{key:1},{default:t(()=>[c(r(e.value.name.en),1)]),_:1})):u("",!0),e.value.subject.ar?(o(),m(S,{key:2},{default:t(()=>[c(r(e.value.subject.ar),1)]),_:1})):u("",!0),e.value.subject.en?(o(),m(S,{key:3},{default:t(()=>[c(r(e.value.subject.en),1)]),_:1})):u("",!0),n("a",{href:"mailto:"+e.value.email},r(e.value.email),9,le),oe,n("a",{href:"tel:"+e.value.phone},r(e.value.phone),9,se)]),_:1}),e.value.message.ar?(o(),m(U,{key:0,class:"pa-2"},{default:t(()=>[c(r(e.value.message.ar),1)]),_:1})):u("",!0),e.value.message.en?(o(),m(U,{key:1,class:"pa-2"},{default:t(()=>[c(r(e.value.message.en),1)]),_:1})):u("",!0),s(S,null,{default:t(()=>[c(r(e.value.created_at),1)]),_:1}),ne,s(h,{class:"ma-1",onClick:d[0]||(d[0]=a=>y.value=!1)},{default:t(()=>[c(" موافق ")]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(B,{class:"text-center",modelValue:g.value,"onUpdate:modelValue":d[3]||(d[3]=a=>g.value=a),"max-width":"400",persistent:""},{default:t(()=>[s(N,{class:"pa-5"},{default:t(()=>[re,s(h,{class:"ma-1",onClick:R},{default:t(()=>[c(" موافق ")]),_:1}),s(h,{class:"ma-1",onClick:d[2]||(d[2]=a=>g.value=!1)},{default:t(()=>[c(" اغلاق ")]),_:1})]),_:1})]),_:1},8,["modelValue"]),s($,{col:"12"},{default:t(()=>[I(v).user?(o(),m(q,{key:0,ref_key:"dialogThemeForm",ref:F,detTheme:{nameEn:"contacts",nameAr:"الرسائل"},onClick:z},null,512)):u("",!0)]),_:1}),s($,{col:"12"},{default:t(()=>[s(h,{onClick:L,disabled:I(C).length<=0,color:I(C).length>0?"primary":"grey"},{default:t(()=>[c(" تعين الكل ك مقروء ")]),_:1},8,["disabled","color"])]),_:1}),s($,null,{default:t(()=>[s(h,{class:"ma-1",onClick:P,color:k.value?"primary":"grey"},{default:t(()=>[c(" عرض الكل ")]),_:1},8,["color"]),s(h,{class:"ma-1",onClick:j,color:k.value?"grey":"primary"},{default:t(()=>[c(" عرض الغير مقروء ")]),_:1},8,["color"])]),_:1}),i.value.length>0?(o(),m(ae,{key:0,style:{"white-space":"nowrap"},dir:"rtl",class:"h mt-10"},{default:t(()=>[ue,n("tbody",null,[(o(!0),f(X,null,W(i.value,(a,H)=>(o(),f("tr",{key:a.id,style:Z({color:a.read==="0"?"#2196F3":"",cursor:"pointer"})},[n("td",{onClick:x=>V(a)},r(H+1),9,ce),a.name.ar?(o(),f("td",{key:0,onClick:x=>V(a)},r(a.name.ar),9,de)):u("",!0),a.name.en?(o(),f("td",{key:1,onClick:x=>V(a)},r(a.name.en),9,ie)):u("",!0),a.subject.ar?(o(),f("td",{key:2,onClick:x=>V(a)},r(a.subject.ar),9,me)):u("",!0),a.subject.en?(o(),f("td",{key:3,onClick:x=>V(a)},r(a.subject.en),9,ve)):u("",!0),n("td",null,r(a.created_at),1),n("td",null,[s(h,{style:{"z-index":"100"},onClick:x=>E(a),class:"ml-3",icon:"mdi-delete",color:"red",size:"small"},null,8,["onClick"])])],4))),128))])]),_:1})):u("",!0),!k.value&&i.value.length<=0?(o(),f("p",_e,"لا توجد اي رسائل")):u("",!0),k.value&&i.value.length<=0?(o(),f("p",fe,"لا توجد أي رسائل غير مقروءة")):u("",!0)]),_:1})}}};export{je as default};
