import{_ as O}from"./ShowImages-BnZjdONw.js";import{_ as L}from"./imageInput-DB73anOz.js";import{n as H,s as J,f as M,d as P}from"./apiService-TFQ8nE3r.js";import{H as W,O as j,r as m,Q as g,R as F,m as e,S as n,U as S,Y as o,V as _,W as b,N as q,z as Q,$ as T,a2 as Y,_ as G,I as K}from"./index-BncGg9FV.js";import{w as X,x as h}from"./VGrid-nb7C4rp2.js";import{b as N,V as Z,a as y}from"./VRow-D70Kzid9.js";import{V as ee}from"./VForm-f_vdGBsH.js";import{V as C}from"./VTextField-Bn--kAOx.js";import{V as A}from"./VDialog-DWLSTxjY.js";import{_ as te}from"./ThemeSettings-Cap92AIx.js";import{_ as le}from"./Breadcrumbs-Bre_vSCV.js";import{V as oe}from"./VTable-tMJQzZv_.js";import{V as ne}from"./VContainer-BhJ3kjaz.js";import"./VInput-D67ZAAbO.js";import"./VLabel-Bec2Bxp_.js";import"./VChip-C06EaqND.js";import"./VSelectionControl-BlNThGpR.js";import"./VSwitch-BhDfgU8R.js";const ae={class:"ma-5"},se={__name:"ProjectForm",emits:["runItems"],setup(B,{expose:w,emit:I}){const{xs:v}=W(),d=j(),x=I,p=m(!1),r=m({}),u=m({}),c=m({});function V(){u.value={ar:"",en:""},c.value={ar:"",en:""},r.value.id="",p.value=!1,x("runItems")}function U(l){return l.startsWith("https://")?l:"https://"+l}function $(l){const t=new FormData;t.append("title",JSON.stringify(u.value)),t.append("description",JSON.stringify(c.value)),t.append("url",U(r.value.url)),t.append("user_id",d.user.id),l.length&&l.forEach(f=>{t.append("photos[]",f,f.name)}),r.value.id&&t.append("_method","put"),J("projects",t,r.value.id).then(f=>{r.value=f.data,x("runItems"),V()})}const k=m(null),D=()=>{if(console.log(d.loadengApi),d.loadengApi=!0,!u.value.ar&&!u.value.en){H("حقل العنوان مطلوب عربي او انجليزي");return}console.log(d.loadengApi),k.value&&(console.log(d.loadengApi),k.value.compressImages().then(l=>{console.log(l),$(l)}))},i=(l={})=>{Object.keys(l).length!==0&&(u.value=l.title,c.value=l.description),p.value=!0,r.value=l};return w({addNew:i}),(l,t)=>{const f=L;return g(),F("div",null,[e(X,{onClick:t[0]||(t[0]=a=>i()),color:"info",size:"35",icon:"mdi-plus-outline"}),e(A,{class:"text-center",modelValue:p.value,"onUpdate:modelValue":t[6]||(t[6]=a=>p.value=a),"max-width":"900",fullscreen:b(v)},{default:n(()=>[e(N,{class:"pa-5"},{actions:n(()=>[e(h,{onClick:V},{default:n(()=>[S(" اغلاق ")]),_:1}),e(h,{onClick:D},{default:n(()=>[S(" موافق ")]),_:1})]),default:n(()=>[o("h2",ae,_(r.value.id?"تعديل ":" اضافة "),1),e(ee,null,{default:n(()=>[e(Z,null,{default:n(()=>[e(y,{cols:"12",md:"6"},{default:n(()=>[e(C,{modelValue:u.value.ar,"onUpdate:modelValue":t[1]||(t[1]=a=>u.value.ar=a),label:"العنوان"},null,8,["modelValue"])]),_:1}),e(y,{cols:"12",md:"6"},{default:n(()=>[e(C,{modelValue:u.value.en,"onUpdate:modelValue":t[2]||(t[2]=a=>u.value.en=a),label:"title"},null,8,["modelValue"])]),_:1}),e(y,{cols:"12",md:"6"},{default:n(()=>[e(C,{modelValue:c.value.ar,"onUpdate:modelValue":t[3]||(t[3]=a=>c.value.ar=a),label:"الوصف"},null,8,["modelValue"])]),_:1}),e(y,{cols:"12",md:"6"},{default:n(()=>[e(C,{modelValue:c.value.en,"onUpdate:modelValue":t[4]||(t[4]=a=>c.value.en=a),label:"description"},null,8,["modelValue"])]),_:1}),e(y,{cols:"12",md:"6"},{default:n(()=>[e(C,{modelValue:r.value.url,"onUpdate:modelValue":t[5]||(t[5]=a=>r.value.url=a),label:"URL"},null,8,["modelValue"])]),_:1}),e(f,{ref_key:"imageInputRef",ref:k,isMultiple:!0},null,512)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"])])}}},ue=o("h2",{class:"ma-5"},"هل تريد حذف العنصر بالفعل",-1),re=o("thead",null,[o("tr",null,[o("th",{class:"text-center"},"#"),o("th",{class:"text-center"},"العنوان"),o("th",{class:"text-center"},"title"),o("th",{class:"text-center"},"الوصف"),o("th",{class:"text-center"},"description"),o("th",{class:"text-center"},"URL"),o("th",{class:"text-center"},"تاريخ الانشاء"),o("th",{class:"text-center sticky-column"},". . .")])],-1),ie={class:"sticky-column"},me={key:1,class:"text-alert"},Ue={__name:"index",setup(B){const w=q(),I=j(),v=m(!1),d=m([]),x=m(""),p=m(null);function r(){p.value?p.value.opendialogThemeForm():console.error("opendialogThemeForm is not a function")}Q(()=>{V()});const u=m(null),c=i=>{u.value.opaenDialog(i)};function V(){I.loadengApi=!0,M("projects").then(i=>{d.value=i.data,x.value=""})}function U(i){v.value=!0,x.value=i}function $(){I.loadengApi=!0,P("projects/delete",{id:[x.value.id]}).then(()=>{V(),v.value=!1})}const k=m(null),D=i=>{var l;(l=k.value)==null||l.addNew(i)};return(i,l)=>{const t=le,f=te,a=se,z=O;return g(),T(ne,null,{default:n(()=>[e(t),e(A,{class:"text-center",modelValue:v.value,"onUpdate:modelValue":l[1]||(l[1]=s=>v.value=s),"max-width":"400",persistent:""},{default:n(()=>[e(N,{class:"pa-5"},{default:n(()=>[ue,e(h,{class:"ma-1",onClick:$},{default:n(()=>[S(" موافق ")]),_:1}),e(h,{class:"ma-1",onClick:l[0]||(l[0]=s=>v.value=!1)},{default:n(()=>[S(" اغلاق ")]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(N,{"max-width":"500px",class:"text-center my-5 mx-auto",subtitle:b(w).meta.description,title:b(w).meta.title},{append:n(()=>[b(I).user?(g(),T(f,{key:0,ref_key:"dialogThemeForm",ref:p,detTheme:{nameEn:"projects",nameAr:"المشاريع"},onClick:r},null,512)):Y("",!0)]),prepend:n(()=>[e(a,{ref_key:"itemForm",ref:k,onRunItems:V},null,512)]),_:1},8,["subtitle","title"]),e(z,{ref_key:"isShowImage",ref:u,onRunItems:V},null,512),d.value.length>0?(g(),T(oe,{key:0,style:{"white-space":"nowrap"},dir:"rtl",class:"h"},{default:n(()=>[re,o("tbody",null,[(g(!0),F(K,null,G(d.value,(s,E)=>(g(),F("tr",{key:s.id},[o("td",null,_(E+1),1),o("td",null,_(s.title.ar),1),o("td",null,_(s.title.en),1),o("td",null,_(s.description.ar),1),o("td",null,_(s.description.en),1),o("td",null,_(s.url),1),o("td",null,_(s.created_at),1),o("td",ie,[e(h,{onClick:R=>c(s.photos),icon:"mdi-image-edit-outline",color:"info",size:"small"},null,8,["onClick"]),e(h,{onClick:R=>U(s),class:"mx-3",icon:"mdi-delete",color:"red",size:"small"},null,8,["onClick"]),e(h,{onClick:R=>D(s),icon:"mdi-square-edit-outline",color:"info",size:"small"},null,8,["onClick"])])]))),128))])]),_:1})):(g(),F("p",me,"لا توجد اي بيانات"))]),_:1})}}};export{Ue as default};
