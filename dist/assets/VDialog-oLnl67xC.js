import{b as B,u as L,V as w}from"./VSelectionControl-CYwPMwAT.js";import{Y as h,Z as $,_ as P,$ as F,a0 as O,a1 as q,b as C,w as I,k as R}from"./VLabel-86a35s0f.js";import{l as S,m as E,D as y,T as V,p as T,A as k,r as M,aq as Y,y as b,n as N,am as W}from"./index-ChxtWFXL.js";const X=T({target:[Object,Array]},"v-dialog-transition"),j=S()({name:"VDialogTransition",props:X(),setup(o,f){let{slots:s}=f;const i={onBeforeEnter(e){e.style.pointerEvents="none",e.style.visibility="hidden"},async onEnter(e,g){var r;await new Promise(n=>requestAnimationFrame(n)),await new Promise(n=>requestAnimationFrame(n)),e.style.visibility="";const{x:t,y:u,sx:d,sy:m,speed:a}=D(o.target,e),l=h(e,[{transform:`translate(${t}px, ${u}px) scale(${d}, ${m})`,opacity:0},{}],{duration:225*a,easing:$});(r=A(e))==null||r.forEach(n=>{h(n,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*a,easing:P})}),l.finished.then(()=>g())},onAfterEnter(e){e.style.removeProperty("pointer-events")},onBeforeLeave(e){e.style.pointerEvents="none"},async onLeave(e,g){var r;await new Promise(n=>requestAnimationFrame(n));const{x:t,y:u,sx:d,sy:m,speed:a}=D(o.target,e);h(e,[{},{transform:`translate(${t}px, ${u}px) scale(${d}, ${m})`,opacity:0}],{duration:125*a,easing:F}).finished.then(()=>g()),(r=A(e))==null||r.forEach(n=>{h(n,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*a,easing:P})})},onAfterLeave(e){e.style.removeProperty("pointer-events")}};return()=>o.target?E(V,y({name:"dialog-transition"},i,{css:!1}),s):E(V,{name:"dialog-transition"},s)}});function A(o){var s;const f=(s=o.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:s.children;return f&&[...f]}function D(o,f){const s=O(o),i=q(f),[e,g]=getComputedStyle(f).transformOrigin.split(" ").map(x=>parseFloat(x)),[t,u]=getComputedStyle(f).getPropertyValue("--v-overlay-anchor-origin").split(" ");let d=s.left+s.width/2;t==="left"||u==="left"?d-=s.width/2:(t==="right"||u==="right")&&(d+=s.width/2);let m=s.top+s.height/2;t==="top"||u==="top"?m-=s.height/2:(t==="bottom"||u==="bottom")&&(m+=s.height/2);const a=s.width/i.width,l=s.height/i.height,r=Math.max(1,a,l),n=a/r||0,v=l/r||0,c=i.width*i.height/(window.innerWidth*window.innerHeight),p=c>.12?Math.min(1.5,(c-.12)*10+1):1;return{x:d-(e+i.left),y:m-(g+i.top),sx:n,sy:v,speed:p}}const z=T({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...B({origin:"center center",scrollStrategy:"block",transition:{component:j},zIndex:2400})},"VDialog"),G=S()({name:"VDialog",props:z(),emits:{"update:modelValue":o=>!0,afterLeave:()=>!0},setup(o,f){let{emit:s,slots:i}=f;const e=k(o,"modelValue"),{scopeId:g}=L(),t=M();function u(a){var n,v;const l=a.relatedTarget,r=a.target;if(l!==r&&((n=t.value)!=null&&n.contentEl)&&((v=t.value)!=null&&v.globalTop)&&![document,t.value.contentEl].includes(r)&&!t.value.contentEl.contains(r)){const c=W(t.value.contentEl);if(!c.length)return;const p=c[0],x=c[c.length-1];l===p?x.focus():p.focus()}}Y&&b(()=>e.value&&o.retainFocus,a=>{a?document.addEventListener("focusin",u):document.removeEventListener("focusin",u)},{immediate:!0});function d(){var a;(a=t.value)!=null&&a.contentEl&&!t.value.contentEl.contains(document.activeElement)&&t.value.contentEl.focus({preventScroll:!0})}function m(){s("afterLeave")}return b(e,async a=>{var l;a||(await N(),(l=t.value.activatorEl)==null||l.focus({preventScroll:!0}))}),C(()=>{const a=w.filterProps(o),l=y({"aria-haspopup":"dialog","aria-expanded":String(e.value)},o.activatorProps),r=y({tabindex:-1},o.contentProps);return E(w,y({ref:t,class:["v-dialog",{"v-dialog--fullscreen":o.fullscreen,"v-dialog--scrollable":o.scrollable},o.class],style:o.style},a,{modelValue:e.value,"onUpdate:modelValue":n=>e.value=n,"aria-modal":"true",activatorProps:l,contentProps:r,role:"dialog",onAfterEnter:d,onAfterLeave:m},g),{activator:i.activator,default:function(){for(var n=arguments.length,v=new Array(n),c=0;c<n;c++)v[c]=arguments[c];return E(R,{root:"VDialog"},{default:()=>{var p;return[(p=i.default)==null?void 0:p.call(i,...v)]}})}})}),I({},t)}});export{G as V,j as a};
